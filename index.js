var Godot=function(){var a=typeof document!='undefined'&&document.currentScript?document.currentScript.src:void 0;return function(aH){var f,b$,bo,aB,ai,bR,bn,bf,aW,ah,aA,cQ,_,aZ,bB,a$,cN,ay,A,cL,bI,cS,cK,aD,ax,aU,aj,b_,bY,bb,v,r,Q,bh,e,K,j,an,ol,y,bT,bS,cz,br,bO,cy,cw,au,bl,az,cr,Z,o,F,cn,u,ac,ad,n,w,b,q,B,E,S,am,cd,h,k,aR,bt,T,d,ag,N,ap,cx,bJ,O,g,p,C,M,s,W,x,I,H,aa,D,t,aM,l,ak,al,av,$,i,aQ,aJ,bi,by,aK,aI,c,U,cf,cg,ch,nT,bK,bu,ck,cl,R,cm,aV,aP,bk,bC,cs,cu,aw,bL,bM,L,J,af,P,bP,aL,cI,bs;aH=aH||{},f=typeof aH!="undefined"?aH:{},f.ready=new Promise(function(a,b){b$=a,bo=b}),aB={};for(ai in f)f.hasOwnProperty(ai)&&(aB[ai]=f[ai]);bR=[],bn="./this.program",bf=function(b,a){throw a},aW=!1,ah=!1,aA=!1,cQ=!1,aW=typeof window=="object",ah=typeof importScripts=="function",aA=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",cQ=!aW&&!aA&&!ah,_="";function oE(a){return f.locateFile?f.locateFile(a,_):_+a}(aW||ah)&&(ah?_=self.location.href:typeof document!="undefined"&&document.currentScript&&(_=document.currentScript.src),a&&(_=a),_.indexOf("blob:")!==0?_=_.substr(0,_.lastIndexOf("/")+1):_="",aZ=function(b){var a=new XMLHttpRequest;return a.open("GET",b,!1),a.send(null),a.responseText},ah&&(a$=function(b){var a=new XMLHttpRequest;return a.open("GET",b,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)}),bB=function(c,d,b){var a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status==200||a.status==0&&a.response){d(a.response);return}b()},a.onerror=b,a.send(null)},cN=function(a){document.title=a}),ay=f.print||console.log.bind(console),A=f.printErr||console.warn.bind(console);for(ai in aB)aB.hasOwnProperty(ai)&&(f[ai]=aB[ai]);aB=null,f.arguments&&(bR=f.arguments),f.thisProgram&&(bn=f.thisProgram),f.quit&&(bf=f.quit),cL=16;function oD(b,a){return a||(a=cL),Math.ceil(b/a)*a}function aT(a){aT.shown||(aT.shown={}),aT.shown[a]||(aT.shown[a]=1,A(a))}bI=0,cS=function(a){bI=a},cK=function(){return bI},f.wasmBinary&&(aD=f.wasmBinary),ax=f.noExitRuntime||!1,typeof WebAssembly!="object"&&m("no native wasm support detected");function oC(a,b,c,d){switch(c=c||"i8",c.charAt(c.length-1)==="*"&&(c="i32"),c){case"i1":v[a>>0]=b;break;case"i8":v[a>>0]=b;break;case"i16":Q[a>>1]=b;break;case"i32":e[a>>2]=b;break;case"i64":F=[b>>>0,(o=b,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[a>>2]=F[0],e[a+4>>2]=F[1];break;case"float":j[a>>2]=b;break;case"double":an[a>>3]=b;break;default:m("invalid type for setValue: "+c)}}function oB(a,b,c){switch(b=b||"i8",b.charAt(b.length-1)==="*"&&(b="i32"),b){case"i1":return v[a>>0];case"i8":return v[a>>0];case"i16":return Q[a>>1];case"i32":return e[a>>2];case"i64":return e[a>>2];case"float":return j[a>>2];case"double":return an[a>>3];default:m("invalid type for getValue: "+b)}return null}aj=!1;function ae(a,b){a||m("Assertion failed: "+b)}function cH(a){var b=f["_"+a];return ae(b,"Cannot call unknown function "+a+", make sure it is exported"),b}function oA(l,f,k,b,m){var j={string:function(a){var b=0,c;return a!==null&&a!==void 0&&a!==0&&(c=(a.length<<2)+1,b=af(c),z(a,b,c)),b},array:function(a){var b=af(a.length);return cF(a,b),b}},i,d,c,a,g,e;function h(a){return f==="string"?G(a):f==="boolean"?Boolean(a):a}if(i=cH(l),d=[],c=0,b)for(a=0;a<b.length;a++)g=j[k[a]],g?(c===0&&(c=L()),d[a]=g(b[a])):d[a]=b[a];return e=i.apply(null,d),e=h(e),c!==0&&J(c),e}function oz(b,c,a,d){var e,f;return a=a||[],e=a.every(function(a){return a==="number"}),f=c!=="string",f&&e&&!d?cH(b):function(){return oA(b,c,a,arguments,d)}}bY=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function aE(c,b,i){for(var j=b+i,d=b,e,a,f,g,h;c[d]&&!(d>=j);)++d;if(d-b>16&&c.subarray&&bY)return bY.decode(c.subarray(b,d));for(e="";b<d;){if(a=c[b++],!(a&128)){e+=String.fromCharCode(a);continue}if(f=c[b++]&63,(a&224)==192){e+=String.fromCharCode((a&31)<<6|f);continue}g=c[b++]&63,(a&240)==224?a=(a&15)<<12|f<<6|g:a=(a&7)<<18|f<<12|g<<6|c[b++]&63,a<65536?e+=String.fromCharCode(a):(h=a-65536,e+=String.fromCharCode(55296|h>>10,56320|h&1023))}return e}function G(a,b){return a?aE(r,a,b):""}function aC(f,c,b,g){var h,e,d,a,i;if(!(g>0))return 0;h=b,e=b+g-1;for(d=0;d<f.length;++d)if(a=f.charCodeAt(d),a>=55296&&a<=57343&&(i=f.charCodeAt(++d),a=65536+((a&1023)<<10)|i&1023),a<=127){if(b>=e)break;c[b++]=a}else if(a<=2047){if(b+1>=e)break;c[b++]=192|a>>6,c[b++]=128|a&63}else if(a<=65535){if(b+2>=e)break;c[b++]=224|a>>12,c[b++]=128|a>>6&63,c[b++]=128|a&63}else{if(b+3>=e)break;c[b++]=240|a>>18,c[b++]=128|a>>12&63,c[b++]=128|a>>6&63,c[b++]=128|a&63}return c[b]=0,b-h}function z(a,b,c){return aC(a,r,b,c)}function ar(d){for(var b=0,c=0,a;c<d.length;++c)a=d.charCodeAt(c),a>=55296&&a<=57343&&(a=65536+((a&1023)<<10)|d.charCodeAt(++c)&1023),a<=127?++b:a<=2047?b+=2:a<=65535?b+=3:b+=4;return b}function bX(b){var c=ar(b)+1,a=R(c);return a&&aC(b,v,a,c),a}function cG(a){var b=ar(a)+1,c=af(b);return aC(a,v,c,b),c}function cF(a,b){v.set(a,b)}function cE(b,c,d){for(var a=0;a<b.length;++a)v[c++>>0]=b.charCodeAt(a);d||(v[c>>0]=0)}function om(a,b){return a%b>0&&(a+=b-a%b),a}function cB(a){bb=a,f.HEAP8=v=new Int8Array(a),f.HEAP16=Q=new Int16Array(a),f.HEAP32=e=new Int32Array(a),f.HEAPU8=r=new Uint8Array(a),f.HEAPU16=bh=new Uint16Array(a),f.HEAPU32=K=new Uint32Array(a),f.HEAPF32=j=new Float32Array(a),f.HEAPF64=an=new Float64Array(a)}ol=f.INITIAL_MEMORY||33554432,bT=[],bS=[],cz=[],br=[],bO=[],cy=!1,cw=!1,bS.push({func:function(){bK()}});function ok(){if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)oe(f.preRun.shift());aO(bT)}function oj(){cy=!0,!f.noFSInit&&!b.init.initialized&&b.init(),ad.init(),E.root=b.mount(E,{},null),aO(bS)}function oi(){b.ignorePermissions=!1,aO(cz)}function oh(){aO(br),b.quit(),ad.shutdown(),cw=!0}function og(){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;)od(f.postRun.shift());aO(bO)}function oe(a){bT.unshift(a)}function od(a){bO.unshift(a)}au=0,bl=null,az=null;function ct(a){return a}function bH(a){au++,f.monitorRunDependencies&&f.monitorRunDependencies(au)}function ba(b){if(au--,f.monitorRunDependencies&&f.monitorRunDependencies(au),au==0)if(bl!==null&&(clearInterval(bl),bl=null),az){var a=az;az=null,a()}}f.preloadedImages={},f.preloadedAudios={};function m(a){f.onAbort&&f.onAbort(a),a+="",A(a),aj=!0,b_=1,a="abort("+a+"). Build with -s ASSERTIONS=1 for more info.";var b=new WebAssembly.RuntimeError(a);throw bo(b),b}function oc(a,b){return String.prototype.startsWith?a.startsWith(b):a.indexOf(b)===0}cr="data:application/octet-stream;base64,";function cq(a){return oc(a,cr)}Z="godot.javascript.opt.wasm",cq(Z)||(Z=oE(Z));function co(a){try{if(a==Z&&aD)return new Uint8Array(aD);if(a$)return a$(a);throw"both async and sync fetching of the wasm failed"}catch(a){m(a)}}function ob(){if(!aD&&(aW||ah))if(typeof fetch=="function")return fetch(Z,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+Z+"'";return a.arrayBuffer()}).catch(function(){return co(Z)});return Promise.resolve().then(function(){return co(Z)})}function oa(){var a={a:ch},g;function c(a,c){var b=a.exports;f.asm=b,aU=f.asm.Yj,cB(aU.buffer),y=f.asm.qk,ba("wasm-instantiate")}bH("wasm-instantiate");function b(a){c(a.instance)}function d(b){return ob().then(function(b){return WebAssembly.instantiate(b,a)}).then(b,function(a){A("failed to asynchronously prepare wasm: "+a),m(a)})}function e(){return!aD&&typeof WebAssembly.instantiateStreaming=="function"&&!cq(Z)&&typeof fetch=="function"?fetch(Z,{credentials:"same-origin"}).then(function(c){var e=WebAssembly.instantiateStreaming(c,a);return e.then(b,function(a){return A("wasm streaming compile failed: "+a),A("falling back to ArrayBuffer instantiation"),d(b)})}):d(b)}if(f.instantiateWasm)try{return g=f.instantiateWasm(a,c),g}catch(a){return A("Module.instantiateWasm callback failed with error: "+a),!1}return e().catch(bo),{}}cn={1695860:function(a,b,d,e){c.getBufferSubData(a,b,r,d,e)}};function aO(c){for(var a,b;c.length>0;){if(a=c.shift(),typeof a=="function"){a(f);continue}b=a.func,typeof b=="number"?a.arg===void 0?y.get(b)():y.get(b)(a.arg):b(a.arg===void 0?null:a.arg)}}function n$(a,b){br.unshift({func:a,arg:b})}function n_(a,b){return n$(a,b)}u={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,e){for(var c=0,b=a.length-1,d;b>=0;b--)d=a[b],d==="."?a.splice(b,1):d===".."?(a.splice(b,1),c++):c&&(a.splice(b,1),c--);if(e)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";return a=u.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/"),!a&&!b&&(a="."),a&&c&&(a+="/"),(b?"/":"")+a},dirname:function(d){var b=u.splitPath(d),c=b[0],a=b[1];return!c&&!a?".":(a&&(a=a.substr(0,a.length-1)),c+a)},basename:function(a){if(a==="/")return"/";a=u.normalize(a),a=a.replace(/\/$/,"");var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return u.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return u.normalize(a.join("/"))},join2:function(a,b){return u.normalize(a+"/"+b)}};function nZ(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var a=new Uint8Array(1);return function(){return crypto.getRandomValues(a),a[0]}}return function(){m("randomDevice")}}ac={resolve:function(){for(var a="",c=!1,d=arguments.length-1,e;d>=-1&&!c;d--){if(e=d>=0?arguments[d]:b.cwd(),typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";a=e+"/"+a,c=e.charAt(0)==="/"}return a=u.normalizeArray(a.split("/").filter(function(a){return!!a}),!c).join("/"),(c?"/":"")+a||"."},relative:function(g,h){var d,e,f,c,a,b;g=ac.resolve(g).substr(1),h=ac.resolve(h).substr(1);function i(b){for(var a=0,c;a<b.length;a++)if(b[a]!=="")break;for(c=b.length-1;c>=0;c--)if(b[c]!=="")break;return a>c?[]:b.slice(a,c-a+1)}d=i(g.split("/")),e=i(h.split("/")),f=Math.min(d.length,e.length),c=f;for(a=0;a<f;a++)if(d[a]!==e[a]){c=a;break}b=[];for(a=c;a<d.length;a++)b.push("..");return b=b.concat(e.slice(c)),b.join("/")}},ad={ttys:[],init:function(){},shutdown:function(){},register:function(a,c){ad.ttys[a]={input:[],output:[],ops:c},b.registerDevice(a,ad.stream_ops)},stream_ops:{open:function(a){var c=ad.ttys[a.node.rdev];if(!c)throw new b.ErrnoError(43);a.tty=c,a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(c,h,f,g,i){var d,e,a;if(!c.tty||!c.tty.ops.get_char)throw new b.ErrnoError(60);d=0;for(e=0;e<g;e++){try{a=c.tty.ops.get_char(c.tty)}catch(a){throw new b.ErrnoError(29)}if(a===void 0&&d===0)throw new b.ErrnoError(6);if(a===null||a===void 0)break;d++,h[f+e]=a}return d&&(c.node.timestamp=Date.now()),d},write:function(a,e,f,d,g){if(!a.tty||!a.tty.ops.put_char)throw new b.ErrnoError(60);try{for(var c=0;c<d;c++)a.tty.ops.put_char(a.tty,e[f+c])}catch(a){throw new b.ErrnoError(29)}return d&&(a.node.timestamp=Date.now()),c}},default_tty_ops:{get_char:function(b){if(!b.input.length){var a=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(a=window.prompt("Input: "),a!==null&&(a+="\n")):typeof readline=="function"&&(a=readline(),a!==null&&(a+="\n")),!a)return null;b.input=bj(a,!0)}return b.input.shift()},put_char:function(b,a){a===null||a===10?(ay(aE(b.output,0)),b.output=[]):a!=0&&b.output.push(a)},flush:function(a){a.output&&a.output.length>0&&(ay(aE(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(b,a){a===null||a===10?(A(aE(b.output,0)),b.output=[]):a!=0&&b.output.push(a)},flush:function(a){a.output&&a.output.length>0&&(A(aE(a.output,0)),a.output=[])}}};function nY(a){for(var b=oD(a,16384),c=R(b);a<b;)v[c+a++]=0;return c}n={ops_table:null,mount:function(a){return n.createNode(null,"/",16384|511,0)},createNode:function(c,e,d,f){if(b.isBlkdev(d)||b.isFIFO(d))throw new b.ErrnoError(63);n.ops_table||(n.ops_table={dir:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr,lookup:n.node_ops.lookup,mknod:n.node_ops.mknod,rename:n.node_ops.rename,unlink:n.node_ops.unlink,rmdir:n.node_ops.rmdir,readdir:n.node_ops.readdir,symlink:n.node_ops.symlink},stream:{llseek:n.stream_ops.llseek}},file:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr},stream:{llseek:n.stream_ops.llseek,read:n.stream_ops.read,write:n.stream_ops.write,allocate:n.stream_ops.allocate,mmap:n.stream_ops.mmap,msync:n.stream_ops.msync}},link:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr,readlink:n.node_ops.readlink},stream:{}},chrdev:{node:{getattr:n.node_ops.getattr,setattr:n.node_ops.setattr},stream:b.chrdev_stream_ops}});var a=b.createNode(c,e,d,f);return b.isDir(a.mode)?(a.node_ops=n.ops_table.dir.node,a.stream_ops=n.ops_table.dir.stream,a.contents={}):b.isFile(a.mode)?(a.node_ops=n.ops_table.file.node,a.stream_ops=n.ops_table.file.stream,a.usedBytes=0,a.contents=null):b.isLink(a.mode)?(a.node_ops=n.ops_table.link.node,a.stream_ops=n.ops_table.link.stream):b.isChrdev(a.mode)&&(a.node_ops=n.ops_table.chrdev.node,a.stream_ops=n.ops_table.chrdev.stream),a.timestamp=Date.now(),c&&(c.contents[e]=a,c.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(a){return a.contents?a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents):new Uint8Array(0)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0,d,e;if(c>=b)return;d=1024*1024,b=Math.max(b,c*(c<d?2:1.125)>>>0),c!=0&&(b=Math.max(b,256)),e=a.contents,a.contents=new Uint8Array(b),a.usedBytes>0&&a.contents.set(e.subarray(0,a.usedBytes),0)},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0)a.contents=null,a.usedBytes=0;else{var c=a.contents;a.contents=new Uint8Array(b),c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes))),a.usedBytes=b}},node_ops:{getattr:function(c){var a={};return a.dev=b.isChrdev(c.mode)?c.id:1,a.ino=c.id,a.mode=c.mode,a.nlink=1,a.uid=0,a.gid=0,a.rdev=c.rdev,b.isDir(c.mode)?a.size=4096:b.isFile(c.mode)?a.size=c.usedBytes:b.isLink(c.mode)?a.size=c.link.length:a.size=0,a.atime=new Date(c.timestamp),a.mtime=new Date(c.timestamp),a.ctime=new Date(c.timestamp),a.blksize=4096,a.blocks=Math.ceil(a.size/a.blksize),a},setattr:function(b,a){a.mode!==void 0&&(b.mode=a.mode),a.timestamp!==void 0&&(b.timestamp=a.timestamp),a.size!==void 0&&n.resizeFileStorage(b,a.size)},lookup:function(a,c){throw b.genericErrors[44]},mknod:function(a,b,c,d){return n.createNode(a,b,c,d)},rename:function(a,c,e){var d,f;if(b.isDir(a.mode)){try{d=b.lookupNode(c,e)}catch(a){}if(d)for(f in d.contents)throw new b.ErrnoError(55)}delete a.parent.contents[a.name],a.parent.timestamp=Date.now(),a.name=e,c.contents[e]=a,c.timestamp=a.parent.timestamp,a.parent=c},unlink:function(a,b){delete a.contents[b],a.timestamp=Date.now()},rmdir:function(a,c){var d=b.lookupNode(a,c),e;for(e in d.contents)throw new b.ErrnoError(55);delete a.contents[c],a.timestamp=Date.now()},readdir:function(a){var b=[".",".."],c;for(c in a.contents){if(!a.contents.hasOwnProperty(c))continue;b.push(c)}return b},symlink:function(b,c,d){var a=n.createNode(b,c,511|40960,0);return a.link=d,a},readlink:function(a){if(!b.isLink(a.mode))throw new b.ErrnoError(28);return a.link}},stream_ops:{read:function(e,g,f,h,a){var d=e.node.contents,b,c;if(a>=e.node.usedBytes)return 0;if(b=Math.min(e.node.usedBytes-a,h),b>8&&d.subarray)g.set(d.subarray(a,a+b),f);else for(c=0;c<b;c++)g[f+c]=d[a+c];return b},write:function(h,d,c,b,e,g){var a,f;if(d.buffer===v.buffer&&(g=!1),!b)return 0;if(a=h.node,a.timestamp=Date.now(),d.subarray&&(!a.contents||a.contents.subarray)){if(g)return a.contents=d.subarray(c,c+b),a.usedBytes=b,b;if(a.usedBytes===0&&e===0)return a.contents=d.slice(c,c+b),a.usedBytes=b,b;if(e+b<=a.usedBytes)return a.contents.set(d.subarray(c,c+b),e),b}if(n.expandFileStorage(a,e+b),a.contents.subarray&&d.subarray)a.contents.set(d.subarray(c,c+b),e);else for(f=0;f<b;f++)a.contents[e+f]=d[c+f];return a.usedBytes=Math.max(a.usedBytes,e+b),b},llseek:function(c,e,d){var a=e;if(d===1?a+=c.position:d===2&&b.isFile(c.node.mode)&&(a+=c.node.usedBytes),a<0)throw new b.ErrnoError(28);return a},allocate:function(a,b,c){n.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(g,i,f,d,j,h){var c,e,a;if(i!==0)throw new b.ErrnoError(28);if(!b.isFile(g.node.mode))throw new b.ErrnoError(43);if(a=g.node.contents,!(h&2)&&a.buffer===bb)e=!1,c=a.byteOffset;else{if((d>0||d+f<a.length)&&(a.subarray?a=a.subarray(d,d+f):a=Array.prototype.slice.call(a,d,d+f)),e=!0,c=nY(f),!c)throw new b.ErrnoError(48);v.set(a,c)}return{ptr:c,allocated:e}},msync:function(a,c,d,e,f){if(!b.isFile(a.node.mode))throw new b.ErrnoError(43);if(f&2)return 0;var g=n.stream_ops.write(a,c,0,e,d,!1);return 0}}},w={dbs:{},indexedDB:function(){if(typeof indexedDB!="undefined")return indexedDB;var a=null;return typeof window=="object"&&(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),ae(a,"IDBFS used, but indexedDB not supported"),a},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(a){return n.mount.apply(null,arguments)},syncfs:function(b,c,a){w.getLocalSet(b,function(d,e){if(d)return a(d);w.getRemoteSet(b,function(b,d){var f,g;if(b)return a(b);f=c?d:e,g=c?e:d,w.reconcile(f,g,a)})})},getDB:function(d,b){var c=w.dbs[d],a;if(c)return b(null,c);try{a=w.indexedDB().open(d,w.DB_VERSION)}catch(a){return b(a)}if(!a)return b("Unable to connect to IndexedDB");a.onupgradeneeded=function(b){var c=b.target.result,d=b.target.transaction,a;c.objectStoreNames.contains(w.DB_STORE_NAME)?a=d.objectStore(w.DB_STORE_NAME):a=c.createObjectStore(w.DB_STORE_NAME),a.indexNames.contains("timestamp")||a.createIndex("timestamp","timestamp",{unique:!1})},a.onsuccess=function(){c=a.result,w.dbs[d]=c,b(null,c)},a.onerror=function(a){b(this.error),a.preventDefault()}},getLocalSet:function(h,i){var e={},c,a,d;function f(a){return a!=="."&&a!==".."}function g(a){return function(b){return u.join2(a,b)}}for(c=b.readdir(h.mountpoint).filter(f).map(g(h.mountpoint));c.length;){a=c.pop();try{d=b.stat(a)}catch(a){return i(a)}b.isDir(d.mode)&&c.push.apply(c,b.readdir(a).filter(f).map(g(a))),e[a]={timestamp:d.mtime}}return i(null,{type:"local",entries:e})},getRemoteSet:function(c,a){var b={};w.getDB(c.mountpoint,function(d,e){var c,f,g;if(d)return a(d);try{c=e.transaction([w.DB_STORE_NAME],"readonly"),c.onerror=function(b){a(this.error),b.preventDefault()},f=c.objectStore(w.DB_STORE_NAME),g=f.index("timestamp"),g.openKeyCursor().onsuccess=function(d){var c=d.target.result;if(!c)return a(null,{type:"remote",db:e,entries:b});b[c.primaryKey]={timestamp:c.key},c.continue()}}catch(b){return a(b)}})},loadLocalEntry:function(e,c){var a,d,f;try{f=b.lookupPath(e),d=f.node,a=b.stat(e)}catch(a){return c(a)}return b.isDir(a.mode)?c(null,{timestamp:a.mtime,mode:a.mode}):b.isFile(a.mode)?(d.contents=n.getFileDataAsTypedArray(d),c(null,{timestamp:a.mtime,mode:a.mode,contents:d.contents})):c(new Error("node type not supported"))},storeLocalEntry:function(c,a,d){try{if(b.isDir(a.mode))b.mkdirTree(c,a.mode);else if(b.isFile(a.mode))b.writeFile(c,a.contents,{canOwn:!0});else return d(new Error("node type not supported"));b.chmod(c,a.mode),b.utime(c,a.timestamp,a.timestamp)}catch(a){return d(a)}d(null)},removeLocalEntry:function(a,d){var e,c;try{e=b.lookupPath(a),c=b.stat(a),b.isDir(c.mode)?b.rmdir(a):b.isFile(c.mode)&&b.unlink(a)}catch(a){return d(a)}d(null)},loadRemoteEntry:function(c,d,a){var b=c.get(d);b.onsuccess=function(b){a(null,b.target.result)},b.onerror=function(b){a(this.error),b.preventDefault()}},storeRemoteEntry:function(c,d,e,a){var b=c.put(e,d);b.onsuccess=function(){a(null)},b.onerror=function(b){a(this.error),b.preventDefault()}},removeRemoteEntry:function(c,d,a){var b=c.delete(d);b.onsuccess=function(){a(null)},b.onerror=function(b){a(this.error),b.preventDefault()}},reconcile:function(c,b,d){var e=0,j=[],i,f,k,g,h;if(Object.keys(c.entries).forEach(function(a){var f=c.entries[a],d=b.entries[a];(!d||f.timestamp.getTime()!=d.timestamp.getTime())&&(j.push(a),e++)}),i=[],Object.keys(b.entries).forEach(function(a){var f=b.entries[a],d=c.entries[a];d||(i.push(a),e++)}),!e)return d(null);f=!1,k=c.type==="remote"?c.db:b.db,g=k.transaction([w.DB_STORE_NAME],"readwrite"),h=g.objectStore(w.DB_STORE_NAME);function a(a){if(a&&!f)return f=!0,d(a)}g.onerror=function(b){a(this.error),b.preventDefault()},g.oncomplete=function(a){f||d(null)},j.sort().forEach(function(c){b.type==="local"?w.loadRemoteEntry(h,c,function(b,d){if(b)return a(b);w.storeLocalEntry(c,d,a)}):w.loadLocalEntry(c,function(b,d){if(b)return a(b);w.storeRemoteEntry(h,c,d,a)})}),i.sort().reverse().forEach(function(c){b.type==="local"?w.removeLocalEntry(c,a):w.removeRemoteEntry(h,c,a)})}},b={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(i,a){var j,h,g,c,d,e,f,k,l,m;if(i=ac.resolve(b.cwd(),i),a=a||{},!i)return{path:"",node:null};j={follow_mount:!0,recurse_count:0};for(h in j)a[h]===void 0&&(a[h]=j[h]);if(a.recurse_count>8)throw new b.ErrnoError(32);g=u.normalizeArray(i.split("/").filter(function(a){return!!a}),!1),c=b.root,d="/";for(e=0;e<g.length;e++){if(f=e===g.length-1,f&&a.parent)break;if(c=b.lookupNode(c,g[e]),d=u.join2(d,g[e]),b.isMountpoint(c)&&(!f||f&&a.follow_mount)&&(c=c.mounted.root),!f||a.follow)for(k=0;b.isLink(c.mode);)if(l=b.readlink(d),d=ac.resolve(u.dirname(d),l),m=b.lookupPath(d,{recurse_count:a.recurse_count}),c=m.node,k++>40)throw new b.ErrnoError(32)}return{path:d,node:c}},getPath:function(a){for(var c,d;!0;){if(b.isRoot(a))return d=a.mount.mountpoint,!c?d:d[d.length-1]!=="/"?d+"/"+c:d+c;c=c?a.name+"/"+c:a.name,a=a.parent}},hashName:function(e,d){for(var a=0,c=0;c<d.length;c++)a=(a<<5)-a+d.charCodeAt(c)|0;return(e+a>>>0)%b.nameTable.length},hashAddNode:function(a){var c=b.hashName(a.parent.id,a.name);a.name_next=b.nameTable[c],b.nameTable[c]=a},hashRemoveNode:function(a){var d=b.hashName(a.parent.id,a.name),c;if(b.nameTable[d]===a)b.nameTable[d]=a.name_next;else for(c=b.nameTable[d];c;){if(c.name_next===a){c.name_next=a.name_next;break}c=c.name_next}},lookupNode:function(c,d){var e=b.mayLookup(c),f,a,g;if(e)throw new b.ErrnoError(e,c);f=b.hashName(c.id,d);for(a=b.nameTable[f];a;a=a.name_next)if(g=a.name,a.parent.id===c.id&&g===d)return a;return b.lookup(c,d)},createNode:function(c,d,e,f){var a=new b.FSNode(c,d,e,f);return b.hashAddNode(a),a},destroyNode:function(a){b.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(a){var c=b.flagModes[a];if(typeof c=="undefined")throw new Error("Unknown file open mode: "+a);return c},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];return a&512&&(b+="w"),b},nodePermissions:function(a,c){return b.ignorePermissions?0:c.indexOf("r")!==-1&&!(a.mode&292)?2:c.indexOf("w")!==-1&&!(a.mode&146)?2:c.indexOf("x")!==-1&&!(a.mode&73)?2:0},mayLookup:function(a){var c=b.nodePermissions(a,"x");return c?c:a.node_ops.lookup?0:2},mayCreate:function(a,c){try{var d=b.lookupNode(a,c);return 20}catch(a){}return b.nodePermissions(a,"wx")},mayDelete:function(c,e,f){var a,d;try{a=b.lookupNode(c,e)}catch(a){return a.errno}if(d=b.nodePermissions(c,"wx"),d)return d;if(f){{if(!b.isDir(a.mode))return 54;if(b.isRoot(a)||b.getPath(a)===b.cwd())return 10}}else if(b.isDir(a.mode))return 31;return 0},mayOpen:function(a,c){if(!a)return 44;if(b.isLink(a.mode))return 32;if(b.isDir(a.mode))if(b.flagsToPermissionString(c)!=="r"||c&512)return 31;return b.nodePermissions(a,b.flagsToPermissionString(c))},MAX_OPEN_FDS:4096,nextfd:function(c,d){c=c||0,d=d||b.MAX_OPEN_FDS;for(var a=c;a<=d;a++)if(!b.streams[a])return a;throw new b.ErrnoError(33)},getStream:function(a){return b.streams[a]},createStream:function(a,f,g){var c,d,e;b.FSStream||(b.FSStream=function(){},b.FSStream.prototype={object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}),c=new b.FSStream;for(d in a)c[d]=a[d];return a=c,e=b.nextfd(f,g),a.fd=e,b.streams[e]=a,a},closeStream:function(a){b.streams[a]=null},chrdev_stream_ops:{open:function(a){var c=b.getDevice(a.node.rdev);a.stream_ops=c.stream_ops,a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new b.ErrnoError(70)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,c){b.devices[a]={stream_ops:c}},getDevice:function(a){return b.devices[a]},getMounts:function(d){for(var b=[],a=[d],c;a.length;)c=a.pop(),b.push(c),a.push.apply(a,c.mounts);return b},syncfs:function(a,e){var d,f;typeof a=="function"&&(e=a,a=!1),b.syncFSRequests++,b.syncFSRequests>1&&A("warning: "+b.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work"),d=b.getMounts(b.root.mount),f=0;function g(a){return b.syncFSRequests--,e(a)}function c(a){if(a){if(!c.errored)return c.errored=!0,g(a);return}++f>=d.length&&g(null)}d.forEach(function(b){if(!b.type.syncfs)return c(null);b.type.syncfs(b,a,c)})},mount:function(g,j,d){var f=d==="/",i=!d,a,h,c,e;if(f&&b.root)throw new b.ErrnoError(10);if(!f&&!i){if(h=b.lookupPath(d,{follow_mount:!1}),d=h.path,a=h.node,b.isMountpoint(a))throw new b.ErrnoError(10);if(!b.isDir(a.mode))throw new b.ErrnoError(54)}return c={type:g,opts:j,mountpoint:d,mounts:[]},e=g.mount(c),e.mount=c,c.root=e,f?b.root=e:a&&(a.mounted=c,a.mount&&a.mount.mounts.push(c)),e},unmount:function(e){var c=b.lookupPath(e,{follow_mount:!1}),a,d,f,g;if(!b.isMountpoint(c.node))throw new b.ErrnoError(28);a=c.node,d=a.mounted,f=b.getMounts(d),Object.keys(b.nameTable).forEach(function(c){for(var a=b.nameTable[c],d;a;)d=a.name_next,f.indexOf(a.mount)!==-1&&b.destroyNode(a),a=d}),a.mounted=null,g=a.mount.mounts.indexOf(d),a.mount.mounts.splice(g,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(d,f,g){var h=b.lookupPath(d,{parent:!0}),c=h.node,a=u.basename(d),e;if(!a||a==="."||a==="..")throw new b.ErrnoError(28);if(e=b.mayCreate(c,a),e)throw new b.ErrnoError(e);if(!c.node_ops.mknod)throw new b.ErrnoError(63);return c.node_ops.mknod(c,a,f,g)},create:function(c,a){return a=a!==void 0?a:438,a&=4095,a|=32768,b.mknod(c,a,0)},mkdir:function(c,a){return a=a!==void 0?a:511,a&=511|512,a|=16384,b.mknod(c,a,0)},mkdirTree:function(e,f){for(var c=e.split("/"),d="",a=0;a<c.length;++a){if(!c[a])continue;d+="/"+c[a];try{b.mkdir(d,f)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(d,a,c){return typeof c=="undefined"&&(c=a,a=438),a|=8192,b.mknod(d,a,c)},symlink:function(e,f){var g,a,c,d;if(!ac.resolve(e))throw new b.ErrnoError(44);if(g=b.lookupPath(f,{parent:!0}),a=g.node,!a)throw new b.ErrnoError(44);if(c=u.basename(f),d=b.mayCreate(a,c),d)throw new b.ErrnoError(d);if(!a.node_ops.symlink)throw new b.ErrnoError(63);return a.node_ops.symlink(a,c,e)},rename:function(e,c){var n=u.dirname(e),o=u.dirname(c),l=u.basename(e),j=u.basename(c),i=b.lookupPath(e,{parent:!0}),a=i.node,d,g,k,h,m,f;if(i=b.lookupPath(c,{parent:!0}),d=i.node,!a||!d)throw new b.ErrnoError(44);if(a.mount!==d.mount)throw new b.ErrnoError(75);if(g=b.lookupNode(a,l),k=ac.relative(e,o),k.charAt(0)!==".")throw new b.ErrnoError(28);if(k=ac.relative(c,n),k.charAt(0)!==".")throw new b.ErrnoError(55);try{h=b.lookupNode(d,j)}catch(a){}if(g===h)return;if(m=b.isDir(g.mode),f=b.mayDelete(a,l,m),f)throw new b.ErrnoError(f);if(f=h?b.mayDelete(d,j,m):b.mayCreate(d,j),f)throw new b.ErrnoError(f);if(!a.node_ops.rename)throw new b.ErrnoError(63);if(b.isMountpoint(g)||h&&b.isMountpoint(h))throw new b.ErrnoError(10);if(d!==a)if(f=b.nodePermissions(a,"w"),f)throw new b.ErrnoError(f);try{b.trackingDelegate.willMovePath&&b.trackingDelegate.willMovePath(e,c)}catch(a){A("FS.trackingDelegate['willMovePath']('"+e+"', '"+c+"') threw an exception: "+a.message)}b.hashRemoveNode(g);try{a.node_ops.rename(g,d,j)}catch(a){throw a}finally{b.hashAddNode(g)}try{b.trackingDelegate.onMovePath&&b.trackingDelegate.onMovePath(e,c)}catch(a){A("FS.trackingDelegate['onMovePath']('"+e+"', '"+c+"') threw an exception: "+a.message)}},rmdir:function(a){var g=b.lookupPath(a,{parent:!0}),c=g.node,d=u.basename(a),e=b.lookupNode(c,d),f=b.mayDelete(c,d,!0);if(f)throw new b.ErrnoError(f);if(!c.node_ops.rmdir)throw new b.ErrnoError(63);if(b.isMountpoint(e))throw new b.ErrnoError(10);try{b.trackingDelegate.willDeletePath&&b.trackingDelegate.willDeletePath(a)}catch(b){A("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+b.message)}c.node_ops.rmdir(c,d),b.destroyNode(e);try{b.trackingDelegate.onDeletePath&&b.trackingDelegate.onDeletePath(a)}catch(b){A("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+b.message)}},readdir:function(c){var d=b.lookupPath(c,{follow:!0}),a=d.node;if(!a.node_ops.readdir)throw new b.ErrnoError(54);return a.node_ops.readdir(a)},unlink:function(a){var g=b.lookupPath(a,{parent:!0}),c=g.node,d=u.basename(a),e=b.lookupNode(c,d),f=b.mayDelete(c,d,!1);if(f)throw new b.ErrnoError(f);if(!c.node_ops.unlink)throw new b.ErrnoError(63);if(b.isMountpoint(e))throw new b.ErrnoError(10);try{b.trackingDelegate.willDeletePath&&b.trackingDelegate.willDeletePath(a)}catch(b){A("FS.trackingDelegate['willDeletePath']('"+a+"') threw an exception: "+b.message)}c.node_ops.unlink(c,d),b.destroyNode(e);try{b.trackingDelegate.onDeletePath&&b.trackingDelegate.onDeletePath(a)}catch(b){A("FS.trackingDelegate['onDeletePath']('"+a+"') threw an exception: "+b.message)}},readlink:function(c){var d=b.lookupPath(c),a=d.node;if(!a)throw new b.ErrnoError(44);if(!a.node_ops.readlink)throw new b.ErrnoError(28);return ac.resolve(b.getPath(a.parent),a.node_ops.readlink(a))},stat:function(c,d){var e=b.lookupPath(c,{follow:!d}),a=e.node;if(!a)throw new b.ErrnoError(44);if(!a.node_ops.getattr)throw new b.ErrnoError(63);return a.node_ops.getattr(a)},lstat:function(a){return b.stat(a,!0)},chmod:function(c,d,e){var a,f;if(typeof c=="string"?(f=b.lookupPath(c,{follow:!e}),a=f.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);a.node_ops.setattr(a,{mode:d&4095|a.mode&~4095,timestamp:Date.now()})},lchmod:function(a,c){b.chmod(a,c,!0)},fchmod:function(c,d){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);b.chmod(a.node,d)},chown:function(c,f,g,d){var a,e;if(typeof c=="string"?(e=b.lookupPath(c,{follow:!d}),a=e.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(a,c,d){b.chown(a,c,d,!0)},fchown:function(c,d,e){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);b.chown(a.node,d,e)},truncate:function(c,e){var a,f,d;if(e<0)throw new b.ErrnoError(28);if(typeof c=="string"?(f=b.lookupPath(c,{follow:!0}),a=f.node):a=c,!a.node_ops.setattr)throw new b.ErrnoError(63);if(b.isDir(a.mode))throw new b.ErrnoError(31);if(!b.isFile(a.mode))throw new b.ErrnoError(28);if(d=b.nodePermissions(a,"w"),d)throw new b.ErrnoError(d);a.node_ops.setattr(a,{size:e,timestamp:Date.now()})},ftruncate:function(c,d){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);if((a.flags&2097155)===0)throw new b.ErrnoError(28);b.truncate(a.node,d)},utime:function(c,d,e){var f=b.lookupPath(c,{follow:!0}),a=f.node;a.node_ops.setattr(a,{timestamp:Math.max(d,e)})},open:function(d,a,e,l,m){var c,k,i,j,g,h;if(d==="")throw new b.ErrnoError(44);if(a=typeof a=="string"?b.modeStringToFlags(a):a,e=typeof e=="undefined"?438:e,a&64?e=e&4095|32768:e=0,typeof d=="object")c=d;else{d=u.normalize(d);try{k=b.lookupPath(d,{follow:!(a&131072)}),c=k.node}catch(a){}}if(i=!1,a&64)if(c){if(a&128)throw new b.ErrnoError(20)}else c=b.mknod(d,e,0),i=!0;if(!c)throw new b.ErrnoError(44);if(b.isChrdev(c.mode)&&(a&=~512),a&65536&&!b.isDir(c.mode))throw new b.ErrnoError(54);if(!i)if(j=b.mayOpen(c,a),j)throw new b.ErrnoError(j);a&512&&b.truncate(c,0),a&=~(128|512|131072),g=b.createStream({node:c,path:b.getPath(c),flags:a,seekable:!0,position:0,stream_ops:c.stream_ops,ungotten:[],error:!1},l,m),g.stream_ops.open&&g.stream_ops.open(g),f.logReadFiles&&!(a&1)&&(b.readFiles||(b.readFiles={}),d in b.readFiles||(b.readFiles[d]=1,A("FS.trackingDelegate error on read file: "+d)));try{b.trackingDelegate.onOpenFile&&(h=0,(a&2097155)!==1&&(h|=b.tracking.openFlags.READ),(a&2097155)!==0&&(h|=b.tracking.openFlags.WRITE),b.trackingDelegate.onOpenFile(d,h))}catch(a){A("FS.trackingDelegate['onOpenFile']('"+d+"', flags) threw an exception: "+a.message)}return g},close:function(a){if(b.isClosed(a))throw new b.ErrnoError(8);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{b.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,d,c){if(b.isClosed(a))throw new b.ErrnoError(8);if(!a.seekable||!a.stream_ops.llseek)throw new b.ErrnoError(70);if(c!=0&&c!=1&&c!=2)throw new b.ErrnoError(28);return a.position=a.stream_ops.llseek(a,d,c),a.ungotten=[],a.position},read:function(a,g,h,f,c){var d,e;if(f<0||c<0)throw new b.ErrnoError(28);if(b.isClosed(a))throw new b.ErrnoError(8);if((a.flags&2097155)===1)throw new b.ErrnoError(8);if(b.isDir(a.node.mode))throw new b.ErrnoError(31);if(!a.stream_ops.read)throw new b.ErrnoError(28);if(d=typeof c!="undefined",d){if(!a.seekable)throw new b.ErrnoError(70)}else c=a.position;return e=a.stream_ops.read(a,g,h,f,c),d||(a.position+=e),e},write:function(a,i,g,f,c,h){var e,d;if(f<0||c<0)throw new b.ErrnoError(28);if(b.isClosed(a))throw new b.ErrnoError(8);if((a.flags&2097155)===0)throw new b.ErrnoError(8);if(b.isDir(a.node.mode))throw new b.ErrnoError(31);if(!a.stream_ops.write)throw new b.ErrnoError(28);if(a.seekable&&a.flags&1024&&b.llseek(a,0,2),e=typeof c!="undefined",e){if(!a.seekable)throw new b.ErrnoError(70)}else c=a.position;d=a.stream_ops.write(a,i,g,f,c,h),e||(a.position+=d);try{a.path&&b.trackingDelegate.onWriteToFile&&b.trackingDelegate.onWriteToFile(a.path)}catch(b){A("FS.trackingDelegate['onWriteToFile']('"+a.path+"') threw an exception: "+b.message)}return d},allocate:function(a,c,d){if(b.isClosed(a))throw new b.ErrnoError(8);if(c<0||d<=0)throw new b.ErrnoError(28);if((a.flags&2097155)===0)throw new b.ErrnoError(8);if(!b.isFile(a.node.mode)&&!b.isDir(a.node.mode))throw new b.ErrnoError(43);if(!a.stream_ops.allocate)throw new b.ErrnoError(138);a.stream_ops.allocate(a,c,d)},mmap:function(a,e,f,g,c,d){if((c&2)!==0&&(d&2)===0&&(a.flags&2097155)!==2)throw new b.ErrnoError(2);if((a.flags&2097155)===1)throw new b.ErrnoError(2);if(!a.stream_ops.mmap)throw new b.ErrnoError(43);return a.stream_ops.mmap(a,e,f,g,c,d)},msync:function(a,b,c,d,e){return!a||!a.stream_ops.msync?0:a.stream_ops.msync(a,b,c,d,e)},munmap:function(a){return 0},ioctl:function(a,c,d){if(!a.stream_ops.ioctl)throw new b.ErrnoError(59);return a.stream_ops.ioctl(a,c,d)},readFile:function(h,a){var d,e,g,f,c;if(a=a||{},a.flags=a.flags||0,a.encoding=a.encoding||"binary",a.encoding!=="utf8"&&a.encoding!=="binary")throw new Error('Invalid encoding type "'+a.encoding+'"');return e=b.open(h,a.flags),g=b.stat(h),f=g.size,c=new Uint8Array(f),b.read(e,c,0,f,0),a.encoding==="utf8"?d=aE(c,0):a.encoding==="binary"&&(d=c),b.close(e),d},writeFile:function(g,c,a){var d,e,f;if(a=a||{},a.flags=a.flags||577,d=b.open(g,a.flags,a.mode),typeof c=="string")e=new Uint8Array(ar(c)+1),f=aC(c,e,0,e.length),b.write(d,e,0,f,void 0,a.canOwn);else if(ArrayBuffer.isView(c))b.write(d,c,0,c.byteLength,void 0,a.canOwn);else throw new Error("Unsupported data type");b.close(d)},cwd:function(){return b.currentPath},chdir:function(d){var a=b.lookupPath(d,{follow:!0}),c;if(a.node===null)throw new b.ErrnoError(44);if(!b.isDir(a.node.mode))throw new b.ErrnoError(54);if(c=b.nodePermissions(a.node,"x"),c)throw new b.ErrnoError(c);b.currentPath=a.path},createDefaultDirectories:function(){b.mkdir("/tmp"),b.mkdir("/home"),b.mkdir("/home/web_user")},createDefaultDevices:function(){b.mkdir("/dev"),b.registerDevice(b.makedev(1,3),{read:function(){return 0},write:function(b,c,d,a,e){return a}}),b.mkdev("/dev/null",b.makedev(1,3)),ad.register(b.makedev(5,0),ad.default_tty_ops),ad.register(b.makedev(6,0),ad.default_tty1_ops),b.mkdev("/dev/tty",b.makedev(5,0)),b.mkdev("/dev/tty1",b.makedev(6,0));var a=nZ();b.createDevice("/dev","random",a),b.createDevice("/dev","urandom",a),b.mkdir("/dev/shm"),b.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){b.mkdir("/proc");var a=b.mkdir("/proc/self");b.mkdir("/proc/self/fd"),b.mount({mount:function(){var c=b.createNode(a,"fd",16384|511,73);return c.node_ops={lookup:function(f,d){var e=+d,c=b.getStream(e),a;if(!c)throw new b.ErrnoError(8);return a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}},a.parent=a,a}},c}},{},"/proc/self/fd")},createStandardStreams:function(){var a,c,d;f.stdin?b.createDevice("/dev","stdin",f.stdin):b.symlink("/dev/tty","/dev/stdin"),f.stdout?b.createDevice("/dev","stdout",null,f.stdout):b.symlink("/dev/tty","/dev/stdout"),f.stderr?b.createDevice("/dev","stderr",null,f.stderr):b.symlink("/dev/tty1","/dev/stderr"),a=b.open("/dev/stdin",0),c=b.open("/dev/stdout",1),d=b.open("/dev/stderr",1)},ensureErrnoError:function(){if(b.ErrnoError)return;b.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error"},b.ErrnoError.prototype=new Error,b.ErrnoError.prototype.constructor=b.ErrnoError,[44].forEach(function(a){b.genericErrors[a]=new b.ErrnoError(a),b.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){b.ensureErrnoError(),b.nameTable=new Array(4096),b.mount(n,{},"/"),b.createDefaultDirectories(),b.createDefaultDevices(),b.createSpecialDirectories(),b.filesystems={MEMFS:n,IDBFS:w}},init:function(a,c,d){b.init.initialized=!0,b.ensureErrnoError(),f.stdin=a||f.stdin,f.stdout=c||f.stdout,f.stderr=d||f.stderr,b.createStandardStreams()},quit:function(){var c,a,d;b.init.initialized=!1,c=f._fflush,c&&c(0);for(a=0;a<b.streams.length;a++){if(d=b.streams[a],!d)continue;b.close(d)}},getMode:function(b,c){var a=0;return b&&(a|=292|73),c&&(a|=146),a},findObject:function(c,d){var a=b.analyzePath(c,d);return a.exists?a.object:null},analyzePath:function(d,e){var c,a;try{c=b.lookupPath(d,{follow:!e}),d=c.path}catch(a){}a={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{c=b.lookupPath(d,{parent:!0}),a.parentExists=!0,a.parentPath=c.path,a.parentObject=c.node,a.name=u.basename(d),c=b.lookupPath(d,{follow:!e}),a.exists=!0,a.path=c.path,a.object=c.node,a.name=c.node.name,a.isRoot=c.path==="/"}catch(b){a.error=b.errno}return a},createPath:function(a,f,g,h){var d,e,c;for(a=typeof a=="string"?a:b.getPath(a),d=f.split("/").reverse();d.length;){if(e=d.pop(),!e)continue;c=u.join2(a,e);try{b.mkdir(c)}catch(a){}a=c}return c},createFile:function(a,c,h,d,e){var f=u.join2(typeof a=="string"?a:b.getPath(a),c),g=b.getMode(d,e);return b.create(f,g)},createDataFile:function(c,g,a,l,k,j){var n=g?u.join2(typeof c=="string"?c:b.getPath(c),g):c,f=b.getMode(l,k),e=b.create(n,f),h,d,m,i;if(a){if(typeof a=="string"){h=new Array(a.length);for(d=0,m=a.length;d<m;++d)h[d]=a.charCodeAt(d);a=h}b.chmod(e,f|146),i=b.open(e,577),b.write(i,a,0,a.length,0,j),b.close(i),b.chmod(e,f)}return e},createDevice:function(c,f,d,a){var g=u.join2(typeof c=="string"?c:b.getPath(c),f),h=b.getMode(!!d,!!a),e;return b.createDevice.major||(b.createDevice.major=64),e=b.makedev(b.createDevice.major++,0),b.registerDevice(e,{open:function(a){a.seekable=!1},close:function(b){a&&a.buffer&&a.buffer.length&&a(10)},read:function(h,i,f,g,j){for(var c=0,e=0,a;e<g;e++){try{a=d()}catch(a){throw new b.ErrnoError(29)}if(a===void 0&&c===0)throw new b.ErrnoError(6);if(a===null||a===void 0)break;c++,i[f+e]=a}return c&&(h.node.timestamp=Date.now()),c},write:function(e,f,g,d,h){for(var c=0;c<d;c++)try{a(f[g+c])}catch(a){throw new b.ErrnoError(29)}return d&&(e.node.timestamp=Date.now()),c}}),b.mkdev(g,h,e)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(aZ)try{a.contents=bj(aZ(a.url),!0),a.usedBytes=a.contents.length}catch(a){throw new b.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(i,j,d,k,l){var g,c,a,e,h;function f(){this.lengthKnown=!1,this.chunks=[]}if(f.prototype.get=function(a){var b,c;return a>this.length-1||a<0?void 0:(b=a%this.chunkSize,c=a/this.chunkSize|0,this.getter(c)[b])},f.prototype.setDataGetter=function(a){this.getter=a},f.prototype.cacheLength=function(){var b=new XMLHttpRequest,a,f,g,h,c,i,e;if(b.open("HEAD",d,!1),b.send(null),!(b.status>=200&&b.status<300||b.status===304))throw new Error("Couldn't load "+d+". Status: "+b.status);a=Number(b.getResponseHeader("Content-length")),g=(f=b.getResponseHeader("Accept-Ranges"))&&f==="bytes",h=(f=b.getResponseHeader("Content-Encoding"))&&f==="gzip",c=1024*1024,g||(c=a),i=function(f,e){if(f>e)throw new Error("invalid range ("+f+", "+e+") or no bytes requested!");if(e>a-1)throw new Error("only "+a+" bytes available! programmer error!");var b=new XMLHttpRequest;if(b.open("GET",d,!1),a!==c&&b.setRequestHeader("Range","bytes="+f+"-"+e),typeof Uint8Array!="undefined"&&(b.responseType="arraybuffer"),b.overrideMimeType&&b.overrideMimeType("text/plain; charset=x-user-defined"),b.send(null),!(b.status>=200&&b.status<300||b.status===304))throw new Error("Couldn't load "+d+". Status: "+b.status);return b.response!==void 0?new Uint8Array(b.response||[]):bj(b.responseText||"",!0)},e=this,e.setDataGetter(function(b){var f=b*c,d=(b+1)*c-1;if(d=Math.min(d,a-1),typeof e.chunks[b]=="undefined"&&(e.chunks[b]=i(f,d)),typeof e.chunks[b]=="undefined")throw new Error("doXHR failed!");return e.chunks[b]}),(h||!a)&&(c=a=1,a=this.getter(0).length,c=a,ay("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=a,this._chunkSize=c,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){if(!ah)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";g=new f,Object.defineProperties(g,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}}),c={isDevice:!1,contents:g}}else c={isDevice:!1,url:d};return a=b.createFile(i,j,c,k,l),c.contents?a.contents=c.contents:c.url&&(a.contents=null,a.url=c.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}}),e={},h=Object.keys(a.stream_ops),h.forEach(function(c){var d=a.stream_ops[c];e[c]=function(){return b.forceLoadFile(a),d.apply(null,arguments)}}),e.read=function(j,h,g,i,f){var d,e,c;if(b.forceLoadFile(a),d=j.node.contents,f>=d.length)return 0;if(e=Math.min(d.length-f,i),d.slice)for(c=0;c<e;c++)h[g+c]=d[f+c];else for(c=0;c<e;c++)h[g+c]=d.get(f+c);return e},a.stream_ops=e,a},createPreloadedFile:function(i,e,g,p,o,j,d,m,n,k){var c,a;h.init(),c=e?ac.resolve(u.join2(i,e)):i,a=ct("cp "+c);function l(h){function l(c){k&&k(),m||b.createDataFile(i,e,c,p,o,n),j&&j(),ba(a)}var g=!1;f.preloadPlugins.forEach(function(b){if(g)return;b.canHandle(c)&&(b.handle(h,c,l,function(){d&&d(),ba(a)}),g=!0)}),g||l(h)}bH(a),typeof g=="string"?h.asyncLoad(g,function(a){l(a)},d):l(g)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,d,a){var f,c;d=d||function(){},a=a||function(){},f=b.indexedDB();try{c=f.open(b.DB_NAME(),b.DB_VERSION)}catch(b){return a(b)}c.onupgradeneeded=function(){ay("creating db");var a=c.result;a.createObjectStore(b.DB_STORE_NAME)},c.onsuccess=function(){var l=c.result,j=l.transaction([b.DB_STORE_NAME],"readwrite"),k=j.objectStore(b.DB_STORE_NAME),g=0,f=0,h=e.length;function i(){f==0?d():a()}e.forEach(function(a){var c=k.put(b.analyzePath(a).object.contents,a);c.onsuccess=function(){g++,g+f==h&&i()},c.onerror=function(){f++,g+f==h&&i()}}),j.onerror=a},c.onerror=a},loadFilesFromDB:function(e,d,a){var f,c;d=d||function(){},a=a||function(){},f=b.indexedDB();try{c=f.open(b.DB_NAME(),b.DB_VERSION)}catch(b){return a(b)}c.onupgradeneeded=a,c.onsuccess=function(){var l=c.result,j,k,g,f,h;try{j=l.transaction([b.DB_STORE_NAME],"readonly")}catch(b){a(b);return}k=j.objectStore(b.DB_STORE_NAME),g=0,f=0,h=e.length;function i(){f==0?d():a()}e.forEach(function(a){var c=k.get(a);c.onsuccess=function(){b.analyzePath(a).exists&&b.unlink(a),b.createDataFile(u.dirname(a),u.basename(a),c.result,!0,!0,!0),g++,g+f==h&&i()},c.onerror=function(){f++,g+f==h&&i()}}),j.onerror=a},c.onerror=a}},q={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,c,f){var a,d;if(c[0]==="/")return c;if(e===-100)a=b.cwd();else{if(d=b.getStream(e),!d)throw new b.ErrnoError(8);a=d.path}if(c.length==0){if(!f)throw new b.ErrnoError(44);return a}return u.join2(a,c)},doStat:function(f,d,a){try{var c=f(d)}catch(a){if(a&&a.node&&u.normalize(d)!==u.normalize(b.getPath(a.node)))return-54;throw a}return e[a>>2]=c.dev,e[a+4>>2]=0,e[a+8>>2]=c.ino,e[a+12>>2]=c.mode,e[a+16>>2]=c.nlink,e[a+20>>2]=c.uid,e[a+24>>2]=c.gid,e[a+28>>2]=c.rdev,e[a+32>>2]=0,F=[c.size>>>0,(o=c.size,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[a+40>>2]=F[0],e[a+44>>2]=F[1],e[a+48>>2]=4096,e[a+52>>2]=c.blocks,e[a+56>>2]=c.atime.getTime()/1e3|0,e[a+60>>2]=0,e[a+64>>2]=c.mtime.getTime()/1e3|0,e[a+68>>2]=0,e[a+72>>2]=c.ctime.getTime()/1e3|0,e[a+76>>2]=0,F=[c.ino>>>0,(o=c.ino,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[a+80>>2]=F[0],e[a+84>>2]=F[1],0},doMsync:function(a,d,c,e,f){var g=r.slice(a,a+c);b.msync(d,g,f,c,e)},doMkdir:function(a,c){return a=u.normalize(a),a[a.length-1]==="/"&&(a=a.substr(0,a.length-1)),b.mkdir(a,c,0),0},doMknod:function(c,a,d){switch(a&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return b.mknod(c,a,d),0},doReadlink:function(g,c,d){var e,a,f;return d<=0?-28:(e=b.readlink(g),a=Math.min(d,ar(e)),f=v[c+a],z(e,c,d+1),v[c+a]=f,a)},doAccess:function(f,c){var d,e,a;return c&~7?-28:(e=b.lookupPath(f,{follow:!0}),d=e.node,!d)?-44:(a="",c&4&&(a+="r"),c&2&&(a+="w"),c&1&&(a+="x"),a&&b.nodePermissions(d,a))?-2:0},doDup:function(d,e,a){var c=b.getStream(a);return c&&b.close(c),b.open(d,e,0,a,a).fd},doReadv:function(h,d,k,i){for(var f=0,a=0,j,g,c;a<k;a++){if(j=e[d+a*8>>2],g=e[d+(a*8+4)>>2],c=b.read(h,v,j,g,i),c<0)return-1;if(f+=c,c<g)break}return f},doWritev:function(g,c,k,h){for(var f=0,a=0,i,j,d;a<k;a++){if(i=e[c+a*8>>2],j=e[c+(a*8+4)>>2],d=b.write(g,v,i,j,h),d<0)return-1;f+=d}return f},varargs:void 0,get:function(){q.varargs+=4;var a=e[q.varargs-4>>2];return a},getStr:function(a){var b=G(a);return b},getStreamFromFD:function(c){var a=b.getStream(c);if(!a)throw new b.ErrnoError(8);return a},get64:function(a,b){return a}};function cT(B,g,d,f,C){var i,A,z,y,v,u,t,s,r,l,o,n,p,w,x,k,a,c,h,j;try{i=0,A=g?e[g>>2]:0,z=g?e[g+4>>2]:0,y=d?e[d>>2]:0,v=d?e[d+4>>2]:0,u=f?e[f>>2]:0,t=f?e[f+4>>2]:0,s=0,r=0,l=0,o=0,n=0,p=0,w=(g?e[g>>2]:0)|(d?e[d>>2]:0)|(f?e[f>>2]:0),x=(g?e[g+4>>2]:0)|(d?e[d+4>>2]:0)|(f?e[f+4>>2]:0),k=function(b,c,d,a){return b<32?c&a:d&a};for(a=0;a<B;a++){if(c=1<<a%32,!k(a,w,x,c))continue;if(h=b.getStream(a),!h)throw new b.ErrnoError(8);j=q.DEFAULT_POLLMASK,h.stream_ops.poll&&(j=h.stream_ops.poll(h)),j&1&&k(a,A,z,c)&&(a<32?s=s|c:r=r|c,i++),j&4&&k(a,y,v,c)&&(a<32?l=l|c:o=o|c,i++),j&2&&k(a,u,t,c)&&(a<32?n=n|c:p=p|c,i++)}return g&&(e[g>>2]=s,e[g+4>>2]=r),d&&(e[d>>2]=l,e[d+4>>2]=o),f&&(e[f>>2]=n,e[f+4>>2]=p),i}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}B={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},E={mount:function(a){return f.websocket=f.websocket&&"object"==typeof f.websocket?f.websocket:{},f.websocket._callbacks={},f.websocket.on=function(b,a){return"function"==typeof a&&(this._callbacks[b]=a),this},f.websocket.emit=function(a,b){"function"==typeof this._callbacks[a]&&this._callbacks[a].call(this,b)},b.createNode(null,"/",16384|511,0)},createSocket:function(i,d,e){var g,a,f,c,h;return d&=~526336,g=d==1,e&&ae(g==(e==6)),a={family:i,type:d,protocol:e,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:E.websocket_sock_ops},f=E.nextname(),c=b.createNode(E.root,f,49152,0),c.sock=a,h=b.createStream({path:f,node:c,flags:2,seekable:!1,stream_ops:E.stream_ops}),a.stream=h,a},getSocket:function(c){var a=b.getStream(c);return!a||!b.isSocket(a.node.mode)?null:a.node.sock},stream_ops:{poll:function(b){var a=b.node.sock;return a.sock_ops.poll(a)},ioctl:function(b,c,d){var a=b.node.sock;return a.sock_ops.ioctl(a,c,d)},read:function(f,c,d,e,g){var b=f.node.sock,a=b.sock_ops.recvmsg(b,e);return a?(c.set(a.buffer,d),a.buffer.length):0},write:function(b,c,d,e,f){var a=b.node.sock;return a.sock_ops.sendmsg(a,c,d,e)},close:function(b){var a=b.node.sock;a.sock_ops.close(a)}},nextname:function(){return E.nextname.current||(E.nextname.current=0),"socket["+E.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,c,h){var a,j,l,g,m,d,k,n,i;if(typeof c=="object"&&(a=c,c=null,h=null),a)if(a._socket)c=a._socket.remoteAddress,h=a._socket.remotePort;else{if(j=/ws[s]?:\/\/([^:]+):(\d+)/.exec(a.url),!j)throw new Error("WebSocket URL must be in the format ws(s)://address:port");c=j[1],h=parseInt(j[2],10)}else try{l=f.websocket&&"object"==typeof f.websocket,g="ws:#".replace("#","//"),l&&"string"==typeof f.websocket.url&&(g=f.websocket.url),(g==="ws://"||g==="wss://")&&(m=c.split("/"),g=g+m[0]+":"+h+"/"+m.slice(1).join("/")),d="binary",l&&"string"==typeof f.websocket.subprotocol&&(d=f.websocket.subprotocol),k=void 0,d!=="null"&&(d=d.replace(/^ +| +$/g,"").split(/ *, */),k=aA?{protocol:d.toString()}:d),l&&null===f.websocket.subprotocol&&(d="null",k=void 0),n=WebSocket,a=new n(g,k),a.binaryType="arraybuffer"}catch(a){throw new b.ErrnoError(B.EHOSTUNREACH)}return i={addr:c,port:h,socket:a,dgram_send_queue:[]},E.websocket_sock_ops.addPeer(e,i),E.websocket_sock_ops.handlePeerEvents(e,i),e.type===2&&typeof e.sport!="undefined"&&i.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(e.sport&65280)>>8,e.sport&255])),i},getPeer:function(a,b,c){return a.peers[b+":"+c]},addPeer:function(b,a){b.peers[a.addr+":"+a.port]=a},removePeer:function(b,a){delete b.peers[a.addr+":"+a.port]},handlePeerEvents:function(b,a){var c=!0,d=function(){f.websocket.emit("open",b.stream.fd);try{for(var c=a.dgram_send_queue.shift();c;)a.socket.send(c),c=a.dgram_send_queue.shift()}catch(b){a.socket.close()}};function e(d){var e,g,h;if(typeof d=="string")e=new TextEncoder,d=e.encode(d);else{if(ae(d.byteLength!==void 0),d.byteLength==0)return;d=new Uint8Array(d)}if(g=c,c=!1,g&&d.length===10&&d[0]===255&&d[1]===255&&d[2]===255&&d[3]===255&&d[4]==="p".charCodeAt(0)&&d[5]==="o".charCodeAt(0)&&d[6]==="r".charCodeAt(0)&&d[7]==="t".charCodeAt(0)){h=d[8]<<8|d[9],E.websocket_sock_ops.removePeer(b,a),a.port=h,E.websocket_sock_ops.addPeer(b,a);return}b.recv_queue.push({addr:a.addr,port:a.port,data:d}),f.websocket.emit("message",b.stream.fd)}aA?(a.socket.on("open",d),a.socket.on("message",function(a,b){if(!b.binary)return;e(new Uint8Array(a).buffer)}),a.socket.on("close",function(){f.websocket.emit("close",b.stream.fd)}),a.socket.on("error",function(a){b.error=B.ECONNREFUSED,f.websocket.emit("error",[b.stream.fd,b.error,"ECONNREFUSED: Connection refused"])})):(a.socket.onopen=d,a.socket.onclose=function(){f.websocket.emit("close",b.stream.fd)},a.socket.onmessage=function(a){e(a.data)},a.socket.onerror=function(a){b.error=B.ECONNREFUSED,f.websocket.emit("error",[b.stream.fd,b.error,"ECONNREFUSED: Connection refused"])})},poll:function(b){var c,a;return b.type===1&&b.server?b.pending.length?64|1:0:(c=0,a=b.type===1?E.websocket_sock_ops.getPeer(b,b.daddr,b.dport):null,(b.recv_queue.length||!a||a&&a.socket.readyState===a.socket.CLOSING||a&&a.socket.readyState===a.socket.CLOSED)&&(c|=64|1),(!a||a&&a.socket.readyState===a.socket.OPEN)&&(c|=4),(a&&a.socket.readyState===a.socket.CLOSING||a&&a.socket.readyState===a.socket.CLOSED)&&(c|=16),c)},ioctl:function(a,c,d){switch(c){case 21531:var b=0;return a.recv_queue.length&&(b=a.recv_queue[0].data.length),e[d>>2]=b,0;default:return B.EINVAL}},close:function(a){var c,b,d;if(a.server){try{a.server.close()}catch(a){}a.server=null}c=Object.keys(a.peers);for(b=0;b<c.length;b++){d=a.peers[c[b]];try{d.socket.close()}catch(a){}E.websocket_sock_ops.removePeer(a,d)}return 0},bind:function(a,c,d){if(typeof a.saddr!="undefined"||typeof a.sport!="undefined")throw new b.ErrnoError(B.EINVAL);if(a.saddr=c,a.sport=d,a.type===2){a.server&&(a.server.close(),a.server=null);try{a.sock_ops.listen(a,0)}catch(a){if(!(a instanceof b.ErrnoError))throw a;if(a.errno!==B.EOPNOTSUPP)throw a}}},connect:function(a,e,f){var c,d;if(a.server)throw new b.ErrnoError(B.EOPNOTSUPP);if(typeof a.daddr!="undefined"&&typeof a.dport!="undefined")if(c=E.websocket_sock_ops.getPeer(a,a.daddr,a.dport),c)throw c.socket.readyState===c.socket.CONNECTING?new b.ErrnoError(B.EALREADY):new b.ErrnoError(B.EISCONN);throw d=E.websocket_sock_ops.createPeer(a,e,f),a.daddr=d.addr,a.dport=d.port,new b.ErrnoError(B.EINPROGRESS)},listen:function(a,c){if(!aA)throw new b.ErrnoError(B.EOPNOTSUPP)},accept:function(a){if(!a.server)throw new b.ErrnoError(B.EINVAL);var c=a.pending.shift();return c.stream.flags=a.stream.flags,c},getname:function(a,e){var c,d;if(e){if(a.daddr===void 0||a.dport===void 0)throw new b.ErrnoError(B.ENOTCONN);c=a.daddr,d=a.dport}else c=a.saddr||0,d=a.sport||0;return{addr:c,port:d}},sendmsg:function(c,f,h,i,d,e){var a,g;if(c.type===2){if((d===void 0||e===void 0)&&(d=c.daddr,e=c.dport),d===void 0||e===void 0)throw new b.ErrnoError(B.EDESTADDRREQ)}else d=c.daddr,e=c.dport;if(a=E.websocket_sock_ops.getPeer(c,d,e),c.type===1){if(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)throw new b.ErrnoError(B.ENOTCONN);if(a.socket.readyState===a.socket.CONNECTING)throw new b.ErrnoError(B.EAGAIN)}if(ArrayBuffer.isView(f)&&(h+=f.byteOffset,f=f.buffer),g=f.slice(h,h+i),c.type===2)if(!a||a.socket.readyState!==a.socket.OPEN)return(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)&&(a=E.websocket_sock_ops.createPeer(c,d,e)),a.dgram_send_queue.push(g),i;try{return a.socket.send(g),i}catch(a){throw new b.ErrnoError(B.EINVAL)}},recvmsg:function(c,k){var a,d,f,g,h,e,i,j;if(c.type===1&&c.server)throw new b.ErrnoError(B.ENOTCONN);if(a=c.recv_queue.shift(),!a)if(c.type===1){if(d=E.websocket_sock_ops.getPeer(c,c.daddr,c.dport),!d)throw new b.ErrnoError(B.ENOTCONN);if(d.socket.readyState===d.socket.CLOSING||d.socket.readyState===d.socket.CLOSED)return null;throw new b.ErrnoError(B.EAGAIN)}else throw new b.ErrnoError(B.EAGAIN);return f=a.data.byteLength||a.data.length,g=a.data.byteOffset||0,h=a.data.buffer||a.data,e=Math.min(k,f),i={buffer:new Uint8Array(h,g,e),addr:a.addr,port:a.port},c.type===1&&e<f&&(j=f-e,a.data=new Uint8Array(h,g+e,j),c.recv_queue.unshift(a)),i}}};function at(c){var a=E.getSocket(c);if(!a)throw new b.ErrnoError(8);return a}function bc(a){return e[bC()>>2]=a,a}function bd(d){for(var a=d.split("."),b=0,c;b<4;b++){if(c=Number(a[b]),isNaN(c))return null;a[b]=c}return(a[0]|a[1]<<8|a[2]<<16|a[3]<<24)>>>0}function ao(a){return parseInt(a)}function bA(b){var g=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,c=[],f,e,a,d;if(!g.test(b))return null;if(b==="::")return[0,0,0,0,0,0,0,0];b.indexOf("::")===0?b=b.replace("::","Z:"):b=b.replace("::",":Z:"),b.indexOf(".")>0?(b=b.replace(new RegExp("[.]","g"),":"),a=b.split(":"),a[a.length-4]=ao(a[a.length-4])+ao(a[a.length-3])*256,a[a.length-3]=ao(a[a.length-2])+ao(a[a.length-1])*256,a=a.slice(0,a.length-2)):a=b.split(":"),f=0,e=0;for(d=0;d<a.length;d++)if(typeof a[d]=="string")if(a[d]==="Z"){for(e=0;e<8-a.length+1;e++)c[d+e]=0;f=e-1}else c[d+f]=aP(parseInt(a[d],16));else c[d+f]=a[d];return[c[1]<<16|c[0],c[3]<<16|c[2],c[5]<<16|c[4],c[7]<<16|c[6]]}function bg(a,d,b,f,c){switch(d){case 2:b=bd(b),c&&(e[c>>2]=16),Q[a>>1]=d,e[a+4>>2]=b,Q[a+2>>1]=aP(f),F=[0>>>0,(o=0,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[a+8>>2]=F[0],e[a+12>>2]=F[1];break;case 10:b=bA(b),c&&(e[c>>2]=28),e[a>>2]=d,e[a+8>>2]=b[0],e[a+12>>2]=b[1],e[a+16>>2]=b[2],e[a+20>>2]=b[3],Q[a+2>>1]=aP(f),e[a+4>>2]=0,e[a+24>>2]=0;break;default:return 5}return 0}S={address_map:{id:1,addrs:{},names:{}},lookup_name:function(a){var c=bd(a),b,d;return c!==null?a:(c=bA(a),c!==null)?a:(S.address_map.addrs[a]?b=S.address_map.addrs[a]:(d=S.address_map.id++,ae(d<65535,"exceeded max address mappings of 65535"),b="172.29."+(d&255)+"."+(d&65280),S.address_map.names[b]=a,S.address_map.addrs[a]=b),b)},lookup_addr:function(a){return S.address_map.names[a]?S.address_map.names[a]:null}};function nX(e,d,f,h){var c,a,g;try{return c=at(e),a=c.sock_ops.accept(c),d&&(g=bg(d,a.family,S.lookup_name(a.daddr),a.dport,f)),a.stream.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nW(a,c){try{return a=q.getStr(a),q.doAccess(a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function bx(a){return(a&255)+"."+(a>>8&255)+"."+(a>>16&255)+"."+(a>>24&255)}function cj(c){var b="",a=0,f=0,k=0,g=0,h=0,i=0,d=[c[0]&65535,c[0]>>16,c[1]&65535,c[1]>>16,c[2]&65535,c[2]>>16,c[3]&65535,c[3]>>16],j=!0,e="";for(i=0;i<5;i++)if(d[i]!==0){j=!1;break}if(j){if(e=bx(d[6]|d[7]<<16),d[5]===-1)return b="::ffff:",b+=e,b;if(d[5]===0)return b="::",e==="0.0.0.0"&&(e=""),e==="0.0.0.1"&&(e="1"),b+=e,b}for(a=0;a<8;a++)d[a]===0&&(a-k>1&&(h=0),k=a,h++),h>f&&(f=h,g=a-f+1);for(a=0;a<8;a++){if(f>1)if(d[a]===0&&a>=g&&a<g+f){a===g&&(b+=":",g===0&&(b+=":"));continue}b+=Number(bk(d[a]&65535)).toString(16),b+=a<7?":":""}return b}function ci(a,c){var d=Q[a>>1],f=bk(bh[a+2>>1]),b;switch(d){case 2:if(c!==16)return{errno:28};b=e[a+4>>2],b=bx(b);break;case 10:if(c!==28)return{errno:28};b=[e[a+8>>2],e[a+12>>2],e[a+16>>2],e[a+20>>2]],b=cj(b);break;default:return{errno:5}}return{family:d,addr:b,port:f}}function bv(c,d,e){if(e&&c===0)return null;var a=ci(c,d);if(a.errno)throw new b.ErrnoError(a.errno);return a.addr=S.lookup_addr(a.addr)||a.addr,a}function nV(d,e,f){var a,c;try{return a=at(d),c=bv(e,f),a.sock_ops.bind(a,c.addr,c.port),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nU(a){try{return a=q.getStr(a),b.chdir(a),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nS(a,c){try{return a=q.getStr(a),b.chmod(a,c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nR(d,e,f){var a,c;try{return a=at(d),c=bv(e,f),a.sock_ops.connect(a,c.addr,c.port),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nQ(h,f,g){var c,a,d,e;q.varargs=g;try{switch(c=q.getStreamFromFD(h),f){case 0:return a=q.get(),a<0?-28:(d=b.open(c.path,c.flags,0,a),d.fd);case 1:case 2:return 0;case 3:return c.flags;case 4:return a=q.get(),c.flags|=a,0;case 12:return a=q.get(),e=0,Q[a+e>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return bc(28),-1;default:return-28}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nP(d,a){var c,e;try{return a===0?-28:(c=b.cwd(),e=ar(c),a<e+1)?-68:(z(c,d,a),d)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nO(n,d,p){var c,f,a,l,g,h,j,k,i;try{for(c=q.getStreamFromFD(n),c.getdents||(c.getdents=b.readdir(c.path)),f=280,a=0,l=b.llseek(c,0,1),g=Math.floor(l/f);g<c.getdents.length&&a+f<=p;)k=c.getdents[g],k[0]==="."?(h=1,j=4):(i=b.lookupNode(c.node,k),h=i.id,j=b.isChrdev(i.mode)?2:b.isDir(i.mode)?4:b.isLink(i.mode)?10:8),F=[h>>>0,(o=h,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[d+a>>2]=F[0],e[d+a+4>>2]=F[1],F=[(g+1)*f>>>0,(o=(g+1)*f,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[d+a+8>>2]=F[0],e[d+a+12>>2]=F[1],Q[d+a+16>>1]=280,v[d+a+18>>0]=j,z(k,d+a+19,256),a+=f,g+=1;return b.llseek(c,g*f,0),a}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nN(){return 42}function nM(c,d,e){var a,f;try{return A("__sys_getsockname "+c),a=at(c),f=bg(d,a.family,S.lookup_name(a.saddr||"0.0.0.0"),a.sport,e),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nL(c,d,f,g,h){try{var a=at(c);if(d===1)if(f===4)return e[g>>2]=a.error,e[h>>2]=4,a.error=null,0;return-50}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nK(f,d,g){var a,c;q.varargs=g;try{switch(a=q.getStreamFromFD(f),d){case 21509:case 21505:return a.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return a.tty?0:-59;case 21519:return a.tty?(c=q.get(),e[c>>2]=0,0):-59;case 21520:return a.tty?-28:-59;case 21531:return c=q.get(),b.ioctl(a,d,c);case 21523:return a.tty?0:-59;case 21524:return a.tty?0:-59;default:m("bad ioctl syscall "+d)}}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nI(c,d){try{var a=at(c);return a.sock_ops.listen(a,d),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nE(a,c){try{return a=q.getStr(a),q.doMkdir(a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nD(f,g,a){var c,d,e;q.varargs=a;try{return c=q.getStr(f),d=a?q.get():0,e=b.open(c,g,d),e.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nC(j,k,l){var g,d,f,h,i,a,c;try{g=0;for(d=0;d<k;d++)f=j+8*d,h=e[f>>2],i=Q[f+4>>1],a=32,c=b.getStream(h),c&&(a=q.DEFAULT_POLLMASK,c.stream_ops.poll&&(a=c.stream_ops.poll(c))),a&=i|8|16,a&&g++,Q[f+6>>1]=a;return g}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nB(g,h,e,j,d,f){var c,a,i;try{return c=at(g),a=c.sock_ops.recvmsg(c,e),!a?0:(d&&(i=bg(d,c.family,S.lookup_name(a.addr),a.port,f)),r.set(a.buffer,h),a.buffer.byteLength)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nA(a,c){try{return a=q.getStr(a),c=q.getStr(c),b.rename(a,c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nz(a){try{return a=q.getStr(a),b.rmdir(a),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nv(h,e,d,i,f,g){var a,c;try{return a=at(h),c=bv(f,g,!0),!c?b.write(a.stream,v,e,d):a.sock_ops.sendmsg(a,v,e,d,c.addr,c.port)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function nb(a){try{return-50}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function mX(a,c,d){try{var e=E.createSocket(a,c,d);return e.stream.fd}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function mO(a,c){try{return a=q.getStr(a),q.doStat(b.stat,a,c)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function mI(c,d,a){try{return c=q.getStr(c),e[a+4>>2]=4096,e[a+40>>2]=4096,e[a+8>>2]=1e6,e[a+12>>2]=5e5,e[a+16>>2]=5e5,e[a+20>>2]=b.nextInode,e[a+24>>2]=1e6,e[a+28>>2]=42,e[a+44>>2]=2,e[a+36>>2]=255,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function mB(a){try{return a=q.getStr(a),b.unlink(a),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function ml(a,c,d,e){try{return-52}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),-a.errno}}function mk(){m()}am=function(){return performance.now()},cd=!0;function lB(b,c){var a;if(b===0)a=Date.now();else if((b===1||b===4)&&cd)a=am();else return bc(28),-1;return e[c>>2]=a/1e3|0,e[c+4>>2]=a%1e3*1e3*1e3|0,0}function lA(a){m("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function lz(){m("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function ly(a,b){m("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function lx(a,b){m("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function lw(a,b,c){var d=nJ(b,c);return cn[a].apply(null,d)}function bW(b,d){var c,a,e;return h.mainLoop.timingMode=b,h.mainLoop.timingValue=d,!h.mainLoop.func?1:(b==0?(h.mainLoop.scheduler=function(){var a=Math.max(0,h.mainLoop.tickStartTime+d-am())|0;setTimeout(h.mainLoop.runner,a)},h.mainLoop.method="timeout"):b==1?(h.mainLoop.scheduler=function(){h.requestAnimationFrame(h.mainLoop.runner)},h.mainLoop.method="rAF"):b==2&&(typeof setImmediate=="undefined"&&(c=[],a="setimmediate",e=function(b){(b.data===a||b.data.target===a)&&(b.stopPropagation(),c.shift()())},addEventListener("message",e,!0),setImmediate=function(b){c.push(b),ah?(f.setImmediates===void 0&&(f.setImmediates=[]),f.setImmediates.push(b),postMessage({target:a})):postMessage(a,"*")}),h.mainLoop.scheduler=function(){setImmediate(h.mainLoop.runner)},h.mainLoop.method="immediate"),0)}function lv(){return!d.currentContext||!d.currentContext.GLctx?-3:d.currentContext.defaultFbo?(d.blitOffscreenFramebuffer(d.currentContext),0):d.currentContext.attributes.explicitSwapControl?0:-3}function lq(){return lv()}function cc(c,a,d,e,f){ax=!0,ae(!h.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),h.mainLoop.func=c,h.mainLoop.arg=e;var b=h.mainLoop.currentlyRunningMainloop;if(h.mainLoop.runner=function(){var f,a,d,e;if(aj)return;if(h.mainLoop.queue.length>0){if(f=Date.now(),a=h.mainLoop.queue.shift(),a.func(a.arg),h.mainLoop.remainingBlockers&&(d=h.mainLoop.remainingBlockers,e=d%1==0?d-1:Math.floor(d),a.counted?h.mainLoop.remainingBlockers=e:(e=e+.5,h.mainLoop.remainingBlockers=(8*d+e)/9)),console.log('main loop blocker "'+a.name+'" took '+(Date.now()-f)+" ms"),h.mainLoop.updateStatus(),b<h.mainLoop.currentlyRunningMainloop)return;setTimeout(h.mainLoop.runner,0);return}if(b<h.mainLoop.currentlyRunningMainloop)return;if(h.mainLoop.currentFrameNumber=h.mainLoop.currentFrameNumber+1|0,h.mainLoop.timingMode==1&&h.mainLoop.timingValue>1&&h.mainLoop.currentFrameNumber%h.mainLoop.timingValue!=0){h.mainLoop.scheduler();return}if(h.mainLoop.timingMode==0&&(h.mainLoop.tickStartTime=am()),h.mainLoop.runIter(c),b<h.mainLoop.currentlyRunningMainloop)return;typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),h.mainLoop.scheduler()},f||(a&&a>0?bW(0,1e3/a):bW(1,1),h.mainLoop.scheduler()),d)throw"unwind"}h={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){h.mainLoop.scheduler=null,h.mainLoop.currentlyRunningMainloop++},resume:function(){var a,b,c;h.mainLoop.currentlyRunningMainloop++,a=h.mainLoop.timingMode,b=h.mainLoop.timingValue,c=h.mainLoop.func,h.mainLoop.func=null,cc(c,0,!1,h.mainLoop.arg,!0),bW(a,b),h.mainLoop.scheduler()},updateStatus:function(){var c,a,b;f.setStatus&&(c=f.statusMessage||"Please wait...",a=h.mainLoop.remainingBlockers,b=h.mainLoop.expectedBlockers,a?a<b?f.setStatus(c+" ("+(b-a)+"/"+b+")"):f.setStatus(c):f.setStatus(""))},runIter:function(a){if(aj)return;if(f.preMainLoop){var b=f.preMainLoop();if(b===!1)return}try{a()}catch(a){if(a instanceof bZ)return;if(a=="unwind")return;throw a&&typeof a=="object"&&a.stack&&A("exception thrown: "+[a,a.stack]),a}f.postMainLoop&&f.postMainLoop()}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){var b,c,a;if(f.preloadPlugins||(f.preloadPlugins=[]),h.initted)return;h.initted=!0;try{new Blob,h.hasBlobConstructor=!0}catch(a){h.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}h.BlobBuilder=typeof MozBlobBuilder!="undefined"?MozBlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:h.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),h.URLObject=typeof window!="undefined"?window.URL?window.URL:window.webkitURL:void 0,!f.noImageDecoding&&typeof h.URLObject=="undefined"&&(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),f.noImageDecoding=!0),b={},b.canHandle=function(a){return!f.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},b.handle=function(c,d,i,j){var b=null,g,e,a;if(h.hasBlobConstructor)try{b=new Blob([c],{type:h.getMimetype(d)}),b.size!==c.length&&(b=new Blob([new Uint8Array(c).buffer],{type:h.getMimetype(d)}))}catch(a){aT("Blob constructor present but fails: "+a+"; falling back to blob builder")}b||(g=new h.BlobBuilder,g.append(new Uint8Array(c).buffer),b=g.getBlob()),e=h.URLObject.createObjectURL(b),a=new Image,a.onload=function(){var b,g;ae(a.complete,"Image "+d+" could not be decoded"),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,g=b.getContext("2d"),g.drawImage(a,0,0),f.preloadedImages[d]=b,h.URLObject.revokeObjectURL(e),i&&i(c)},a.onerror=function(b){console.log("Image "+e+" could not be decoded"),j&&j()},a.src=e},f.preloadPlugins.push(b),c={},c.canHandle=function(a){return!f.noAudioDecoding&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},c.handle=function(e,b,g,j){var c=!1,k,l,a;function d(a){if(c)return;c=!0,f.preloadedAudios[b]=a,g&&g(e)}function i(){if(c)return;c=!0,f.preloadedAudios[b]=new Audio,j&&j()}if(h.hasBlobConstructor){try{k=new Blob([e],{type:h.getMimetype(b)})}catch(a){return i()}l=h.URLObject.createObjectURL(k),a=new Audio,a.addEventListener("canplaythrough",function(){d(a)},!1),a.onerror=function(h){if(c)return;console.log("warning: browser could not fully decode audio "+b+", trying slower base64 approach");function f(g){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="=",a="",c=0,b=0,d=0,h;d<g.length;d++)for(c=c<<8|g[d],b+=8;b>=6;)h=c>>b-6&63,b-=6,a+=e[h];return b==2?(a+=e[(c&3)<<4],a+=f+f):b==4&&(a+=e[(c&15)<<2],a+=f),a}a.src="data:audio/x-"+b.substr(-3)+";base64,"+f(e),d(a)},a.src=l,h.safeSetTimeout(function(){d(a)},1e4)}else return i()},f.preloadPlugins.push(c);function d(){h.pointerLock=document.pointerLockElement===f.canvas||document.mozPointerLockElement===f.canvas||document.webkitPointerLockElement===f.canvas||document.msPointerLockElement===f.canvas}a=f.canvas,a&&(a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock||a.msRequestPointerLock||function(){},a.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},a.exitPointerLock=a.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1),document.addEventListener("webkitpointerlockchange",d,!1),document.addEventListener("mspointerlockchange",d,!1),f.elementPointerLock&&a.addEventListener("click",function(a){!h.pointerLock&&f.canvas.requestPointerLock&&(f.canvas.requestPointerLock(),a.preventDefault())},!1))},createContext:function(g,b,l,i){var a,e,j,k;if(b&&f.ctx&&g==f.canvas)return f.ctx;if(b){if(j={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1},i)for(k in i)j[k]=i[k];typeof d!="undefined"&&(e=d.createContext(g,j),e&&(a=d.getContext(e).GLctx))}else a=g.getContext("2d");return a?(l&&(b||ae(typeof c=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),f.ctx=a,b&&d.makeContextCurrent(e),f.useWebGL=b,h.moduleContextCreatedCallbacks.forEach(function(a){a()}),h.init()),a):null},destroyContext:function(a,b,c){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(d,e){var b,a;h.lockPointer=d,h.resizeCanvas=e,typeof h.lockPointer=="undefined"&&(h.lockPointer=!0),typeof h.resizeCanvas=="undefined"&&(h.resizeCanvas=!1),b=f.canvas;function c(){h.isFullscreen=!1;var a=b.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===a?(b.exitFullscreen=h.exitFullscreen,h.lockPointer&&b.requestPointerLock(),h.isFullscreen=!0,h.resizeCanvas?h.setFullscreenCanvasSize():h.updateCanvasDimensions(b)):(a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),h.resizeCanvas?h.setWindowedCanvasSize():h.updateCanvasDimensions(b)),f.onFullScreen&&f.onFullScreen(h.isFullscreen),f.onFullscreen&&f.onFullscreen(h.isFullscreen)}h.fullscreenHandlersInstalled||(h.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",c,!1),document.addEventListener("mozfullscreenchange",c,!1),document.addEventListener("webkitfullscreenchange",c,!1),document.addEventListener("MSFullscreenChange",c,!1)),a=document.createElement("div"),b.parentNode.insertBefore(a,b),a.appendChild(b),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?function(){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(a.webkitRequestFullScreen?function(){a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),a.requestFullscreen()},exitFullscreen:function(){if(!h.isFullscreen)return!1;var a=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return a.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(b){var a=Date.now(),c;if(h.nextRAF===0)h.nextRAF=a+1e3/60;else while(a+2>=h.nextRAF)h.nextRAF+=1e3/60;c=Math.max(h.nextRAF-a,0),setTimeout(b,c)},requestAnimationFrame:function(a){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(a);return}var b=h.fakeRequestAnimationFrame;b(a)},safeRequestAnimationFrame:function(a){return h.requestAnimationFrame(function(){if(aj)return;a()})},safeSetTimeout:function(a,b){return ax=!0,setTimeout(function(){if(aj)return;a()},b)},getMimetype:function(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[a.substr(a.lastIndexOf(".")+1)]},getUserMedia:function(a){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(a)},getMovementX:function(a){return a.movementX||a.mozMovementX||a.webkitMovementX||0},getMovementY:function(a){return a.movementY||a.mozMovementY||a.webkitMovementY||0},getMouseWheelDelta:function(a){var b=0;switch(a.type){case"DOMMouseScroll":b=a.detail/3;break;case"mousewheel":b=a.wheelDelta/120;break;case"wheel":switch(b=a.deltaY,a.deltaMode){case 0:b/=100;break;case 1:b/=3;break;case 2:b*=80;break;default:throw"unrecognized mouse wheel delta mode: "+a.deltaMode}break;default:throw"unrecognized mouse wheel event: "+a.type}return b},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(a){var b,o,l,m,n,c,j,k,d,i,e,g;if(h.pointerLock)a.type!="mousemove"&&"mozMovementX"in a?h.mouseMovementX=h.mouseMovementY=0:(h.mouseMovementX=h.getMovementX(a),h.mouseMovementY=h.getMovementY(a)),typeof SDL!="undefined"?(h.mouseX=SDL.mouseX+h.mouseMovementX,h.mouseY=SDL.mouseY+h.mouseMovementY):(h.mouseX+=h.mouseMovementX,h.mouseY+=h.mouseMovementY);else{if(b=f.canvas.getBoundingClientRect(),o=f.canvas.width,l=f.canvas.height,m=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,n=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset,a.type==="touchstart"||a.type==="touchend"||a.type==="touchmove"){if(c=a.touch,c===void 0)return;j=c.pageX-(m+b.left),k=c.pageY-(n+b.top),j=j*(o/b.width),k=k*(l/b.height),d={x:j,y:k},a.type==="touchstart"?(h.lastTouches[c.identifier]=d,h.touches[c.identifier]=d):(a.type==="touchend"||a.type==="touchmove")&&(i=h.touches[c.identifier],i||(i=d),h.lastTouches[c.identifier]=i,h.touches[c.identifier]=d);return}e=a.pageX-(m+b.left),g=a.pageY-(n+b.top),e=e*(o/b.width),g=g*(l/b.height),h.mouseMovementX=e-h.mouseX,h.mouseMovementY=g-h.mouseY,h.mouseX=e,h.mouseY=g}},asyncLoad:function(a,d,c,e){var b=e?"":ct("al "+a);bB(a,function(c){ae(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),d(new Uint8Array(c)),b&&ba(b)},function(b){if(c)c();else throw'Loading data file "'+a+'" failed.'}),b&&bH(b)},resizeListeners:[],updateResizeListeners:function(){var a=f.canvas;h.resizeListeners.forEach(function(b){b(a.width,a.height)})},setCanvasSize:function(a,b,c){var d=f.canvas;h.updateCanvasDimensions(d,a,b),c||h.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var a=K[SDL.screen>>2];a=a|8388608,e[SDL.screen>>2]=a}h.updateCanvasDimensions(f.canvas),h.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var a=K[SDL.screen>>2];a=a&~8388608,e[SDL.screen>>2]=a}h.updateCanvasDimensions(f.canvas),h.updateResizeListeners()},updateCanvasDimensions:function(a,d,e){var b,c,g;d&&e?(a.widthNative=d,a.heightNative=e):(d=a.widthNative,e=a.heightNative),b=d,c=e,f.forcedAspectRatio&&f.forcedAspectRatio>0&&(b/c<f.forcedAspectRatio?b=Math.round(c*f.forcedAspectRatio):c=Math.round(b/f.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===a.parentNode&&typeof screen!="undefined"&&(g=Math.min(screen.width/b,screen.height/c),b=Math.round(b*g),c=Math.round(c*g)),h.resizeCanvas?(a.width!=b&&(a.width=b),a.height!=c&&(a.height=c),typeof a.style!="undefined"&&(a.style.removeProperty("width"),a.style.removeProperty("height"))):(a.width!=d&&(a.width=d),a.height!=e&&(a.height=e),typeof a.style!="undefined"&&(b!=d||c!=e?(a.style.setProperty("width",b+"px","important"),a.style.setProperty("height",c+"px","important")):(a.style.removeProperty("width"),a.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var a=h.nextWgetRequestHandle;return h.nextWgetRequestHandle++,a}};function lk(){h.mainLoop.pause(),h.mainLoop.func=null}k={inEventHandler:0,removeAllEventListeners:function(){for(var a=k.eventHandlers.length-1;a>=0;--a)k._removeHandler(a);k.eventHandlers=[],k.deferredCalls=[]},registerRemoveEventListeners:function(){k.removeEventListenersRegistered||(br.push(k.removeAllEventListeners),k.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(b,e,c){var d,a;function f(a,b){if(a.length!=b.length)return!1;for(var c in a)if(a[c]!=b[c])return!1;return!0}for(d in k.deferredCalls)if(a=k.deferredCalls[d],a.targetFunction==b&&f(a.argsList,c))return;k.deferredCalls.push({targetFunction:b,precedence:e,argsList:c}),k.deferredCalls.sort(function(a,b){return a.precedence<b.precedence})},removeDeferredCalls:function(b){for(var a=0;a<k.deferredCalls.length;++a)k.deferredCalls[a].targetFunction==b&&(k.deferredCalls.splice(a,1),--a)},canPerformEventHandlerRequests:function(){return k.inEventHandler&&k.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){var a,b;if(!k.canPerformEventHandlerRequests())return;for(a=0;a<k.deferredCalls.length;++a)b=k.deferredCalls[a],k.deferredCalls.splice(a,1),--a,b.targetFunction.apply(null,b.argsList)},eventHandlers:[],removeAllHandlersOnTarget:function(c,b){for(var a=0;a<k.eventHandlers.length;++a)k.eventHandlers[a].target==c&&(!b||b==k.eventHandlers[a].eventTypeString)&&k._removeHandler(a--)},_removeHandler:function(b){var a=k.eventHandlers[b];a.target.removeEventListener(a.eventTypeString,a.eventListenerFunc,a.useCapture),k.eventHandlers.splice(b,1)},registerOrRemoveHandler:function(a){var c=function(b){++k.inEventHandler,k.currentEventHandler=a,k.runDeferredCalls(),a.handlerFunc(b),k.runDeferredCalls(),--k.inEventHandler},b;if(a.callbackfunc)a.eventListenerFunc=c,a.target.addEventListener(a.eventTypeString,c,a.useCapture),k.eventHandlers.push(a),k.registerRemoveEventListeners();else for(b=0;b<k.eventHandlers.length;++b)k.eventHandlers[b].target==a.target&&k.eventHandlers[b].eventTypeString==a.eventTypeString&&k._removeHandler(b--)},getNodeNameForTarget:function(a){return a?a==window?"#window":a==screen?"#screen":a&&a.nodeName?a.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function aY(a,b,c){a.style.paddingLeft=a.style.paddingRight=c+"px",a.style.paddingTop=a.style.paddingBottom=b+"px"}function lj(f){for(var c=f,d=c.parentNode,e=[],b,a;c!=document.body;){b=d.children;for(a=0;a<b.length;++a)b[a]!=c&&(e.push({node:b[a],displayState:b[a].style.display}),b[a].style.display="none");c=d,d=d.parentNode}return e}aR=null;function li(a){return a>2?G(a):a}bt=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];function aq(a){a=li(a);var b=bt[a]||(typeof document!="undefined"?document.querySelector(a):void 0);return b}function ca(a){return aq(a)}function lh(b,c,d){var a=ca(b);if(!a)return-4;e[c>>2]=a.width,e[d>>2]=a.height}function bw(a){var f=L(),b=af(8),c=b+4,d=af(a.id.length+1),h,g;return z(a.id,d,a.id.length+1),h=lh(d,b,c),g=[e[b>>2],e[c>>2]],J(f),g}function lg(b,c,e){var a=ca(b);return a?(a.width=c,a.height=e,a.GLctxObject&&d.resizeOffscreenFramebuffer(a.GLctxObject),0):-4}function bz(a,c,d){var e,b;a.controlTransferredOffscreen?(e=L(),b=af(a.id.length+1),z(a.id,b,a.id.length+1),lg(b,c,d),J(e)):(a.width=c,a.height=d)}function lf(a){var f=bw(a),e=f[0],d=f[1],l=a.style.width,k=a.style.height,h=a.style.backgroundColor,c=document.body.style.backgroundColor,i=a.style.paddingLeft,j=a.style.paddingRight,u=a.style.paddingTop,g=a.style.paddingBottom,m=a.style.marginLeft,n=a.style.marginRight,o=a.style.marginTop,p=a.style.marginBottom,q=document.body.style.margin,r=document.documentElement.style.overflow,s=document.body.scroll,t=a.style.imageRendering;function b(){var f=document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;f||(document.removeEventListener("fullscreenchange",b),document.removeEventListener("webkitfullscreenchange",b),bz(a,e,d),a.style.width=l,a.style.height=k,a.style.backgroundColor=h,c||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=c,a.style.paddingLeft=i,a.style.paddingRight=j,a.style.paddingTop=u,a.style.paddingBottom=g,a.style.marginLeft=m,a.style.marginRight=n,a.style.marginTop=o,a.style.marginBottom=p,document.body.style.margin=q,document.documentElement.style.overflow=r,document.body.scroll=s,a.style.imageRendering=t,a.GLctxObject&&a.GLctxObject.GLctx.viewport(0,0,e,d),T.canvasResizedCallback&&y.get(T.canvasResizedCallback)(37,0,T.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",b),document.addEventListener("webkitfullscreenchange",b),b}function iV(b){for(var a=0;a<b.length;++a)b[a].node.style.display=b[a].displayState}T={};function cp(){var e=devicePixelRatio,h=T.canvasResolutionScaleMode==2,p=T.scaleMode==2,m=T.canvasResolutionScaleMode!=0,l=T.scaleMode==3,n=h?Math.round(innerWidth*e):innerWidth,k=h?Math.round(innerHeight*e):innerHeight,a=n,b=k,c=T.target,j=bw(c),f=j[0],g=j[1],d,o,i;p&&(a*g<f*b?b=a*g/f|0:a*g>f*b&&(a=b*f/g|0),d=(k-b)/2|0),m&&(bz(c,a,b),c.GLctxObject&&c.GLctxObject.GLctx.viewport(0,0,a,b)),h&&(d/=e,a/=e,b/=e,a=Math.round(a*1e4)/1e4,b=Math.round(b*1e4)/1e4,d=Math.round(d*1e4)/1e4),l?(o=(innerHeight-ao(c.style.height))/2,i=(innerWidth-ao(c.style.width))/2,aY(c,o,i)):(c.style.width=a+"px",c.style.height=b+"px",i=(innerWidth-a)/2,aY(c,d,i)),!l&&T.canvasResizedCallback&&y.get(T.canvasResizedCallback)(37,0,T.canvasResizedCallbackUserData)}function bD(a){return bt.indexOf(a)<0?a.getBoundingClientRect():{left:0,top:0}}function iU(a,d){var p=lf(a),b=d.softFullscreen?innerWidth:screen.width,c=d.softFullscreen?innerHeight:screen.height,j=bD(a),i=j.width,h=j.height,g=bw(a),f=g[0],e=g[1],l,m,n,k,o;return d.scaleMode==3?(aY(a,(c-h)/2,(b-i)/2),b=i,c=h):d.scaleMode==2&&(b*e<f*c?(l=e*b/f,aY(a,(c-l)/2,0),c=l):(m=f*c/e,aY(a,0,(b-m)/2),b=m)),a.style.backgroundColor||(a.style.backgroundColor="black"),document.body.style.backgroundColor||(document.body.style.backgroundColor="black"),a.style.width=b+"px",a.style.height=c+"px",d.filteringMode==1&&(a.style.imageRendering="optimizeSpeed",a.style.imageRendering="-moz-crisp-edges",a.style.imageRendering="-o-crisp-edges",a.style.imageRendering="-webkit-optimize-contrast",a.style.imageRendering="optimize-contrast",a.style.imageRendering="crisp-edges",a.style.imageRendering="pixelated"),n=d.canvasResolutionScaleMode==2?devicePixelRatio:1,d.canvasResolutionScaleMode!=0&&(k=b*n|0,o=c*n|0,bz(a,k,o),a.GLctxObject&&a.GLctxObject.GLctx.viewport(0,0,k,o)),p}function iM(b,c){var a,d,f;if(b=aq(b),!b)return-4;a={scaleMode:e[c>>2],canvasResolutionScaleMode:e[c+4>>2],filteringMode:e[c+8>>2],canvasResizedCallback:e[c+12>>2],canvasResizedCallbackUserData:e[c+16>>2],target:b,softFullscreen:!0},d=iU(b,a),document.documentElement.style.overflow="hidden",document.body.scroll="no",document.body.style.margin="0px",f=lj(b);function g(){d(),iV(f),removeEventListener("resize",cp),a.canvasResizedCallback&&y.get(a.canvasResizedCallback)(37,0,a.canvasResizedCallbackUserData),T=0}return aR=g,T=a,addEventListener("resize",cp),a.canvasResizedCallback&&y.get(a.canvasResizedCallback)(37,0,a.canvasResizedCallbackUserData),0}function cb(a){if(a.requestPointerLock)a.requestPointerLock();else if(a.msRequestPointerLock)a.msRequestPointerLock();else return document.body.requestPointerLock||document.body.msRequestPointerLock?-3:-1;return 0}function iK(){if(k.removeDeferredCalls(cb),document.exitPointerLock)document.exitPointerLock();else if(document.msExitPointerLock)document.msExitPointerLock();else return-1;return 0}function iH(){return aR&&aR(),aR=null,0}function iG(a){ax=!1,cO(a)}function iC(b){var a=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,c=!!a,d,f;e[b>>2]=c,d=k.getNodeNameForTarget(a),f=a&&a.id?a.id:"",z(d,b+4,128),z(f,b+132,128)}function iu(a){return a&&iC(a),!document.body||!document.body.requestPointerLock&&!document.body.mozRequestPointerLock&&!document.body.webkitRequestPointerLock&&!document.body.msRequestPointerLock?-1:0}function iq(a){var b=a.getExtension("ANGLE_instanced_arrays");if(b)return a.vertexAttribDivisor=function(a,c){b.vertexAttribDivisorANGLE(a,c)},a.drawArraysInstanced=function(a,c,d,e){b.drawArraysInstancedANGLE(a,c,d,e)},a.drawElementsInstanced=function(a,c,d,e,f){b.drawElementsInstancedANGLE(a,c,d,e,f)},1}function ip(a){var b=a.getExtension("OES_vertex_array_object");if(b)return a.createVertexArray=function(){return b.createVertexArrayOES()},a.deleteVertexArray=function(a){b.deleteVertexArrayOES(a)},a.bindVertexArray=function(a){b.bindVertexArrayOES(a)},a.isVertexArray=function(a){return b.isVertexArrayOES(a)},1}function ij(a){var b=a.getExtension("WEBGL_draw_buffers");if(b)return a.drawBuffers=function(a,c){b.drawBuffersWEBGL(a,c)},1}function ih(a){return!!(a.dibvbi=a.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function gZ(a){return!!(a.mdibvbi=a.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function gW(a){return!!(a.multiDrawWebgl=a.getExtension("WEBGL_multi_draw"))}d={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],programInfos:{},stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(a){d.lastError||(d.lastError=a)},getNewId:function(b){for(var c=d.counter++,a=b.length;a<c;a++)b[a]=null;return c},getSource:function(h,f,g,c){for(var d="",a=0,b;a<f;++a)b=c?e[c+a*4>>2]:-1,d+=G(e[g+a*4>>2],b<0?void 0:b);return d},createContext:function(c,a){var b,e;return a.renderViaOffscreenBackBuffer&&(a.preserveDrawingBuffer=!0),b=a.majorVersion>1?c.getContext("webgl2",a):c.getContext("webgl",a),!b?0:(e=d.registerContext(b,a),e)},enableOffscreenFramebufferAttributes:function(a){a.renderViaOffscreenBackBuffer=!0,a.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(b){var a=b.GLctx,g=a.createFramebuffer(),i,j,n,m,h,k,e,l,f,c;a.bindFramebuffer(36160,g),b.defaultFbo=g,b.defaultFboForbidBlitFramebuffer=!1,a.getContextAttributes().antialias?b.defaultFboForbidBlitFramebuffer=!0:(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/),i!=null&&(j=i[1],b.defaultFboForbidBlitFramebuffer=j<67)),b.defaultColorTarget=a.createTexture(),b.defaultDepthTarget=a.createRenderbuffer(),d.resizeOffscreenFramebuffer(b),a.bindTexture(3553,b.defaultColorTarget),a.texParameteri(3553,10241,9728),a.texParameteri(3553,10240,9728),a.texParameteri(3553,10242,33071),a.texParameteri(3553,10243,33071),a.texImage2D(3553,0,6408,a.canvas.width,a.canvas.height,0,6408,5121,null),a.framebufferTexture2D(36160,36064,3553,b.defaultColorTarget,0),a.bindTexture(3553,null),n=a.createRenderbuffer(),a.bindRenderbuffer(36161,b.defaultDepthTarget),a.renderbufferStorage(36161,33189,a.canvas.width,a.canvas.height),a.framebufferRenderbuffer(36160,36096,36161,b.defaultDepthTarget),a.bindRenderbuffer(36161,null),m=[-1,-1,-1,1,1,-1,1,1],h=a.createBuffer(),a.bindBuffer(34962,h),a.bufferData(34962,new Float32Array(m),35044),a.bindBuffer(34962,null),b.blitVB=h,k="attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }",e=a.createShader(35633),a.shaderSource(e,k),a.compileShader(e),l="varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }",f=a.createShader(35632),a.shaderSource(f,l),a.compileShader(f),c=a.createProgram(),a.attachShader(c,e),a.attachShader(c,f),a.linkProgram(c),b.blitProgram=c,b.blitPosLoc=a.getAttribLocation(c,"pos"),a.useProgram(c),a.uniform1i(a.getUniformLocation(c,"sampler"),0),a.useProgram(null),b.defaultVao=void 0,a.createVertexArray&&(b.defaultVao=a.createVertexArray(),a.bindVertexArray(b.defaultVao),a.enableVertexAttribArray(b.blitPosLoc),a.bindVertexArray(null))},resizeOffscreenFramebuffer:function(b){var a=b.GLctx,c,d;b.defaultColorTarget&&(c=a.getParameter(32873),a.bindTexture(3553,b.defaultColorTarget),a.texImage2D(3553,0,6408,a.drawingBufferWidth,a.drawingBufferHeight,0,6408,5121,null),a.bindTexture(3553,c)),b.defaultDepthTarget&&(d=a.getParameter(36007),a.bindRenderbuffer(36161,b.defaultDepthTarget),a.renderbufferStorage(36161,33189,a.drawingBufferWidth,a.drawingBufferHeight),a.bindRenderbuffer(36161,d))},blitOffscreenFramebuffer:function(b){var a=b.GLctx,k=a.getParameter(3089),t,s,r,q,p,i,j,n,l,u,d,h,f,c,e,g,o;if(k&&a.disable(3089),t=a.getParameter(36006),a.blitFramebuffer&&!b.defaultFboForbidBlitFramebuffer)a.bindFramebuffer(36008,b.defaultFbo),a.bindFramebuffer(36009,null),a.blitFramebuffer(0,0,a.canvas.width,a.canvas.height,0,0,a.canvas.width,a.canvas.height,16384,9728);else{a.bindFramebuffer(36160,null),s=a.getParameter(35725),a.useProgram(b.blitProgram),r=a.getParameter(34964),a.bindBuffer(34962,b.blitVB),q=a.getParameter(34016),a.activeTexture(33984),p=a.getParameter(32873),a.bindTexture(3553,b.defaultColorTarget),i=a.getParameter(3042),i&&a.disable(3042),j=a.getParameter(2884),j&&a.disable(2884),n=a.getParameter(2929),n&&a.disable(2929),l=a.getParameter(2960),l&&a.disable(2960);function m(){a.vertexAttribPointer(b.blitPosLoc,2,5126,!1,0,0),a.drawArrays(5,0,4)}if(b.defaultVao)u=a.getParameter(34229),a.bindVertexArray(b.defaultVao),m(),a.bindVertexArray(u);else{d={buffer:a.getVertexAttrib(b.blitPosLoc,34975),size:a.getVertexAttrib(b.blitPosLoc,34339),stride:a.getVertexAttrib(b.blitPosLoc,34340),type:a.getVertexAttrib(b.blitPosLoc,34341),normalized:a.getVertexAttrib(b.blitPosLoc,34922),pointer:a.getVertexAttribOffset(b.blitPosLoc,34373)},h=a.getParameter(34921),f=[];for(c=0;c<h;++c)e=a.getVertexAttrib(c,34338),g=c==b.blitPosLoc,e&&!g&&a.disableVertexAttribArray(c),!e&&g&&a.enableVertexAttribArray(c),f[c]=e;m();for(c=0;c<h;++c)e=f[c],o=c==b.blitPosLoc,e&&!o&&a.enableVertexAttribArray(c),!e&&o&&a.disableVertexAttribArray(c);a.bindBuffer(34962,d.buffer),a.vertexAttribPointer(b.blitPosLoc,d.size,d.type,d.normalized,d.stride,d.offset)}l&&a.enable(2960),n&&a.enable(2929),j&&a.enable(2884),i&&a.enable(3042),a.bindTexture(3553,p),a.activeTexture(q),a.bindBuffer(34962,r),a.useProgram(s)}a.bindFramebuffer(36160,t),k&&a.enable(3089)},registerContext:function(c,a){var e=d.getNewId(d.contexts),b={handle:e,attributes:a,version:a.majorVersion,GLctx:c};return c.canvas&&(c.canvas.GLctxObject=b),d.contexts[e]=b,(typeof a.enableExtensionsByDefault=="undefined"||a.enableExtensionsByDefault)&&d.initExtensions(b),a.renderViaOffscreenBackBuffer&&d.createOffscreenFramebuffer(b),e},makeContextCurrent:function(a){return d.currentContext=d.contexts[a],f.ctx=c=d.currentContext&&d.currentContext.GLctx,!(a&&!c)},getContext:function(a){return d.contexts[a]},deleteContext:function(a){d.currentContext===d.contexts[a]&&(d.currentContext=null),typeof k=="object"&&k.removeAllHandlersOnTarget(d.contexts[a].GLctx.canvas),d.contexts[a]&&d.contexts[a].GLctx.canvas&&(d.contexts[a].GLctx.canvas.GLctxObject=void 0),d.contexts[a]=null},initExtensions:function(b){var a,c;if(b||(b=d.currentContext),b.initExtensionsDone)return;b.initExtensionsDone=!0,a=b.GLctx,iq(a),ip(a),ij(a),ih(a),gZ(a),a.disjointTimerQueryExt=a.getExtension("EXT_disjoint_timer_query"),gW(a),c=a.getSupportedExtensions()||[],c.forEach(function(b){b.indexOf("lose_context")<0&&b.indexOf("debug")<0&&a.getExtension(b)})},populateUniformTable:function(k){for(var f=d.programs[k],j=d.programInfos[k]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},l=j.uniforms,m=c.getProgramParameter(f,35718),i=0,g,a,b,e,h,n;i<m;++i)if(g=c.getActiveUniform(f,i),a=g.name,j.maxUniformLength=Math.max(j.maxUniformLength,a.length+1),a.slice(-1)=="]"&&(a=a.slice(0,a.lastIndexOf("["))),b=c.getUniformLocation(f,a),b){e=d.getNewId(d.uniforms),l[a]=[g.size,e],d.uniforms[e]=b;for(h=1;h<g.size;++h)n=a+"["+h+"]",b=c.getUniformLocation(f,n),e=d.getNewId(d.uniforms),d.uniforms[e]=b}}};function gq(a){c.activeTexture(a)}function gp(a,b){c.attachShader(d.programs[a],d.shaders[b])}function go(a,b){c.beginQuery(a,d.queries[b])}function fI(a,b){c.disjointTimerQueryExt.beginQueryEXT(a,d.timerQueriesEXT[b])}function fE(a){c.beginTransformFeedback(a)}function fu(a,b,e){c.bindAttribLocation(d.programs[a],b,G(e))}function eZ(a,b){a==35051?c.currentPixelPackBufferBinding=b:a==35052&&(c.currentPixelUnpackBufferBinding=b),c.bindBuffer(a,d.buffers[b])}function eR(a,b,e){c.bindBufferBase(a,b,d.buffers[e])}function eQ(a,b,e,f,g){c.bindBufferRange(a,b,d.buffers[e],f,g)}function eI(b,a){c.bindFramebuffer(b,a?d.framebuffers[a]:d.currentContext.defaultFbo)}function ew(a,b){c.bindRenderbuffer(a,d.renderbuffers[b])}function ei(a,b){c.bindSampler(a,d.samplers[b])}function d_(a,b){c.bindTexture(a,d.textures[b])}function dl(a,b){c.bindTransformFeedback(a,d.transformFeedbacks[b])}function cU(a){c.bindVertexArray(d.vaos[a])}function cV(a){c.bindVertexArray(d.vaos[a])}function cW(a,b,d,e){c.blendColor(a,b,d,e)}function cX(a){c.blendEquation(a)}function cY(a,b){c.blendEquationSeparate(a,b)}function cZ(a,b){c.blendFunc(a,b)}function c_(a,b,d,e){c.blendFuncSeparate(a,b,d,e)}function c$(a,b,d,e,f,g,h,i,j,k){c.blitFramebuffer(a,b,d,e,f,g,h,i,j,k)}function da(e,b,a,f){d.currentContext.version>=2?a?c.bufferData(e,r,f,a,b):c.bufferData(e,b,f):c.bufferData(e,a?r.subarray(a,a+b):b,f)}function db(b,e,f,a){if(d.currentContext.version>=2){c.bufferSubData(b,e,r,a,f);return}c.bufferSubData(b,e,r.subarray(a,a+f))}function dc(a){return c.checkFramebufferStatus(a)}function dd(a){c.clear(a)}function de(a,b,d,e){c.clearBufferfi(a,b,d,e)}function df(a,b,d){c.clearBufferfv(a,b,j,d>>2)}function dg(a,b,d){c.clearBufferiv(a,b,e,d>>2)}function dh(a,b,d){c.clearBufferuiv(a,b,K,d>>2)}function di(a,b,d,e){c.clearColor(a,b,d,e)}function dj(a){c.clearDepth(a)}function dk(a){c.clearStencil(a)}function cD(a,b){return(a>>>0)+b*4294967296}function dm(a,b,e,f){return c.clientWaitSync(d.syncs[a],b,cD(e,f))}function dn(a,b,d,e){c.colorMask(!!a,!!b,!!d,!!e)}function dp(a){c.compileShader(d.shaders[a])}function dq(b,j,e,f,g,h,i,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexImage2D(b,j,e,f,g,h,i,a):c.compressedTexImage2D(b,j,e,f,g,h,r,a,i);return}c.compressedTexImage2D(b,j,e,f,g,h,a?r.subarray(a,a+i):null)}function dr(a,b,d,e,f,g,h,i,j){c.currentPixelUnpackBufferBinding?c.compressedTexImage3D(a,b,d,e,f,g,h,i,j):c.compressedTexImage3D(a,b,d,e,f,g,h,r,j,i)}function ds(b,e,k,f,g,h,i,j,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage2D(b,e,k,f,g,h,i,j,a):c.compressedTexSubImage2D(b,e,k,f,g,h,i,r,a,j);return}c.compressedTexSubImage2D(b,e,k,f,g,h,i,a?r.subarray(a,a+j):null)}function dt(a,b,d,e,f,g,h,i,j,k,l){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,k,l):c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,r,l,k)}function du(a,b,d,e,f){c.copyBufferSubData(a,b,d,e,f)}function dv(a,b,d,e,f,g,h,i){c.copyTexImage2D(a,b,d,e,f,g,h,i)}function dw(a,b,d,e,f,g,h,i){c.copyTexSubImage2D(a,b,d,e,f,g,h,i)}function dx(a,b,d,e,f,g,h,i,j){c.copyTexSubImage3D(a,b,d,e,f,g,h,i,j)}function dy(){var a=d.getNewId(d.programs),b=c.createProgram();return b.name=a,d.programs[a]=b,a}function dz(b){var a=d.getNewId(d.shaders);return d.shaders[a]=c.createShader(b),a}function dA(a){c.cullFace(a)}function dB(g,h){for(var b=0,a,f;b<g;b++){if(a=e[h+b*4>>2],f=d.buffers[a],!f)continue;c.deleteBuffer(f),f.name=0,d.buffers[a]=null,a==c.currentPixelPackBufferBinding&&(c.currentPixelPackBufferBinding=0),a==c.currentPixelUnpackBufferBinding&&(c.currentPixelUnpackBufferBinding=0)}}function dC(g,h){for(var a=0,f,b;a<g;++a){if(f=e[h+a*4>>2],b=d.framebuffers[f],!b)continue;c.deleteFramebuffer(b),b.name=0,d.framebuffers[f]=null}}function dD(a){if(!a)return;var b=d.programs[a];if(!b){d.recordError(1281);return}c.deleteProgram(b),b.name=0,d.programs[a]=null,d.programInfos[a]=null}function dE(g,h){for(var a=0,b,f;a<g;a++){if(b=e[h+a*4>>2],f=d.queries[b],!f)continue;c.deleteQuery(f),d.queries[b]=null}}function dF(g,h){for(var a=0,b,f;a<g;a++){if(b=e[h+a*4>>2],f=d.timerQueriesEXT[b],!f)continue;c.disjointTimerQueryExt.deleteQueryEXT(f),d.timerQueriesEXT[b]=null}}function dG(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.renderbuffers[f],!b)continue;c.deleteRenderbuffer(b),b.name=0,d.renderbuffers[f]=null}}function dH(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.samplers[f],!b)continue;c.deleteSampler(b),b.name=0,d.samplers[f]=null}}function dI(a){if(!a)return;var b=d.shaders[a];if(!b){d.recordError(1281);return}c.deleteShader(b),d.shaders[a]=null}function dJ(a){if(!a)return;var b=d.syncs[a];if(!b){d.recordError(1281);return}c.deleteSync(b),b.name=0,d.syncs[a]=null}function dK(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.textures[f],!b)continue;c.deleteTexture(b),b.name=0,d.textures[f]=null}}function dL(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.transformFeedbacks[f],!b)continue;c.deleteTransformFeedback(b),b.name=0,d.transformFeedbacks[f]=null}}function dM(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],c.deleteVertexArray(d.vaos[b]),d.vaos[b]=null}function dN(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],c.deleteVertexArray(d.vaos[b]),d.vaos[b]=null}function dO(a){c.depthFunc(a)}function dP(a){c.depthMask(!!a)}function dQ(a,b){c.depthRange(a,b)}function dR(a,b){c.detachShader(d.programs[a],d.shaders[b])}function dS(a){c.disable(a)}function dT(a){c.disableVertexAttribArray(a)}function dU(a,b,d){c.drawArrays(a,b,d)}function dV(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dW(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dX(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dY(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function dZ(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}ag=[];function d$(b,f){for(var d=ag[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function ea(b,f){for(var d=ag[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function eb(b,f){for(var d=ag[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function ec(a,b,d,e){c.drawElements(a,b,d,e)}function ed(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function ee(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function ef(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function eg(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function eh(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function cR(a,b,d,e){c.drawElements(a,b,d,e)}function ej(a,e,f,b,c,d){cR(a,b,c,d)}function ek(a){c.enable(a)}function el(a){c.enableVertexAttribArray(a)}function em(a){c.endQuery(a)}function en(a){c.disjointTimerQueryExt.endQueryEXT(a)}function eo(){c.endTransformFeedback()}function ep(e,f){var a=c.fenceSync(e,f),b;return a?(b=d.getNewId(d.syncs),a.name=b,d.syncs[b]=a,b):0}function eq(){c.finish()}function er(){c.flush()}function es(a,b,e,f){c.framebufferRenderbuffer(a,b,e,d.renderbuffers[f])}function et(a,b,e,f,g){c.framebufferTexture2D(a,b,e,d.textures[f],g)}function eu(a,b,e,f,g){c.framebufferTextureLayer(a,b,d.textures[e],f,g)}function ev(a){c.frontFace(a)}function V(j,h,i,g){for(var f=0,a,b;f<j;f++)a=c[i](),b=a&&d.getNewId(g),a?(a.name=b,g[b]=a):d.recordError(1282),e[h+f*4>>2]=b}function ex(a,b){V(a,b,"createBuffer",d.buffers)}function ey(a,b){V(a,b,"createFramebuffer",d.framebuffers)}function ez(a,b){V(a,b,"createQuery",d.queries)}function eA(g,h){for(var a=0,b,f;a<g;a++){if(b=c.disjointTimerQueryExt.createQueryEXT(),!b){for(d.recordError(1282);a<g;)e[h+a++*4>>2]=0;return}f=d.getNewId(d.timerQueriesEXT),b.name=f,d.timerQueriesEXT[f]=b,e[h+a*4>>2]=f}}function eB(a,b){V(a,b,"createRenderbuffer",d.renderbuffers)}function eC(a,b){V(a,b,"createSampler",d.samplers)}function eD(a,b){V(a,b,"createTexture",d.textures)}function eE(a,b){V(a,b,"createTransformFeedback",d.transformFeedbacks)}function eF(a,b){V(a,b,"createVertexArray",d.vaos)}function eG(a,b){V(a,b,"createVertexArray",d.vaos)}function eH(a){c.generateMipmap(a)}function cP(k,b,l,m,h,i,f,j){var a,g;b=d.programs[b],a=c[k](b,l),a&&(g=j&&z(a.name,j,m),h&&(e[h>>2]=g),i&&(e[i>>2]=a.size),f&&(e[f>>2]=a.type))}function eJ(a,b,c,d,e,f,g){cP("getActiveAttrib",a,b,c,d,e,f,g)}function eK(a,b,c,d,e,f,g){cP("getActiveUniform",a,b,c,d,e,f,g)}function eL(b,j,g,a,h){var f,i;if(b=d.programs[b],f=c.getActiveUniformBlockName(b,j),!f)return;h&&g>0?(i=z(f,h,g),a&&(e[a>>2]=i)):a&&(e[a>>2]=0)}function eM(g,h,i,f){var j,a,b;if(!f){d.recordError(1281);return}switch(g=d.programs[g],i){case 35393:j=c.getActiveUniformBlockName(g,h),e[f>>2]=j.length+1;return;default:if(a=c.getActiveUniformBlockParameter(g,h,i),!a)return;if(typeof a=="number")e[f>>2]=a;else for(b=0;b<a.length;b++)e[f+b*4>>2]=a[b]}}function eN(g,j,h,l,i){var f,a,b,k;if(!i){d.recordError(1281);return}if(j>0&&h==0){d.recordError(1281);return}g=d.programs[g],f=[];for(a=0;a<j;a++)f.push(e[h+a*4>>2]);if(b=c.getActiveUniforms(g,f,l),!b)return;k=b.length;for(a=0;a<k;a++)e[i+a*4>>2]=b[a]}function eO(j,f,h,i){var g=c.getAttachedShaders(d.programs[j]),b=g.length,a,k;b>f&&(b=f),e[h>>2]=b;for(a=0;a<b;++a)k=d.shaders.indexOf(g[a]),e[i+a*4>>2]=k}function eP(a,b){return c.getAttribLocation(d.programs[a],G(b))}function aX(a,b){K[a>>2]=b,K[a+4>>2]=(b-K[a>>2])/4294967296}function aF(i,g,h){var b,k,l,a,f;if(!g){d.recordError(1281);return}switch(b=void 0,i){case 36346:b=1;break;case 36344:h!=0&&h!=1&&d.recordError(1280);return;case 34814:case 36345:b=0;break;case 34466:k=c.getParameter(34467),b=k?k.length:0;break;case 33309:if(d.currentContext.version<2){d.recordError(1282);return}l=c.getSupportedExtensions()||[],b=2*l.length;break;case 33307:case 33308:if(d.currentContext.version<2){d.recordError(1280);return}b=i==33307?3:0;break}if(b===void 0)switch(a=c.getParameter(i),typeof a){case"number":b=a;break;case"boolean":b=a?1:0;break;case"string":d.recordError(1280);return;case"object":if(a===null)switch(i){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{b=0;break}default:{d.recordError(1280);return}}else if(a instanceof Float32Array||a instanceof Uint32Array||a instanceof Int32Array||a instanceof Array){for(f=0;f<a.length;++f)switch(h){case 0:e[g+f*4>>2]=a[f];break;case 2:j[g+f*4>>2]=a[f];break;case 4:v[g+f>>0]=a[f]?1:0;break}return}else try{b=a.name|0}catch(a){d.recordError(1280),A("GL_INVALID_ENUM in glGet"+h+"v: Unknown object returned from WebGL getParameter("+i+")! (error: "+a+")");return}break;default:d.recordError(1280),A("GL_INVALID_ENUM in glGet"+h+"v: Native code calling glGet"+h+"v("+i+") and it returns "+a+" of type "+typeof a+"!");return}switch(h){case 1:aX(g,b);break;case 0:e[g>>2]=b;break;case 2:j[g>>2]=b;break;case 4:v[g>>0]=b?1:0;break}}function eS(a,b){aF(a,b,4)}function eT(b,e,a){if(!a){d.recordError(1281);return}aX(a,c.getBufferParameter(b,e))}function eU(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getBufferParameter(b,f)}function eV(){var a=c.getError()||d.lastError;return d.lastError=0,a}function eW(a,b){aF(a,b,2)}function eX(a,b){return c.getFragDataLocation(d.programs[a],G(b))}function eY(b,d,f,g){var a=c.getFramebufferAttachmentParameter(b,d,f);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=a.name|0),e[g>>2]=a}function cM(g,i,f,h){var b,a;if(!f){d.recordError(1281);return}switch(b=c.getIndexedParameter(g,i),typeof b){case"boolean":a=b?1:0;break;case"number":a=b;break;case"object":if(b===null)switch(g){case 35983:case 35368:a=0;break;default:{d.recordError(1280);return}}else if(b instanceof WebGLBuffer)a=b.name|0;else{d.recordError(1280);return}break;default:d.recordError(1280);return}switch(h){case 1:aX(f,a);break;case 0:e[f>>2]=a;break;case 2:j[f>>2]=a;break;case 4:v[f>>0]=a?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+h}}function e_(a,b,c){cM(a,b,c,1)}function e$(a,b){aF(a,b,1)}function fa(a,b,c){cM(a,b,c,0)}function fb(a,b){aF(a,b,0)}function fc(j,h,i,f,g){var b,a;if(f<0){d.recordError(1281);return}if(!g){d.recordError(1281);return}if(b=c.getInternalformatParameter(j,h,i),b===null)return;for(a=0;a<b.length&&a<f;++a)e[g+a>>2]=b[a]}function fd(a,b,c,e,f){d.recordError(1282)}function fe(h,b,f,g){var a=c.getProgramInfoLog(d.programs[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?z(a,g,b):0,f&&(e[f>>2]=i)}function ff(b,h,g){var a,i,j,f,k,l,m;if(!g){d.recordError(1281);return}if(b>=d.counter){d.recordError(1281);return}if(a=d.programInfos[b],!a){d.recordError(1282);return}if(h==35716)i=c.getProgramInfoLog(d.programs[b]),i===null&&(i="(unknown error)"),e[g>>2]=i.length+1;else if(h==35719)e[g>>2]=a.maxUniformLength;else if(h==35722){if(a.maxAttributeLength==-1){b=d.programs[b],j=c.getProgramParameter(b,35721),a.maxAttributeLength=0;for(f=0;f<j;++f)k=c.getActiveAttrib(b,f),a.maxAttributeLength=Math.max(a.maxAttributeLength,k.name.length+1)}e[g>>2]=a.maxAttributeLength}else if(h==35381){if(a.maxUniformBlockNameLength==-1){b=d.programs[b],l=c.getProgramParameter(b,35382),a.maxUniformBlockNameLength=0;for(f=0;f<l;++f)m=c.getActiveUniformBlockName(b,f),a.maxUniformBlockNameLength=Math.max(a.maxUniformBlockNameLength,m.length+1)}e[g>>2]=a.maxUniformBlockNameLength}else e[g>>2]=c.getProgramParameter(d.programs[b],h)}function fg(g,h,e){var f,a,b;if(!e){d.recordError(1281);return}f=d.timerQueriesEXT[g],a=c.disjointTimerQueryExt.getQueryObjectEXT(f,h),typeof a=="boolean"?b=a?1:0:b=a,aX(e,b)}function fh(h,i,f){var g,a,b;if(!f){d.recordError(1281);return}g=d.timerQueriesEXT[h],a=c.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function fi(g,h,e){var f,a,b;if(!e){d.recordError(1281);return}f=d.timerQueriesEXT[g],a=c.disjointTimerQueryExt.getQueryObjectEXT(f,h),typeof a=="boolean"?b=a?1:0:b=a,aX(e,b)}function fj(h,i,f){var g,a,b;if(!f){d.recordError(1281);return}g=d.queries[h],a=c.getQueryParameter(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function fk(h,i,f){var g,a,b;if(!f){d.recordError(1281);return}g=d.timerQueriesEXT[h],a=c.disjointTimerQueryExt.getQueryObjectEXT(g,i),typeof a=="boolean"?b=a?1:0:b=a,e[f>>2]=b}function fl(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getQuery(b,f)}function fm(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.disjointTimerQueryExt.getQueryEXT(b,f)}function fn(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getRenderbufferParameter(b,f)}function fo(a,e,b){if(!b){d.recordError(1281);return}a=d.samplers[a],j[b>>2]=c.getSamplerParameter(a,e)}function fp(a,f,b){if(!b){d.recordError(1281);return}a=d.samplers[a],e[b>>2]=c.getSamplerParameter(a,f)}function fq(h,b,f,g){var a=c.getShaderInfoLog(d.shaders[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?z(a,g,b):0,f&&(e[f>>2]=i)}function fr(d,f,b,g){var a=c.getShaderPrecisionFormat(d,f);e[b>>2]=a.rangeMin,e[b+4>>2]=a.rangeMax,e[g>>2]=a.precision}function fs(h,a,b,f){var g=c.getShaderSource(d.shaders[h]),i;if(!g)return;i=a>0&&f?z(g,f,a):0,b&&(e[b>>2]=i)}function ft(f,g,b){var a,i,h,j;if(!b){d.recordError(1281);return}g==35716?(a=c.getShaderInfoLog(d.shaders[f]),a===null&&(a="(unknown error)"),i=a?a.length+1:0,e[b>>2]=i):g==35720?(h=c.getShaderSource(d.shaders[f]),j=h?h.length+1:0,e[b>>2]=j):e[b>>2]=c.getShaderParameter(d.shaders[f],g)}function ab(a){var b=ar(a)+1,c=R(b);return z(a,c,b),c}function fv(f){var a,g,i,b,h,j,e;if(d.stringCache[f])return d.stringCache[f];switch(f){case 7939:g=c.getSupportedExtensions()||[],g=g.concat(g.map(function(a){return"GL_"+a})),a=ab(g.join(" "));break;case 7936:case 7937:case 37445:case 37446:i=c.getParameter(f),i||d.recordError(1280),a=ab(i);break;case 7938:b=c.getParameter(7938),d.currentContext.version>=2?b="OpenGL ES 3.0 ("+b+")":b="OpenGL ES 2.0 ("+b+")",a=ab(b);break;case 35724:h=c.getParameter(35724),j=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,e=h.match(j),e!==null&&(e[1].length==3&&(e[1]=e[1]+"0"),h="OpenGL ES GLSL ES "+e[1]+" ("+h+")"),a=ab(h);break;default:return d.recordError(1280),0}return d.stringCache[f]=a,a}function fw(f,e){var a,b;if(d.currentContext.version<2)return d.recordError(1282),0;if(a=d.stringiCache[f],a)return e<0||e>=a.length?(d.recordError(1281),0):a[e];switch(f){case 7939:return b=c.getSupportedExtensions()||[],b=b.concat(b.map(function(a){return"GL_"+a})),b=b.map(function(a){return ab(a)}),a=d.stringiCache[f]=b,e<0||e>=a.length?(d.recordError(1281),0):a[e];default:return d.recordError(1280),0}}function fx(g,h,i,a,b){if(i<0){d.recordError(1281);return}if(!b){d.recordError(1281);return}var f=c.getSyncParameter(d.syncs[g],h);f!==null&&(e[b>>2]=f,a&&(e[a>>2]=1))}function fy(b,e,a){if(!a){d.recordError(1281);return}j[a>>2]=c.getTexParameter(b,e)}function fz(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getTexParameter(b,f)}function fA(f,l,g,b,h,i,j){var a,k;if(f=d.programs[f],a=c.getTransformFeedbackVarying(f,l),!a)return;j&&g>0?(k=z(a.name,j,g),b&&(e[b>>2]=k)):b&&(e[b>>2]=0),h&&(e[h>>2]=a.size),i&&(e[i>>2]=a.type)}function fB(a,b){return c.getUniformBlockIndex(d.programs[a],G(b))}function fC(h,i,j,f){var g,a,b,k;if(!f){d.recordError(1281);return}if(i>0&&(j==0||f==0)){d.recordError(1281);return}h=d.programs[h],g=[];for(a=0;a<i;a++)g.push(G(e[j+a*4>>2]));if(b=c.getUniformIndices(h,g),!b)return;k=b.length;for(a=0;a<k;a++)e[f+a*4>>2]=b[a]}function fD(f,a){var b,c,e;return a=G(a),b=0,a[a.length-1]=="]"&&(c=a.lastIndexOf("["),b=a[c+1]!="]"?ao(a.slice(c+1)):0,a=a.slice(0,c)),e=d.programInfos[f]&&d.programInfos[f].uniforms[a],e&&b>=0&&b<e[0]?e[1]+b:-1}function bU(h,i,f,g){var a,b;if(!f){d.recordError(1281);return}if(a=c.getUniform(d.programs[h],d.uniforms[i]),typeof a=="number"||typeof a=="boolean")switch(g){case 0:e[f>>2]=a;break;case 2:j[f>>2]=a;break}else for(b=0;b<a.length;b++)switch(g){case 0:e[f+b*4>>2]=a[b];break;case 2:j[f+b*4>>2]=a[b];break}}function fF(a,b,c){bU(a,b,c,2)}function fG(a,b,c){bU(a,b,c,0)}function fH(a,b,c){bU(a,b,c,0)}function be(i,g,f,h){var a,b;if(!f){d.recordError(1281);return}if(a=c.getVertexAttrib(i,g),g==34975)e[f>>2]=a&&a.name;else if(typeof a=="number"||typeof a=="boolean")switch(h){case 0:e[f>>2]=a;break;case 2:j[f>>2]=a;break;case 5:e[f>>2]=Math.fround(a);break}else for(b=0;b<a.length;b++)switch(h){case 0:e[f+b*4>>2]=a[b];break;case 2:j[f+b*4>>2]=a[b];break;case 5:e[f+b*4>>2]=Math.fround(a[b]);break}}function fJ(a,b,c){be(a,b,c,0)}function fK(a,b,c){be(a,b,c,0)}function fL(b,f,a){if(!a){d.recordError(1281);return}e[a>>2]=c.getVertexAttribOffset(b,f)}function fM(a,b,c){be(a,b,c,2)}function fN(a,b,c){be(a,b,c,5)}function fO(a,b){c.hint(a,b)}function fP(f,b,g){for(var d=ag[b],a=0;a<b;a++)d[a]=e[g+a*4>>2];c.invalidateFramebuffer(f,d)}function fQ(f,b,k,g,h,i,j){for(var d=ag[b],a=0;a<b;a++)d[a]=e[k+a*4>>2];c.invalidateSubFramebuffer(f,d,g,h,i,j)}function fR(b){var a=d.buffers[b];return a?c.isBuffer(a):0}function fS(a){return c.isEnabled(a)}function fT(b){var a=d.framebuffers[b];return a?c.isFramebuffer(a):0}function fU(a){return a=d.programs[a],!a?0:c.isProgram(a)}function fV(b){var a=d.queries[b];return a?c.isQuery(a):0}function fW(b){var a=d.timerQueriesEXT[b];return a?c.disjointTimerQueryExt.isQueryEXT(a):0}function fX(b){var a=d.renderbuffers[b];return a?c.isRenderbuffer(a):0}function fY(b){var a=d.samplers[b];return a?c.isSampler(a):0}function fZ(b){var a=d.shaders[b];return a?c.isShader(a):0}function f_(a){return c.isSync(d.syncs[a])}function f$(b){var a=d.textures[b];return a?c.isTexture(a):0}function ga(a){return c.isTransformFeedback(d.transformFeedbacks[a])}function gb(b){var a=d.vaos[b];return a?c.isVertexArray(a):0}function gc(b){var a=d.vaos[b];return a?c.isVertexArray(a):0}function gd(a){c.lineWidth(a)}function ge(a){c.linkProgram(d.programs[a]),d.populateUniformTable(a)}function gf(){c.pauseTransformFeedback()}function gg(a,b){a==3317&&(d.unpackAlignment=b),c.pixelStorei(a,b)}function gh(a,b){c.polygonOffset(a,b)}function gi(a,b,c,e){d.recordError(1280)}function gj(a,b,c){d.recordError(1280)}function gk(a,b){c.disjointTimerQueryExt.queryCounterEXT(d.timerQueriesEXT[a],b)}function gl(a){c.readBuffer(a)}function gm(g,c,d,e){var b,a;function f(b,a){return b+a-1&-a}return b=g*d,a=f(b,e),c*a}function gn(a){var b={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return b[a-6402]||1}function X(a){return a-=5120,a==0?v:a==1?r:a==2?Q:a==4?e:a==6?j:a==5||a==28922||a==28520||a==30779||a==30782?K:bh}function Y(a){return 31-Math.clz32(a.BYTES_PER_ELEMENT)}function aG(g,h,e,f,c,l){var b=X(g),a=Y(b),i=1<<a,j=gn(h)*i,k=gm(e,f,j,d.unpackAlignment);return b.subarray(c>>a,c+k>>a)}function gr(g,h,e,f,a,b,i){var j,k;if(d.currentContext.version>=2){c.currentPixelPackBufferBinding?c.readPixels(g,h,e,f,a,b,i):(j=X(b),c.readPixels(g,h,e,f,a,b,j,i>>Y(j)));return}if(k=aG(b,a,e,f,i,a),!k){d.recordError(1280);return}c.readPixels(g,h,e,f,a,b,k)}function gs(){}function gt(a,b,d,e){c.renderbufferStorage(a,b,d,e)}function gu(a,b,d,e,f){c.renderbufferStorageMultisample(a,b,d,e,f)}function gv(){c.resumeTransformFeedback()}function gw(a,b){c.sampleCoverage(a,!!b)}function gx(a,b,e){c.samplerParameterf(d.samplers[a],b,e)}function gy(a,b,e){var f=j[e>>2];c.samplerParameterf(d.samplers[a],b,f)}function gz(a,b,e){c.samplerParameteri(d.samplers[a],b,e)}function gA(a,b,f){var g=e[f>>2];c.samplerParameteri(d.samplers[a],b,g)}function gB(a,b,d,e){c.scissor(a,b,d,e)}function gC(){d.recordError(1280)}function gD(a,b,e,f){var g=d.getSource(a,b,e,f);c.shaderSource(d.shaders[a],g)}function gE(a,b,d){c.stencilFunc(a,b,d)}function gF(a,b,d,e){c.stencilFuncSeparate(a,b,d,e)}function gG(a){c.stencilMask(a)}function gH(a,b){c.stencilMaskSeparate(a,b)}function gI(a,b,d){c.stencilOp(a,b,d)}function gJ(a,b,d,e){c.stencilOpSeparate(a,b,d,e)}function gK(j,k,e,f,g,i,b,a,h){if(d.currentContext.version>=2){if(c.currentPixelUnpackBufferBinding)c.texImage2D(j,k,e,f,g,i,b,a,h);else if(h){var l=X(a);c.texImage2D(j,k,e,f,g,i,b,a,l,h>>Y(l))}else c.texImage2D(j,k,e,f,g,i,b,a,null);return}c.texImage2D(j,k,e,f,g,i,b,a,h?aG(a,b,f,g,h,e):null)}function gL(b,d,j,e,f,g,h,i,a,k){if(c.currentPixelUnpackBufferBinding)c.texImage3D(b,d,j,e,f,g,h,i,a,k);else if(k){var l=X(a);c.texImage3D(b,d,j,e,f,g,h,i,a,l,k>>Y(l))}else c.texImage3D(b,d,j,e,f,g,h,i,a,null)}function gM(a,b,d){c.texParameterf(a,b,d)}function gN(a,b,d){var e=j[d>>2];c.texParameterf(a,b,e)}function gO(a,b,d){c.texParameteri(a,b,d)}function gP(a,b,d){var f=e[d>>2];c.texParameteri(a,b,f)}function gQ(a,b,d,e,f){c.texStorage2D(a,b,d,e,f)}function gR(a,b,d,e,f,g){c.texStorage3D(a,b,d,e,f,g)}function gS(i,j,k,h,f,g,b,a,e){var l,m;if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.texSubImage2D(i,j,k,h,f,g,b,a,e):e?(l=X(a),c.texSubImage2D(i,j,k,h,f,g,b,a,l,e>>Y(l))):c.texSubImage2D(i,j,k,h,f,g,b,a,null);return}m=null,e&&(m=aG(a,b,f,g,e,0)),c.texSubImage2D(i,j,k,h,f,g,b,a,m)}function gT(b,d,e,k,f,g,h,i,j,a,l){if(c.currentPixelUnpackBufferBinding)c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,l);else if(l){var m=X(a);c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,m,l>>Y(m))}else c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,null)}function gU(b,g,h,i){var f,a;b=d.programs[b],f=[];for(a=0;a<g;a++)f.push(G(e[h+a*4>>2]));c.transformFeedbackVaryings(b,f,i)}function gV(a,b){c.uniform1f(d.uniforms[a],b)}N=[];function gX(g,a,e){var f,b;if(d.currentContext.version>=2){c.uniform1fv(d.uniforms[g],j,e>>2,a);return}if(a<=288){f=N[a-1];for(b=0;b<a;++b)f[b]=j[e+4*b>>2]}else f=j.subarray(e>>2,e+a*4>>2);c.uniform1fv(d.uniforms[g],f)}function gY(a,b){c.uniform1i(d.uniforms[a],b)}ap=[];function g_(h,a,f){var g,b;if(d.currentContext.version>=2){c.uniform1iv(d.uniforms[h],e,f>>2,a);return}if(a<=288){g=ap[a-1];for(b=0;b<a;++b)g[b]=e[f+4*b>>2]}else g=e.subarray(f>>2,f+a*4>>2);c.uniform1iv(d.uniforms[h],g)}function g$(a,b){c.uniform1ui(d.uniforms[a],b)}function ha(a,b,e){c.uniform1uiv(d.uniforms[a],K,e>>2,b)}function hb(a,b,e){c.uniform2f(d.uniforms[a],b,e)}function hc(g,b,e){var f,a;if(d.currentContext.version>=2){c.uniform2fv(d.uniforms[g],j,e>>2,b*2);return}if(b<=144){f=N[2*b-1];for(a=0;a<2*b;a+=2)f[a]=j[e+4*a>>2],f[a+1]=j[e+(4*a+4)>>2]}else f=j.subarray(e>>2,e+b*8>>2);c.uniform2fv(d.uniforms[g],f)}function hd(a,b,e){c.uniform2i(d.uniforms[a],b,e)}function he(h,b,f){var g,a;if(d.currentContext.version>=2){c.uniform2iv(d.uniforms[h],e,f>>2,b*2);return}if(b<=144){g=ap[2*b-1];for(a=0;a<2*b;a+=2)g[a]=e[f+4*a>>2],g[a+1]=e[f+(4*a+4)>>2]}else g=e.subarray(f>>2,f+b*8>>2);c.uniform2iv(d.uniforms[h],g)}function hf(a,b,e){c.uniform2ui(d.uniforms[a],b,e)}function hg(a,b,e){c.uniform2uiv(d.uniforms[a],K,e>>2,b*2)}function hh(a,b,e,f){c.uniform3f(d.uniforms[a],b,e,f)}function hi(g,f,b){var e,a;if(d.currentContext.version>=2){c.uniform3fv(d.uniforms[g],j,b>>2,f*3);return}if(f<=96){e=N[3*f-1];for(a=0;a<3*f;a+=3)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2]}else e=j.subarray(b>>2,b+f*12>>2);c.uniform3fv(d.uniforms[g],e)}function hj(a,b,e,f){c.uniform3i(d.uniforms[a],b,e,f)}function hk(h,g,b){var f,a;if(d.currentContext.version>=2){c.uniform3iv(d.uniforms[h],e,b>>2,g*3);return}if(g<=96){f=ap[3*g-1];for(a=0;a<3*g;a+=3)f[a]=e[b+4*a>>2],f[a+1]=e[b+(4*a+4)>>2],f[a+2]=e[b+(4*a+8)>>2]}else f=e.subarray(b>>2,b+g*12>>2);c.uniform3iv(d.uniforms[h],f)}function hl(a,b,e,f){c.uniform3ui(d.uniforms[a],b,e,f)}function hm(a,b,e){c.uniform3uiv(d.uniforms[a],K,e>>2,b*3)}function hn(a,b,e,f,g){c.uniform4f(d.uniforms[a],b,e,f,g)}function ho(i,f,g){var b,h,a,e;if(d.currentContext.version>=2){c.uniform4fv(d.uniforms[i],j,g>>2,f*4);return}if(f<=72){b=N[4*f-1],h=j,g>>=2;for(a=0;a<4*f;a+=4)e=g+a,b[a]=h[e],b[a+1]=h[e+1],b[a+2]=h[e+2],b[a+3]=h[e+3]}else b=j.subarray(g>>2,g+f*16>>2);c.uniform4fv(d.uniforms[i],b)}function hp(a,b,e,f,g){c.uniform4i(d.uniforms[a],b,e,f,g)}function hq(h,g,b){var f,a;if(d.currentContext.version>=2){c.uniform4iv(d.uniforms[h],e,b>>2,g*4);return}if(g<=72){f=ap[4*g-1];for(a=0;a<4*g;a+=4)f[a]=e[b+4*a>>2],f[a+1]=e[b+(4*a+4)>>2],f[a+2]=e[b+(4*a+8)>>2],f[a+3]=e[b+(4*a+12)>>2]}else f=e.subarray(b>>2,b+g*16>>2);c.uniform4iv(d.uniforms[h],f)}function hr(a,b,e,f,g){c.uniform4ui(d.uniforms[a],b,e,f,g)}function hs(a,b,e){c.uniform4uiv(d.uniforms[a],K,e>>2,b*4)}function ht(a,b,e){a=d.programs[a],c.uniformBlockBinding(a,b,e)}function hu(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix2fv(d.uniforms[g],!!h,j,b>>2,f*4);return}if(f<=72){e=N[4*f-1];for(a=0;a<4*f;a+=4)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2]}else e=j.subarray(b>>2,b+f*16>>2);c.uniformMatrix2fv(d.uniforms[g],!!h,e)}function hv(a,b,e,f){c.uniformMatrix2x3fv(d.uniforms[a],!!e,j,f>>2,b*6)}function hw(a,b,e,f){c.uniformMatrix2x4fv(d.uniforms[a],!!e,j,f>>2,b*8)}function hx(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix3fv(d.uniforms[g],!!h,j,b>>2,f*9);return}if(f<=32){e=N[9*f-1];for(a=0;a<9*f;a+=9)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2],e[a+4]=j[b+(4*a+16)>>2],e[a+5]=j[b+(4*a+20)>>2],e[a+6]=j[b+(4*a+24)>>2],e[a+7]=j[b+(4*a+28)>>2],e[a+8]=j[b+(4*a+32)>>2]}else e=j.subarray(b>>2,b+f*36>>2);c.uniformMatrix3fv(d.uniforms[g],!!h,e)}function hy(a,b,e,f){c.uniformMatrix3x2fv(d.uniforms[a],!!e,j,f>>2,b*6)}function hz(a,b,e,f){c.uniformMatrix3x4fv(d.uniforms[a],!!e,j,f>>2,b*12)}function hA(k,h,i,g){var b,f,a,e;if(d.currentContext.version>=2){c.uniformMatrix4fv(d.uniforms[k],!!i,j,g>>2,h*16);return}if(h<=18){b=N[16*h-1],f=j,g>>=2;for(a=0;a<16*h;a+=16)e=g+a,b[a]=f[e],b[a+1]=f[e+1],b[a+2]=f[e+2],b[a+3]=f[e+3],b[a+4]=f[e+4],b[a+5]=f[e+5],b[a+6]=f[e+6],b[a+7]=f[e+7],b[a+8]=f[e+8],b[a+9]=f[e+9],b[a+10]=f[e+10],b[a+11]=f[e+11],b[a+12]=f[e+12],b[a+13]=f[e+13],b[a+14]=f[e+14],b[a+15]=f[e+15]}else b=j.subarray(g>>2,g+h*64>>2);c.uniformMatrix4fv(d.uniforms[k],!!i,b)}function hB(a,b,e,f){c.uniformMatrix4x2fv(d.uniforms[a],!!e,j,f>>2,b*8)}function hC(a,b,e,f){c.uniformMatrix4x3fv(d.uniforms[a],!!e,j,f>>2,b*12)}function hD(a){c.useProgram(d.programs[a])}function hE(a){c.validateProgram(d.programs[a])}function hF(a,b){c.vertexAttrib1f(a,b)}function hG(a,b){c.vertexAttrib1f(a,j[b>>2])}function hH(a,b,d){c.vertexAttrib2f(a,b,d)}function hI(b,a){c.vertexAttrib2f(b,j[a>>2],j[a+4>>2])}function hJ(a,b,d,e){c.vertexAttrib3f(a,b,d,e)}function hK(b,a){c.vertexAttrib3f(b,j[a>>2],j[a+4>>2],j[a+8>>2])}function hL(a,b,d,e,f){c.vertexAttrib4f(a,b,d,e,f)}function hM(b,a){c.vertexAttrib4f(b,j[a>>2],j[a+4>>2],j[a+8>>2],j[a+12>>2])}function hN(a,b){c.vertexAttribDivisor(a,b)}function hO(a,b){c.vertexAttribDivisor(a,b)}function hP(a,b){c.vertexAttribDivisor(a,b)}function hQ(a,b){c.vertexAttribDivisor(a,b)}function hR(a,b){c.vertexAttribDivisor(a,b)}function hS(a,b,d,e,f){c.vertexAttribI4i(a,b,d,e,f)}function hT(b,a){c.vertexAttribI4i(b,e[a>>2],e[a+4>>2],e[a+8>>2],e[a+12>>2])}function hU(a,b,d,e,f){c.vertexAttribI4ui(a,b,d,e,f)}function hV(b,a){c.vertexAttribI4ui(b,K[a>>2],K[a+4>>2],K[a+8>>2],K[a+12>>2])}function hW(a,b,d,e,f){c.vertexAttribIPointer(a,b,d,e,f)}function hX(a,b,d,e,f,g){c.vertexAttribPointer(a,b,d,!!e,f,g)}function hY(a,b,d,e){c.viewport(a,b,d,e)}function hZ(a,b,e,f){c.waitSync(d.syncs[a],b,cD(e,f))}function h_(a,b){throw P(a,b||1),"longjmp"}function h$(a,b){return h_(a,b)}function ia(b,a,c){r.copyWithin(b,a,a+c)}function ib(a,b){if(a=aq(a),!a)return-4;if(!a.requestPointerLock&&!a.msRequestPointerLock)return-1;var c=k.canPerformEventHandlerRequests();return c?cb(a):b?(k.deferCall(cb,2,[a]),1):-2}function ic(){return r.length}function id(a){try{return aU.grow(a-bb.byteLength+65535>>>16),cB(aU.buffer),1}catch(a){}}function ie(a){var e=ic(),d=2147483648,b,c,f,g;if(a>d)return!1;for(b=1;b<=4;b*=2)if(c=e*(1+.2/b),c=Math.min(c,a+100663296),f=Math.min(d,om(Math.max(a,c),65536)),g=id(f),g)return!0;return!1}function ig(a){var c=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,d=!!c,b,f,g;e[a>>2]=d,e[a+4>>2]=k.fullscreenEnabled(),b=d?c:k.previousFullscreenElement,f=k.getNodeNameForTarget(b),g=b&&b.id?b.id:"",z(f,a+8,128),z(g,a+136,128),e[a+264>>2]=b?b.clientWidth:0,e[a+268>>2]=b?b.clientHeight:0,e[a+272>>2]=screen.width,e[a+276>>2]=screen.height,d&&(k.previousFullscreenElement=c)}function cC(d,g,h,c,e,f,i){var a,b;k.fullscreenChangeEvent||(k.fullscreenChangeEvent=R(280)),a=function(b){var d=b||event,a=k.fullscreenChangeEvent;ig(a),y.get(c)(e,a,g)&&d.preventDefault()},b={target:d,eventTypeString:f,callbackfunc:c,handlerFunc:a,useCapture:h},k.registerOrRemoveHandler(b)}function ii(a,b,c,d,e){return k.fullscreenEnabled()?(a=aq(a),!a)?-4:(cC(a,b,c,d,19,"fullscreenchange",e),cC(a,b,c,d,19,"webkitfullscreenchange",e),0):-1}function bV(d,h,i,c,f,g,j){var a,b;k.keyEvent||(k.keyEvent=R(164)),a=function(a){var d=k.keyEvent,b=d>>2;e[b+0]=a.location,e[b+1]=a.ctrlKey,e[b+2]=a.shiftKey,e[b+3]=a.altKey,e[b+4]=a.metaKey,e[b+5]=a.repeat,e[b+6]=a.charCode,e[b+7]=a.keyCode,e[b+8]=a.which,z(a.key||"",d+36,32),z(a.code||"",d+68,32),z(a.char||"",d+100,32),z(a.locale||"",d+132,32),y.get(c)(f,d,h)&&a.preventDefault()},b={target:aq(d),allowsDeferredCalls:!0,eventTypeString:g,callbackfunc:c,handlerFunc:a,useCapture:i},k.registerOrRemoveHandler(b)}function ik(a,b,c,d,e){return bV(a,b,c,d,2,"keydown",e),0}function il(a,b,c,d,e){return bV(a,b,c,d,1,"keypress",e),0}function im(a,b,c,d,e){return bV(a,b,c,d,3,"keyup",e),0}function io(a,b,c){var d=y.get(a);cc(d,b,c)}function cA(d,a,f){var b=d>>2,c;e[b+0]=a.screenX,e[b+1]=a.screenY,e[b+2]=a.clientX,e[b+3]=a.clientY,e[b+4]=a.ctrlKey,e[b+5]=a.shiftKey,e[b+6]=a.altKey,e[b+7]=a.metaKey,Q[b*2+16]=a.button,Q[b*2+17]=a.buttons,e[b+9]=a.movementX,e[b+10]=a.movementY,c=bD(f),e[b+11]=a.clientX-c.left,e[b+12]=a.clientY-c.top}function bQ(a,g,h,e,f,b,i){var c,d;k.mouseEvent||(k.mouseEvent=R(64)),a=aq(a),c=function(c){var b=c||event;cA(k.mouseEvent,b,a),y.get(e)(f,k.mouseEvent,g)&&b.preventDefault()},d={target:a,allowsDeferredCalls:b!="mousemove"&&b!="mouseenter"&&b!="mouseleave",eventTypeString:b,callbackfunc:e,handlerFunc:c,useCapture:h},k.registerOrRemoveHandler(d)}function ir(a,b,c,d,e){return bQ(a,b,c,d,5,"mousedown",e),0}function is(a,b,c,d,e){return bQ(a,b,c,d,8,"mousemove",e),0}function it(a,b,c,d,e){return bQ(a,b,c,d,6,"mouseup",e),0}function bm(a,h,i,f,g,b,j){var c,d;k.touchEvent||(k.touchEvent=R(1684)),a=aq(a),c=function(j){for(var m={},i=j.touches,c=0,l,n,b,o,p,d;c<i.length;++c)l=i[c],m[l.identifier]=l;i=j.changedTouches;for(c=0;c<i.length;++c)l=i[c],l.isChanged=1,m[l.identifier]=l;i=j.targetTouches;for(c=0;c<i.length;++c)m[i[c].identifier].onTarget=1;n=k.touchEvent,b=n>>2,e[b+1]=j.ctrlKey,e[b+2]=j.shiftKey,e[b+3]=j.altKey,e[b+4]=j.metaKey,b+=5,o=bD(a),p=0;for(c in m)if(d=m[c],e[b+0]=d.identifier,e[b+1]=d.screenX,e[b+2]=d.screenY,e[b+3]=d.clientX,e[b+4]=d.clientY,e[b+5]=d.pageX,e[b+6]=d.pageY,e[b+7]=d.isChanged,e[b+8]=d.onTarget,e[b+9]=d.clientX-o.left,e[b+10]=d.clientY-o.top,b+=13,++p>31)break;e[n>>2]=p,y.get(f)(g,n,h)&&j.preventDefault()},d={target:a,allowsDeferredCalls:b=="touchstart"||b=="touchend",eventTypeString:b,callbackfunc:f,handlerFunc:c,useCapture:i},k.registerOrRemoveHandler(d)}function iv(a,b,c,d,e){return bm(a,b,c,d,25,"touchcancel",e),0}function iw(a,b,c,d,e){return bm(a,b,c,d,23,"touchend",e),0}function ix(a,b,c,d,e){return bm(a,b,c,d,24,"touchmove",e),0}function iy(a,b,c,d,e){return bm(a,b,c,d,22,"touchstart",e),0}function iz(a,h,i,d,f,g,j){var b,c;k.wheelEvent||(k.wheelEvent=R(96)),b=function(g){var b=g||event,c=k.wheelEvent;cA(c,b,a),an[c+64>>3]=b.deltaX,an[c+72>>3]=b.deltaY,an[c+80>>3]=b.deltaZ,e[c+88>>2]=b.deltaMode,y.get(d)(f,c,h)&&b.preventDefault()},c={target:a,allowsDeferredCalls:!0,eventTypeString:g,callbackfunc:d,handlerFunc:b,useCapture:i},k.registerOrRemoveHandler(c)}function iA(a,b,c,d,e){return a=aq(a),typeof a.onwheel!="undefined"?(iz(a,b,c,d,9,"wheel",e),0):-1}function iB(a){for(var b=am();am()-b<a;);}cx=["default","low-power","high-performance"];function iD(f,g){var a=g>>2,h=e[a+(24>>2)],b={alpha:!!e[a+(0>>2)],depth:!!e[a+(4>>2)],stencil:!!e[a+(8>>2)],antialias:!!e[a+(12>>2)],premultipliedAlpha:!!e[a+(16>>2)],preserveDrawingBuffer:!!e[a+(20>>2)],powerPreference:cx[h],failIfMajorPerformanceCaveat:!!e[a+(28>>2)],majorVersion:e[a+(32>>2)],minorVersion:e[a+(36>>2)],enableExtensionsByDefault:e[a+(40>>2)],explicitSwapControl:e[a+(44>>2)],proxyContextToMainThread:e[a+(48>>2)],renderViaOffscreenBackBuffer:e[a+(52>>2)]},c=ca(f),i;return c?(b.explicitSwapControl&&!b.renderViaOffscreenBackBuffer&&(b.renderViaOffscreenBackBuffer=!0),i=d.createContext(c,b),i):0}function iE(a,b){return iD(a,b)}function iF(){return d.currentContext?d.currentContext.handle:0}function bN(){return iF()}f._emscripten_webgl_get_current_context=bN;function cv(a){var b=d.makeContextCurrent(a);return b?0:-5}f._emscripten_webgl_make_context_current=cv;function iI(a){d.currentContext==a&&(d.currentContext=0),d.deleteContext(a)}function iJ(c){for(var a=c>>2,b=0;b<56>>2;++b)e[a+b]=0;e[a+(0>>2)]=e[a+(4>>2)]=e[a+(12>>2)]=e[a+(16>>2)]=e[a+(32>>2)]=e[a+(40>>2)]=1}bJ={};function iL(){return bn||"./this.program"}function aS(){var d,b,a,c;if(!aS.strings){d=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:d,_:iL()};for(a in bJ)b[a]=bJ[a];c=[];for(a in b)c.push(a+"="+b[a]);aS.strings=c}return aS.strings}function iN(c,d){try{var a=0;return aS().forEach(function(b,g){var f=d+a;e[c+g*4>>2]=f,cE(b,f),a+=b.length+1}),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}function iO(d,f){var a,c;try{return a=aS(),e[d>>2]=a.length,c=0,a.forEach(function(a){c+=a.length+1}),e[f>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}function iP(a){try{var c=q.getStreamFromFD(a);return b.close(c),0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}function iQ(d,e){var a,c;try{return a=q.getStreamFromFD(d),c=a.tty?2:b.isDir(a.mode)?3:b.isLink(a.mode)?7:4,v[e>>0]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}function iR(d,f,g,h){var a,c;try{return a=q.getStreamFromFD(d),c=q.doReadv(a,f,g),e[h>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}function iS(i,j,k,g,h){var a,f,c,d;try{return a=q.getStreamFromFD(i),f=4294967296,c=k*f+(j>>>0),d=9007199254740992,c<=-d||c>=d?-61:(b.llseek(a,c,g),F=[a.position>>>0,(o=a.position,+Math.abs(o)>=1?o>0?(Math.min(+Math.floor(o/4294967296),4294967295)|0)>>>0:~~+Math.ceil((o-+(~~o>>>0))/4294967296)>>>0:0)],e[h>>2]=F[0],e[h+4>>2]=F[1],a.getdents&&c===0&&g===0&&(a.getdents=null),0)}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}function iT(d,f,g,h){var a,c;try{return a=q.getStreamFromFD(d),c=q.doWritev(a,f,g),e[h>>2]=c,0}catch(a){return(typeof b=="undefined"||!(a instanceof b.ErrnoError))&&m(a),a.errno}}O={};function aN(a){var c=256,b;return aN.buffer||(aN.buffer=R(c),O[0]="Success",O[""+-1]="Invalid value for 'ai_flags' field",O[""+-2]="NAME or SERVICE is unknown",O[""+-3]="Temporary failure in name resolution",O[""+-4]="Non-recoverable failure in name res",O[""+-6]="'ai_family' not supported",O[""+-7]="'ai_socktype' not supported",O[""+-8]="SERVICE not supported for 'ai_socktype'",O[""+-10]="Memory allocation failure",O[""+-11]="System error returned in 'errno'",O[""+-12]="Argument buffer overflow"),b="Unknown error",a in O&&(O[a].length>c-1?b="Message too long":b=O[a]),cE(b,aN.buffer),aN.buffer}function iW(){return cK()|0}function iX(d,k,h,l){var b=0,j=0,g=0,a=0,c=0,f=0,i;function m(b,i,j,k,c,h){var f=b===10?28:16,d,a,g;return c=b===10?cj(c):bx(c),d=R(f),g=bg(d,b,c,h),ae(!g),a=R(32),e[a+4>>2]=b,e[a+8>>2]=i,e[a+12>>2]=j,e[a+24>>2]=k,e[a+20>>2]=d,b===10?e[a+16>>2]=28:e[a+16>>2]=16,e[a+28>>2]=0,a}if(h&&(g=e[h>>2],a=e[h+4>>2],c=e[h+8>>2],f=e[h+12>>2]),c&&!f&&(f=c===2?17:6),!c&&f&&(c=f===17?2:1),f===0&&(f=6),c===0&&(c=1),!d&&!k)return-2;if(g&~(1|2|4|1024|8|16|32))return-1;if(h!==0&&e[h>>2]&2&&!d)return-1;if(g&32)return-2;if(c!==0&&c!==1&&c!==2)return-7;if(a!==0&&a!==2&&a!==10)return-6;if(k)if(k=G(k),j=parseInt(k,10),isNaN(j))return g&1024?-2:-8;if(!d)return a===0&&(a=2),(g&1)===0&&(a===2?b=aV(2130706433):b=[0,0,0,1]),i=m(a,c,f,null,b,j),e[l>>2]=i,0;if(d=G(d),b=bd(d),b!==null)if(a===0||a===2)a=2;else if(a===10&&g&8)b=[0,0,aV(65535),b],a=10;else return-2;else if(b=bA(d),b!==null)if(a===0||a===10)a=10;else return-2;return b!=null?(i=m(a,c,f,d,b,j),e[l>>2]=i,0):g&4?-2:(d=S.lookup_name(d),b=bd(d),a===0?a=2:a===10&&(b=[0,0,aV(65535),b]),i=m(a,c,f,null,b,j),e[l>>2]=i,0)}function iY(m,l,j,d,i,f,h){var a=ci(m,l),e,c,b,k,g;if(a.errno)return-6;if(e=a.port,c=a.addr,b=!1,j&&d){if(h&1||!(k=S.lookup_addr(c))){if(h&8)return-2}else c=k;g=z(c,j,d),g+1>=d&&(b=!0)}return i&&f&&(e=""+e,g=z(e,i,f),g+1>=f&&(b=!0)),b?-12:0}function iZ(a){var b=Date.now();return e[a>>2]=b/1e3|0,e[a+4>>2]=b%1e3*1e3|0,0}function i_(a){c.activeTexture(a)}function i$(a,b){c.attachShader(d.programs[a],d.shaders[b])}function ja(a){c.beginTransformFeedback(a)}function jb(a,b,e){c.bindAttribLocation(d.programs[a],b,G(e))}function jc(a,b){a==35051?c.currentPixelPackBufferBinding=b:a==35052&&(c.currentPixelUnpackBufferBinding=b),c.bindBuffer(a,d.buffers[b])}function jd(a,b,e){c.bindBufferBase(a,b,d.buffers[e])}function je(b,a){c.bindFramebuffer(b,a?d.framebuffers[a]:d.currentContext.defaultFbo)}function jf(a,b){c.bindRenderbuffer(a,d.renderbuffers[b])}function jg(a,b){c.bindTexture(a,d.textures[b])}function jh(a){c.bindVertexArray(d.vaos[a])}function ji(a){c.blendEquation(a)}function jj(a,b){c.blendFunc(a,b)}function jk(a,b,d,e){c.blendFuncSeparate(a,b,d,e)}function jl(a,b,d,e,f,g,h,i,j,k){c.blitFramebuffer(a,b,d,e,f,g,h,i,j,k)}function jm(e,b,a,f){d.currentContext.version>=2?a?c.bufferData(e,r,f,a,b):c.bufferData(e,b,f):c.bufferData(e,a?r.subarray(a,a+b):b,f)}function jn(b,e,f,a){if(d.currentContext.version>=2){c.bufferSubData(b,e,r,a,f);return}c.bufferSubData(b,e,r.subarray(a,a+f))}function jo(a){return c.checkFramebufferStatus(a)}function jp(a){c.clear(a)}function jq(a,b,d){c.clearBufferfv(a,b,j,d>>2)}function jr(a,b,d,e){c.clearColor(a,b,d,e)}function js(a){c.clearDepth(a)}function jt(a,b,d,e){c.colorMask(!!a,!!b,!!d,!!e)}function ju(a){c.compileShader(d.shaders[a])}function jv(b,j,e,f,g,h,i,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexImage2D(b,j,e,f,g,h,i,a):c.compressedTexImage2D(b,j,e,f,g,h,r,a,i);return}c.compressedTexImage2D(b,j,e,f,g,h,a?r.subarray(a,a+i):null)}function jw(a,b,d,e,f,g,h,i,j){c.currentPixelUnpackBufferBinding?c.compressedTexImage3D(a,b,d,e,f,g,h,i,j):c.compressedTexImage3D(a,b,d,e,f,g,h,r,j,i)}function jx(b,e,k,f,g,h,i,j,a){if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage2D(b,e,k,f,g,h,i,j,a):c.compressedTexSubImage2D(b,e,k,f,g,h,i,r,a,j);return}c.compressedTexSubImage2D(b,e,k,f,g,h,i,a?r.subarray(a,a+j):null)}function jy(a,b,d,e,f,g,h,i,j,k,l){c.currentPixelUnpackBufferBinding?c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,k,l):c.compressedTexSubImage3D(a,b,d,e,f,g,h,i,j,r,l,k)}function jz(a,b,d,e,f){c.copyBufferSubData(a,b,d,e,f)}function jA(a,b,d,e,f,g,h,i){c.copyTexSubImage2D(a,b,d,e,f,g,h,i)}function jB(){var a=d.getNewId(d.programs),b=c.createProgram();return b.name=a,d.programs[a]=b,a}function jC(b){var a=d.getNewId(d.shaders);return d.shaders[a]=c.createShader(b),a}function jD(a){c.cullFace(a)}function jE(g,h){for(var b=0,a,f;b<g;b++){if(a=e[h+b*4>>2],f=d.buffers[a],!f)continue;c.deleteBuffer(f),f.name=0,d.buffers[a]=null,a==c.currentPixelPackBufferBinding&&(c.currentPixelPackBufferBinding=0),a==c.currentPixelUnpackBufferBinding&&(c.currentPixelUnpackBufferBinding=0)}}function jF(g,h){for(var a=0,f,b;a<g;++a){if(f=e[h+a*4>>2],b=d.framebuffers[f],!b)continue;c.deleteFramebuffer(b),b.name=0,d.framebuffers[f]=null}}function jG(a){if(!a)return;var b=d.programs[a];if(!b){d.recordError(1281);return}c.deleteProgram(b),b.name=0,d.programs[a]=null,d.programInfos[a]=null}function jH(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.renderbuffers[f],!b)continue;c.deleteRenderbuffer(b),b.name=0,d.renderbuffers[f]=null}}function jI(a){if(!a)return;var b=d.shaders[a];if(!b){d.recordError(1281);return}c.deleteShader(b),d.shaders[a]=null}function jJ(g,h){for(var a=0,f,b;a<g;a++){if(f=e[h+a*4>>2],b=d.textures[f],!b)continue;c.deleteTexture(b),b.name=0,d.textures[f]=null}}function jK(f,g){for(var a=0,b;a<f;a++)b=e[g+a*4>>2],c.deleteVertexArray(d.vaos[b]),d.vaos[b]=null}function jL(a){c.depthFunc(a)}function jM(a){c.depthMask(!!a)}function jN(a){c.disable(a)}function jO(a){c.disableVertexAttribArray(a)}function jP(a,b,d){c.drawArrays(a,b,d)}function jQ(a,b,d,e){c.drawArraysInstanced(a,b,d,e)}function jR(b,f){for(var d=ag[b],a=0;a<b;a++)d[a]=e[f+a*4>>2];c.drawBuffers(d)}function jS(a,b,d,e,f){c.drawElementsInstanced(a,b,d,e,f)}function jT(a){c.enable(a)}function jU(a){c.enableVertexAttribArray(a)}function jV(){c.endTransformFeedback()}function jW(){c.finish()}function jX(a,b,e,f){c.framebufferRenderbuffer(a,b,e,d.renderbuffers[f])}function jY(a,b,e,f,g){c.framebufferTexture2D(a,b,e,d.textures[f],g)}function jZ(a,b,e,f,g){c.framebufferTextureLayer(a,b,d.textures[e],f,g)}function j_(a){c.frontFace(a)}function j$(a,b){V(a,b,"createBuffer",d.buffers)}function ka(a,b){V(a,b,"createFramebuffer",d.framebuffers)}function kb(a,b){V(a,b,"createRenderbuffer",d.renderbuffers)}function kc(a,b){V(a,b,"createTexture",d.textures)}function kd(a,b){V(a,b,"createVertexArray",d.vaos)}function ke(a){c.generateMipmap(a)}function kf(){var a=c.getError()||d.lastError;return d.lastError=0,a}function kg(a,b){aF(a,b,2)}function kh(a,b){aF(a,b,0)}function ki(h,b,f,g){var a=c.getProgramInfoLog(d.programs[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?z(a,g,b):0,f&&(e[f>>2]=i)}function kj(b,h,g){var a,i,j,f,k,l,m;if(!g){d.recordError(1281);return}if(b>=d.counter){d.recordError(1281);return}if(a=d.programInfos[b],!a){d.recordError(1282);return}if(h==35716)i=c.getProgramInfoLog(d.programs[b]),i===null&&(i="(unknown error)"),e[g>>2]=i.length+1;else if(h==35719)e[g>>2]=a.maxUniformLength;else if(h==35722){if(a.maxAttributeLength==-1){b=d.programs[b],j=c.getProgramParameter(b,35721),a.maxAttributeLength=0;for(f=0;f<j;++f)k=c.getActiveAttrib(b,f),a.maxAttributeLength=Math.max(a.maxAttributeLength,k.name.length+1)}e[g>>2]=a.maxAttributeLength}else if(h==35381){if(a.maxUniformBlockNameLength==-1){b=d.programs[b],l=c.getProgramParameter(b,35382),a.maxUniformBlockNameLength=0;for(f=0;f<l;++f)m=c.getActiveUniformBlockName(b,f),a.maxUniformBlockNameLength=Math.max(a.maxUniformBlockNameLength,m.length+1)}e[g>>2]=a.maxUniformBlockNameLength}else e[g>>2]=c.getProgramParameter(d.programs[b],h)}function kk(h,b,f,g){var a=c.getShaderInfoLog(d.shaders[h]),i;a===null&&(a="(unknown error)"),i=b>0&&g?z(a,g,b):0,f&&(e[f>>2]=i)}function kl(f,g,b){var a,i,h,j;if(!b){d.recordError(1281);return}g==35716?(a=c.getShaderInfoLog(d.shaders[f]),a===null&&(a="(unknown error)"),i=a?a.length+1:0,e[b>>2]=i):g==35720?(h=c.getShaderSource(d.shaders[f]),j=h?h.length+1:0,e[b>>2]=j):e[b>>2]=c.getShaderParameter(d.shaders[f],g)}function km(f){var a,g,i,b,h,j,e;if(d.stringCache[f])return d.stringCache[f];switch(f){case 7939:g=c.getSupportedExtensions()||[],g=g.concat(g.map(function(a){return"GL_"+a})),a=ab(g.join(" "));break;case 7936:case 7937:case 37445:case 37446:i=c.getParameter(f),i||d.recordError(1280),a=ab(i);break;case 7938:b=c.getParameter(7938),d.currentContext.version>=2?b="OpenGL ES 3.0 ("+b+")":b="OpenGL ES 2.0 ("+b+")",a=ab(b);break;case 35724:h=c.getParameter(35724),j=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,e=h.match(j),e!==null&&(e[1].length==3&&(e[1]=e[1]+"0"),h="OpenGL ES GLSL ES "+e[1]+" ("+h+")"),a=ab(h);break;default:return d.recordError(1280),0}return d.stringCache[f]=a,a}function kn(f,e){var a,b;if(d.currentContext.version<2)return d.recordError(1282),0;if(a=d.stringiCache[f],a)return e<0||e>=a.length?(d.recordError(1281),0):a[e];switch(f){case 7939:return b=c.getSupportedExtensions()||[],b=b.concat(b.map(function(a){return"GL_"+a})),b=b.map(function(a){return ab(a)}),a=d.stringiCache[f]=b,e<0||e>=a.length?(d.recordError(1281),0):a[e];default:return d.recordError(1280),0}}function ko(a,b){return c.getUniformBlockIndex(d.programs[a],G(b))}function kp(f,a){var b,c,e;return a=G(a),b=0,a[a.length-1]=="]"&&(c=a.lastIndexOf("["),b=a[c+1]!="]"?ao(a.slice(c+1)):0,a=a.slice(0,c)),e=d.programInfos[f]&&d.programInfos[f].uniforms[a],e&&b>=0&&b<e[0]?e[1]+b:-1}function kq(f,b,g){for(var d=ag[b],a=0;a<b;a++)d[a]=e[g+a*4>>2];c.invalidateFramebuffer(f,d)}function kr(a){c.linkProgram(d.programs[a]),d.populateUniformTable(a)}function ks(a,b){a==3317&&(d.unpackAlignment=b),c.pixelStorei(a,b)}function kt(a){c.readBuffer(a)}function ku(g,h,e,f,a,b,i){var j,k;if(d.currentContext.version>=2){c.currentPixelPackBufferBinding?c.readPixels(g,h,e,f,a,b,i):(j=X(b),c.readPixels(g,h,e,f,a,b,j,i>>Y(j)));return}if(k=aG(b,a,e,f,i,a),!k){d.recordError(1280);return}c.readPixels(g,h,e,f,a,b,k)}function kv(a,b,d,e){c.renderbufferStorage(a,b,d,e)}function kw(a,b,d,e,f){c.renderbufferStorageMultisample(a,b,d,e,f)}function kx(a,b,d,e){c.scissor(a,b,d,e)}function ky(a,b,e,f){var g=d.getSource(a,b,e,f);c.shaderSource(d.shaders[a],g)}function kz(j,k,e,f,g,i,b,a,h){if(d.currentContext.version>=2){if(c.currentPixelUnpackBufferBinding)c.texImage2D(j,k,e,f,g,i,b,a,h);else if(h){var l=X(a);c.texImage2D(j,k,e,f,g,i,b,a,l,h>>Y(l))}else c.texImage2D(j,k,e,f,g,i,b,a,null);return}c.texImage2D(j,k,e,f,g,i,b,a,h?aG(a,b,f,g,h,e):null)}function kA(b,d,j,e,f,g,h,i,a,k){if(c.currentPixelUnpackBufferBinding)c.texImage3D(b,d,j,e,f,g,h,i,a,k);else if(k){var l=X(a);c.texImage3D(b,d,j,e,f,g,h,i,a,l,k>>Y(l))}else c.texImage3D(b,d,j,e,f,g,h,i,a,null)}function kB(a,b,d){c.texParameterf(a,b,d)}function kC(a,b,d){c.texParameteri(a,b,d)}function kD(a,b,d,e,f){c.texStorage2D(a,b,d,e,f)}function kE(i,j,k,h,f,g,b,a,e){var l,m;if(d.currentContext.version>=2){c.currentPixelUnpackBufferBinding?c.texSubImage2D(i,j,k,h,f,g,b,a,e):e?(l=X(a),c.texSubImage2D(i,j,k,h,f,g,b,a,l,e>>Y(l))):c.texSubImage2D(i,j,k,h,f,g,b,a,null);return}m=null,e&&(m=aG(a,b,f,g,e,0)),c.texSubImage2D(i,j,k,h,f,g,b,a,m)}function kF(b,d,e,k,f,g,h,i,j,a,l){if(c.currentPixelUnpackBufferBinding)c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,l);else if(l){var m=X(a);c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,m,l>>Y(m))}else c.texSubImage3D(b,d,e,k,f,g,h,i,j,a,null)}function kG(b,g,h,i){var f,a;b=d.programs[b],f=[];for(a=0;a<g;a++)f.push(G(e[h+a*4>>2]));c.transformFeedbackVaryings(b,f,i)}function kH(a,b){c.uniform1f(d.uniforms[a],b)}function kI(a,b){c.uniform1i(d.uniforms[a],b)}function kJ(h,a,f){var g,b;if(d.currentContext.version>=2){c.uniform1iv(d.uniforms[h],e,f>>2,a);return}if(a<=288){g=ap[a-1];for(b=0;b<a;++b)g[b]=e[f+4*b>>2]}else g=e.subarray(f>>2,f+a*4>>2);c.uniform1iv(d.uniforms[h],g)}function kK(a,b){c.uniform1ui(d.uniforms[a],b)}function kL(a,b,e){c.uniform2f(d.uniforms[a],b,e)}function kM(g,b,e){var f,a;if(d.currentContext.version>=2){c.uniform2fv(d.uniforms[g],j,e>>2,b*2);return}if(b<=144){f=N[2*b-1];for(a=0;a<2*b;a+=2)f[a]=j[e+4*a>>2],f[a+1]=j[e+(4*a+4)>>2]}else f=j.subarray(e>>2,e+b*8>>2);c.uniform2fv(d.uniforms[g],f)}function kN(a,b,e){c.uniform2i(d.uniforms[a],b,e)}function kO(h,b,f){var g,a;if(d.currentContext.version>=2){c.uniform2iv(d.uniforms[h],e,f>>2,b*2);return}if(b<=144){g=ap[2*b-1];for(a=0;a<2*b;a+=2)g[a]=e[f+4*a>>2],g[a+1]=e[f+(4*a+4)>>2]}else g=e.subarray(f>>2,f+b*8>>2);c.uniform2iv(d.uniforms[h],g)}function kP(a,b,e,f){c.uniform3f(d.uniforms[a],b,e,f)}function kQ(g,f,b){var e,a;if(d.currentContext.version>=2){c.uniform3fv(d.uniforms[g],j,b>>2,f*3);return}if(f<=96){e=N[3*f-1];for(a=0;a<3*f;a+=3)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2]}else e=j.subarray(b>>2,b+f*12>>2);c.uniform3fv(d.uniforms[g],e)}function kR(a,b,e,f){c.uniform3i(d.uniforms[a],b,e,f)}function kS(a,b,e,f,g){c.uniform4f(d.uniforms[a],b,e,f,g)}function kT(i,f,g){var b,h,a,e;if(d.currentContext.version>=2){c.uniform4fv(d.uniforms[i],j,g>>2,f*4);return}if(f<=72){b=N[4*f-1],h=j,g>>=2;for(a=0;a<4*f;a+=4)e=g+a,b[a]=h[e],b[a+1]=h[e+1],b[a+2]=h[e+2],b[a+3]=h[e+3]}else b=j.subarray(g>>2,g+f*16>>2);c.uniform4fv(d.uniforms[i],b)}function kU(a,b,e,f,g){c.uniform4i(d.uniforms[a],b,e,f,g)}function kV(a,b,e){a=d.programs[a],c.uniformBlockBinding(a,b,e)}function kW(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix2fv(d.uniforms[g],!!h,j,b>>2,f*4);return}if(f<=72){e=N[4*f-1];for(a=0;a<4*f;a+=4)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2]}else e=j.subarray(b>>2,b+f*16>>2);c.uniformMatrix2fv(d.uniforms[g],!!h,e)}function kX(g,f,h,b){var e,a;if(d.currentContext.version>=2){c.uniformMatrix3fv(d.uniforms[g],!!h,j,b>>2,f*9);return}if(f<=32){e=N[9*f-1];for(a=0;a<9*f;a+=9)e[a]=j[b+4*a>>2],e[a+1]=j[b+(4*a+4)>>2],e[a+2]=j[b+(4*a+8)>>2],e[a+3]=j[b+(4*a+12)>>2],e[a+4]=j[b+(4*a+16)>>2],e[a+5]=j[b+(4*a+20)>>2],e[a+6]=j[b+(4*a+24)>>2],e[a+7]=j[b+(4*a+28)>>2],e[a+8]=j[b+(4*a+32)>>2]}else e=j.subarray(b>>2,b+f*36>>2);c.uniformMatrix3fv(d.uniforms[g],!!h,e)}function kY(k,h,i,g){var b,f,a,e;if(d.currentContext.version>=2){c.uniformMatrix4fv(d.uniforms[k],!!i,j,g>>2,h*16);return}if(h<=18){b=N[16*h-1],f=j,g>>=2;for(a=0;a<16*h;a+=16)e=g+a,b[a]=f[e],b[a+1]=f[e+1],b[a+2]=f[e+2],b[a+3]=f[e+3],b[a+4]=f[e+4],b[a+5]=f[e+5],b[a+6]=f[e+6],b[a+7]=f[e+7],b[a+8]=f[e+8],b[a+9]=f[e+9],b[a+10]=f[e+10],b[a+11]=f[e+11],b[a+12]=f[e+12],b[a+13]=f[e+13],b[a+14]=f[e+14],b[a+15]=f[e+15]}else b=j.subarray(g>>2,g+h*64>>2);c.uniformMatrix4fv(d.uniforms[k],!!i,b)}function kZ(a){c.useProgram(d.programs[a])}function k_(a,b,d,e,f){c.vertexAttrib4f(a,b,d,e,f)}function k$(b,a){c.vertexAttrib4f(b,j[a>>2],j[a+4>>2],j[a+8>>2],j[a+12>>2])}function la(a,b){c.vertexAttribDivisor(a,b)}function lb(a,b,d,e,f){c.vertexAttribI4ui(a,b,d,e,f)}function lc(a,b,d,e,f){c.vertexAttribIPointer(a,b,d,e,f)}function ld(a,b,d,e,f,g){c.vertexAttribPointer(a,b,d,!!e,f,g)}function le(a,b,d,e){c.viewport(a,b,d,e)}function bq(c,a){var b=new Date(e[c>>2]*1e3),d,f;return e[a>>2]=b.getUTCSeconds(),e[a+4>>2]=b.getUTCMinutes(),e[a+8>>2]=b.getUTCHours(),e[a+12>>2]=b.getUTCDate(),e[a+16>>2]=b.getUTCMonth(),e[a+20>>2]=b.getUTCFullYear()-1900,e[a+24>>2]=b.getUTCDay(),e[a+36>>2]=0,e[a+32>>2]=0,d=Date.UTC(b.getUTCFullYear(),0,1,0,0,0,0),f=(b.getTime()-d)/(1e3*60*60*24)|0,e[a+28>>2]=f,bq.GMTString||(bq.GMTString=bX("GMT")),e[a+40>>2]=bq.GMTString,a}g={get_func:function(a){return y.get(a)},error:function(){A.apply(null,Array.from(arguments))},print:function(){ay.apply(null,Array.from(arguments))},malloc:function(a){return R(a)},free:function(a){bu(a)},getHeapValue:function(a,b){return oB(a,b)},setHeapValue:function(a,b,c){oC(a,b,c)},heapSub:function(a,b,d){const c=a.BYTES_PER_ELEMENT;return a.subarray(b/c,b/c+d)},heapSlice:function(a,b,d){const c=a.BYTES_PER_ELEMENT;return a.slice(b/c,b/c+d)},heapCopy:function(b,a,c){const d=a.BYTES_PER_ELEMENT;return b.set(a,c/d)},parseString:function(a){return G(a)},parseStringArray:function(b,c){const a=[],d=g.heapSub(e,b,c);return d.forEach(function(b){a.push(g.parseString(b))}),a},strlen:function(a){return ar(a)},allocString:function(a){const b=g.strlen(a)+1,c=g.malloc(b);return z(a,c,b),c},allocStringArray:function(a){const b=a.length,c=g.malloc(b*4);for(let d=0;d<b;d++)e[(c>>2)+d]=g.allocString(a[d]);return c},freeStringArray:function(a,b){for(let c=0;c<b;c++)g.free(e[(a>>2)+c]);g.free(a)},stringToHeap:function(a,b,c){return aC(a,v,b,c)}},p={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(a){p.canvas_resize_policy=a.canvasResizePolicy,p.canvas=a.canvas,p.locale=a.locale||p.locale,p.virtual_keyboard=a.virtualKeyboard,p.persistent_drops=!!a.persistentDrops,p.on_execute=a.onExecute,p.on_exit=a.onExit},locate_file:function(a){return f.locateFile(a)},clear:function(){p.canvas=null,p.locale="en",p.canvas_resize_policy=2,p.virtual_keyboard=!1,p.persistent_drops=!1,p.on_execute=null,p.on_exit=null}},C={_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return C._idbfs?1:0},init:function(a){if(C._idbfs=!1,!Array.isArray(a))return Promise.reject(new Error("Persistent paths must be an array"));if(!a.length)return Promise.resolve();C._mount_points=a.slice();function c(a){try{b.stat(a)}catch(c){if(c.errno!==B.ENOENT)throw c;b.mkdirTree(a)}}return C._mount_points.forEach(function(a){c(a),b.mount(w,{},a)}),new Promise(function(a,c){b.syncfs(!0,function(b){b?(C._mount_points=[],C._idbfs=!1,g.print(`IndexedDB not available: ${b.message}`)):C._idbfs=!0,a(b)})})},deinit:function(){C._mount_points.forEach(function(a){try{b.unmount(a)}catch(a){g.print("Already unmounted",a)}C._idbfs&&w.dbs[a]&&(w.dbs[a].close(),delete w.dbs[a])}),C._mount_points=[],C._idbfs=!1,C._syncing=!1},sync:function(){return C._syncing?(g.error("Already syncing!"),Promise.resolve()):(C._syncing=!0,new Promise(function(a,c){b.syncfs(!1,function(b){b&&g.error(`Failed to save IDB file system: ${b.message}`),C._syncing=!1,a(b)})}))},copy_to_fs:function(a,e){const d=a.lastIndexOf("/");let c="/";d>0&&(c=a.slice(0,d));try{b.stat(c)}catch(a){if(a.errno!==B.ENOENT)throw a;b.mkdirTree(c)}b.writeFile(a,new Uint8Array(e))}},M={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(a){M._async_cbs.push(a)},cleanup:function(b){const a=p.on_exit;C.deinit(),p.clear(),a&&a(b)},finish_async:function(a){M._fs_sync_promise.then(function(b){const a=[];return M._async_cbs.forEach(function(b){a.push(new Promise(b))}),Promise.all(a)}).then(function(){return C.sync()}).then(function(b){setTimeout(function(){a()},0)})}},s={ctx:null,input:null,driver:null,interval:0,init:function(b,e,c,d){const a=new(window.AudioContext||window.webkitAudioContext)({sampleRate:b});return s.ctx=a,a.onstatechange=function(){let b=0;switch(a.state){case"suspended":b=0;break;case"running":b=1;break;case"closed":b=2;break}c(b)},a.onstatechange(),s.interval=setInterval(function(){let b=0;a.baseLatency&&(b+=s.ctx.baseLatency),a.outputLatency&&(b+=s.ctx.outputLatency),d(b)},1e3),M.atexit(s.close_async),a.destination.channelCount},create_input:function(b){if(s.input)return 0;function a(a){try{s.input=s.ctx.createMediaStreamSource(a),b(s.input)}catch(a){g.error("Failed creaating input.",a)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(a,function(a){g.error("Error getting user media.",a)});else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return g.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},a,function(a){g.print(a)})}return 0},close_async:function(b,d){const a=s.ctx;if(s.ctx=null,!a){b();return}s.interval&&(clearInterval(s.interval),s.interval=0),s.input&&(s.input.disconnect(),s.input=null);let c=Promise.resolve();s.driver&&(c=s.driver.close()),c.then(function(){return a.close()}).then(function(){a.onstatechange=null,b()}).catch(function(c){a.onstatechange=null,g.error("Error closing AudioContext",c),b()})}};function ll(){return s.create_input(function(a){a.connect(s.driver.get_node())})}function lm(){if(s.input){const a=s.input.mediaStream.getTracks();for(let b=0;b<a.length;b++)a[b].stop();s.input.disconnect(),s.input=null}}function ln(a,b,c,d){const e=g.get_func(c),f=g.get_func(d);return s.init(a,b,e,f)}function lo(){return window.AudioContext||window.webkitAudioContext?1:0}function lp(){s.ctx&&s.ctx.state!=="running"&&s.ctx.resume()}W={script:null,create:function(a,b){return W.script=s.ctx.createScriptProcessor(a,2,b),s.driver=W,W.script.bufferSize},start:function(a,b,c,d,e){W.script.onaudioprocess=function(f){const l=g.heapSub(j,a,b),h=f.inputBuffer;if(s.input){const a=h.getChannelData(0).length;for(let b=0;b<2;b++){const c=h.getChannelData(b);for(let d=0;d<a;d++)l[d*2+b]=c[d]}}e();const m=g.heapSub(j,c,d),i=f.outputBuffer,k=i.numberOfChannels;for(let a=0;a<k;a++){const b=i.getChannelData(a);for(let c=0;c<b.length;c++)b[c]=m[c*k+a]}},W.script.connect(s.ctx.destination)},get_node:function(){return W.script},close:function(){return new Promise(function(a,b){W.script.disconnect(),W.script.onaudioprocess=null,W.script=null,a()})}};function lr(a,b){return W.create(a,b)}function ls(a,b,c,d,e){const f=g.get_func(e);W.start(a,b,c,d,f)}function lt(a,b){g.stringToHeap(`#${p.canvas.id}`,a,b)}function lu(a,b){g.stringToHeap(p.locale,a,b)}x={shape:"auto",visible:!0,cursors:{},set_style:function(a){p.canvas.style.cursor=a},set_shape:function(a){x.shape=a;let b=a;if(a in x.cursors){const c=x.cursors[a];b=`url("${c.url}") ${c.x} ${c.y}, auto`}x.visible&&x.set_style(b)},clear:function(){x.set_style(""),x.shape="auto",x.visible=!0,Object.keys(x.cursors).forEach(function(a){URL.revokeObjectURL(x.cursors[a]),delete x.cursors[a]})}},I={handlers:[],has:function(a,b,c,d){return I.handlers.findIndex(function(e){return e.target===a&&e.event===b&&e.method===c&&e.capture===d})!==-1},add:function(a,b,c,d){if(I.has(a,b,c,d))return;function e(a,b,c,d){this.target=a,this.event=b,this.method=c,this.capture=d}I.handlers.push(new e(a,b,c,d)),a.addEventListener(b,c,d)},clear:function(){I.handlers.forEach(function(a){a.target.removeEventListener(a.event,a.method,a.capture)}),I.handlers.length=0}},H={promises:[],pending_files:[],add_entry:function(a){a.isDirectory?H.add_dir(a):a.isFile?H.add_file(a):g.error("Unrecognized entry...",a)},add_dir:function(a){H.promises.push(new Promise(function(b,d){const c=a.createReader();c.readEntries(function(a){for(let b=0;b<a.length;b++)H.add_entry(a[b]);b()})}))},add_file:function(a){H.promises.push(new Promise(function(c,b){a.file(function(a){const d=new FileReader;d.onload=function(){const b={path:a.relativePath||a.webkitRelativePath,name:a.name,type:a.type,size:a.size,data:d.result};b.path||(b.path=b.name),H.pending_files.push(b),c()},d.onerror=function(){g.print("Error reading file"),b()},d.readAsArrayBuffer(a)},function(a){g.print("Error!"),b()})}))},process:function(a,b){if(H.promises.length===0){a();return}H.promises.pop().then(function(){setTimeout(function(){H.process(a,b)},0)})},_process_event:function(a,c){if(a.preventDefault(),a.dataTransfer.items){for(let d=0;d<a.dataTransfer.items.length;d++){const b=a.dataTransfer.items[d];let c=null;"getAsEntry"in b?c=b.getAsEntry():"webkitGetAsEntry"in b&&(c=b.webkitGetAsEntry()),c&&H.add_entry(c)}}else g.error("File upload not supported");new Promise(H.process).then(function(){const a=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,d=[],e=[];b.mkdir(a),H.pending_files.forEach(f=>{const b=f.path;C.copy_to_fs(a+b,f.data);let c=b.indexOf("/");if(c===-1)d.push(a+b);else{const e=b.substr(0,c);c=e.indexOf("/"),c<0&&d.indexOf(a+e)===-1&&d.push(a+e)}e.push(a+b)}),H.promises=[],H.pending_files=[],c(d),p.persistent_drops?M.atexit(function(b,c){H.remove_drop(e,a),b()}):H.remove_drop(e,a)})},remove_drop:function(d,a){const c=[a.substr(0,a.length-1)];d.forEach(function(f){b.unlink(f);let d=f.replace(a,""),e=d.lastIndexOf("/");while(e>0)d=d.substr(0,e),c.indexOf(a+d)===-1&&c.push(a+d),e=d.lastIndexOf("/")}),c.sort(function(c,d){const a=(c.match(/\//g)||[]).length,b=(d.match(/\//g)||[]).length;return a>b?-1:a<b?1:0}).forEach(function(a){b.rmdir(a)})},handler:function(a){return function(b){H._process_event(b,a)}}},aa={samples:[],get_pads:function(){try{const a=navigator.getGamepads();return a||[]}catch(a){return[]}},get_samples:function(){return aa.samples},get_sample:function(a){const b=aa.samples;return a<b.length?b[a]:null},sample:function(){const b=aa.get_pads(),a=[];for(let d=0;d<b.length;d++){const c=b[d];if(!c){a.push(null);continue}const e={standard:c.mapping==="standard",buttons:[],axes:[],connected:c.connected};for(let a=0;a<c.buttons.length;a++)e.buttons.push(c.buttons[a].value);for(let a=0;a<c.axes.length;a++)e.axes.push(c.axes[a]);a.push(e)}aa.samples=a},init:function(b){I.samples=[];function c(a){const e=aa.get_guid(a),c=g.allocString(a.id),d=g.allocString(e);b(a.index,1,c,d),g.free(c),g.free(d)}const a=aa.get_pads();for(let b=0;b<a.length;b++)a[b]&&c(a[b]);I.add(window,"gamepadconnected",function(a){c(a.gamepad)},!1),I.add(window,"gamepaddisconnected",function(a){b(a.gamepad.index,0)},!1)},get_guid:function(f){if(f.mapping)return f.mapping;const b=navigator.userAgent;let a="Unknown";b.indexOf("Android")>=0?a="Android":b.indexOf("Linux")>=0?a="Linux":b.indexOf("iPhone")>=0?a="iOS":b.indexOf("Macintosh")>=0?a="MacOSX":b.indexOf("Windows")>=0&&(a="Windows");const d=f.id,g=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,h=/^([0-9a-f]+)-([0-9a-f]+)-/i;let c="",e="";if(g.test(d)){const a=g.exec(d);c=a[1].padStart(4,"0"),e=a[2].padStart(4,"0")}else if(h.test(d)){const a=h.exec(d);c=a[1].padStart(4,"0"),e=a[2].padStart(4,"0")}return!c||!e?`${a}Unknown`:a+c+e}},D={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return D.hidpi?window.devicePixelRatio||1:1},isFullscreen:function(){const a=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return a?a===p.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!D.hasFullscreen())return 1;const a=p.canvas;try{const b=(a.requestFullscreen||a.msRequestFullscreen||a.mozRequestFullScreen||a.mozRequestFullscreen||a.webkitRequestFullscreen).call(a);b&&b.catch(function(){})}catch(a){return 1}return 0},exitFullscreen:function(){if(!D.isFullscreen())return 0;try{const a=document.exitFullscreen();a&&a.catch(function(){})}catch(a){return 1}return 0},_updateGL:function(){const b=bN(),a=d.getContext(b);a&&d.resizeOffscreenFramebuffer(a)},updateSize:function(){const g=D.isFullscreen(),h=p.canvas_resize_policy===2,i=p.canvas_resize_policy===0,j=D.desired_size[0],k=D.desired_size[1],a=p.canvas;let b=j,c=k;if(i)return a.width!==b||a.height!==c?(D.desired_size=[a.width,a.height],D._updateGL(),1):0;const d=D.getPixelRatio();(g||h)&&(b=window.innerWidth*d,c=window.innerHeight*d);const e=`${b/d}px`,f=`${c/d}px`;return a.style.width!==e||a.style.height!==f||a.width!==b||a.height!==c?(a.width=b,a.height=c,a.style.width=e,a.style.height=f,D._updateGL(),1):0}},t={textinput:null,textarea:null,available:function(){return p.virtual_keyboard&&"ontouchstart"in window},init:function(b){function a(c){const a=document.createElement(c);return a.style.display="none",a.style.position="absolute",a.style.zIndex="-1",a.style.background="transparent",a.style.padding="0px",a.style.margin="0px",a.style.overflow="hidden",a.style.width="0px",a.style.height="0px",a.style.border="0px",a.style.outline="none",a.readonly=!0,a.disabled=!0,I.add(a,"input",function(d){const c=g.allocString(a.value);b(c,a.selectionEnd),g.free(c)},!1),I.add(a,"blur",function(b){a.style.display="none",a.readonly=!0,a.disabled=!0},!1),p.canvas.insertAdjacentElement("beforebegin",a),a}t.textinput=a("input"),t.textarea=a("textarea"),t.updateSize()},show:function(b,c,d,e){if(!t.textinput||!t.textarea)return;(t.textinput.style.display!==""||t.textarea.style.display!=="")&&t.hide(),t.updateSize();const a=c?t.textarea:t.textinput;a.readonly=!1,a.disabled=!1,a.value=b,a.style.display="block",a.focus(),a.setSelectionRange(d,e)},hide:function(){if(!t.textinput||!t.textarea)return;[t.textinput,t.textarea].forEach(function(a){a.blur(),a.style.display="none",a.value=""})},updateSize:function(){if(!t.textinput||!t.textarea)return;const a=p.canvas.getBoundingClientRect();function b(b){b.style.left=`${a.left}px`,b.style.top=`${a.top}px`,b.style.width=`${a.width}px`,b.style.height=`${a.height}px`}b(t.textinput),b(t.textarea)},clear:function(){t.textinput&&(t.textinput.remove(),t.textinput=null),t.textarea&&(t.textarea.remove(),t.textarea=null)}},aM={window_icon:"",findDPI:function(){function b(a){return window.matchMedia(`(max-resolution: ${a}dpi)`).matches}function a(b,c,d){const e=parseInt((c-b)/2+b,10);return c-b<=1?d(c)?c:b:d(e)?a(b,e,d):a(e,c,d)}try{const c=a(0,800,b);return c>=96?c:96}catch(a){return 96}}};function lC(a){window.alert(g.parseString(a))}function lD(){p.canvas.focus()}function lE(){return document.activeElement===p.canvas}function lF(a){const b=g.get_func(a);try{navigator.clipboard.readText().then(function(c){const a=g.allocString(c);b(a),g.free(a)}).catch(function(a){})}catch(a){}}function lG(a){const b=g.parseString(a);return!navigator.clipboard||!navigator.clipboard.writeText?1:(navigator.clipboard.writeText(b).catch(function(a){g.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",a)}),0)}function lH(c,d,e,f){const b=p.canvas,a=b.getBoundingClientRect(),h=b.width/a.width,i=b.height/a.height;g.setHeapValue(e,(c-a.x)*h,"i32"),g.setHeapValue(f,(d-a.y)*i,"i32")}function lI(){return!x.visible}function lJ(h,d,c,e,f){const a=g.parseString(h),b=x.cursors[a];if(c>0){const b=new Blob([g.heapSlice(r,d,c)],{type:"image/png"}),h=URL.createObjectURL(b);x.cursors[a]={url:h,x:e,y:f}}else delete x.cursors[a];a===x.shape&&x.set_shape(x.shape),b&&URL.revokeObjectURL(b.url)}function lK(a){x.set_shape(g.parseString(a))}function lL(b){const a=b!==0;if(a===x.visible)return;x.visible=a,a?x.set_shape(x.shape):x.set_style("none")}function lM(a,b){D.desired_size=[a,b],D.updateSize()}function lN(b){const c=g.get_func(b),d=function(e){const a=e||[];if(!a.length)return;const b=a.length,d=g.allocStringArray(a);c(d,b),g.freeStringArray(d,b)},a=p.canvas;I.add(a,"dragover",function(a){a.preventDefault()},!1),I.add(a,"drop",H.handler(d))}function lO(){return D.exitFullscreen()}function lP(){return D.requestFullscreen()}function lQ(a){const b=g.get_func(a);aa.init(b)}function lR(){return aa.sample(),0}function lS(){return aa.get_samples().length}function lT(h,i,j,k,l,f){const a=aa.get_sample(h);if(!a||!a.connected)return 1;const b=a.buttons,d=b.length<16?b.length:16;for(let a=0;a<d;a++)g.setHeapValue(i+(a<<2),b[a],"float");g.setHeapValue(j,d,"i32");const c=a.axes,e=c.length<10?c.length:10;for(let a=0;a<e;a++)g.setHeapValue(k+(a<<2),c[a],"float");g.setHeapValue(l,e,"i32");const m=a.standard?1:0;return g.setHeapValue(f,m,"i32"),0}function lU(a){if(a!==1&&a!==2)return!1;try{return!!document.createElement("canvas").getContext(a===2?"webgl2":"webgl")}catch(a){}return!1}function lV(){const a=["Windows","Win64","Win32","WinCE"],b=navigator.platform||"";return a.indexOf(b)!==-1?1:0}function lW(a,b,c,d,e){const f=p.canvas,h=g.get_func(a),i=[b,c,d,e];["mouseover","mouseleave","focus","blur"].forEach(function(a,b){I.add(f,a,function(){h(i[b])},!0)})}function lX(a){const b=g.get_func(a);I.add(window,"paste",function(c){const d=c.clipboardData.getData("text"),a=g.allocString(d);b(a),g.free(a)},!1)}function lY(){return D.getPixelRatio()}function lZ(){return aM.findDPI()}function l_(b,c){const a=D.getPixelRatio();g.setHeapValue(b,window.screen.width*a,"i32"),g.setHeapValue(c,window.screen.height*a,"i32")}function l$(b,c,d,e){const a=p.canvas;switch(I.add(a,"contextmenu",function(a){a.preventDefault()},!1),I.add(a,"webglcontextlost",function(a){alert("WebGL context lost, please reload the page"),a.preventDefault()},!1),D.hidpi=!!e,p.canvas_resize_policy){case 0:D.desired_size=[a.width,a.height];break;case 1:D.desired_size=[b,c];break;default:a.style.position="absolute",a.style.top=0,a.style.left=0;break}D.updateSize(),d&&D.requestFullscreen()}function ma(){const a=D.updateSize();return a&&t.updateSize(),a}function mb(){return"ontouchstart"in window}function mc(){return t.available()}function md(a){const b=g.get_func(a);t.available()&&t.init(b)}function me(){t.hide()}function mf(d,e,a,b){const f=g.parseString(d),c=a>0?a:0,h=b>0?b:c;t.show(f,e,c,h)}function mg(c,d){let a=document.getElementById("-gd-engine-icon");a===null&&(a=document.createElement("link"),a.rel="icon",a.id="-gd-engine-icon",document.head.appendChild(a));const b=aM.window_icon,e=new Blob([g.heapSlice(r,c,d)],{type:"image/png"});aM.window_icon=URL.createObjectURL(e),a.href=aM.window_icon,b&&URL.revokeObjectURL(b)}function mh(a,b){g.setHeapValue(a,p.canvas.width,"i32"),g.setHeapValue(b,p.canvas.height,"i32")}function mi(a){document.title=g.parseString(a)}function mj(h,i,b,d,e,f){const c=g.parseString(h);let a=null;try{if(i){const b=eval;a=b(c)}else a=eval(c)}catch(a){g.error(a)}switch(typeof a){case"boolean":return g.setHeapValue(b,a,"i32"),1;case"number":return g.setHeapValue(b,a,"double"),3;case"string":return g.setHeapValue(b,g.allocString(a),"*"),4;case"object":if(a===null)break;if(ArrayBuffer.isView(a)&&!(a instanceof Uint8Array)?a=new Uint8Array(a.buffer):a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a instanceof Uint8Array){const b=g.get_func(f),c=b(d,e,a.length);return r.set(a,c),20}break}return 0}l={_last_id:0,_references:{},get:function(a){return l._references[a]},add:function(b){const a=++l._last_id;return l._references[a]=b,a},remove:function(a){delete l._references[a]}},ak={onread:function(c,b){const a=l.get(c);if(!a)return;b.value&&a.chunks.push(b.value),a.reading=!1,a.done=b.done},onresponse:function(d,b){const a=l.get(d);if(!a)return;let c=!1;b.headers.forEach(function(a,b){const d=a.toLowerCase().trim(),e=b.toLowerCase().trim();e==="transfer-encoding"&&d==="chunked"&&(c=!0)}),a.status=b.status,a.response=b,a.reader=b.body.getReader(),a.chunked=c},onerror:function(c,a){g.error(a);const b=l.get(c);if(!b)return;b.error=a},create:function(c,d,e,f){const a={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[],bodySize:-1},b=l.add(a),g={method:c,headers:e,body:f};return a.request=fetch(d,g),a.request.then(ak.onresponse.bind(null,b)).catch(ak.onerror.bind(null,b)),b},free:function(b){const a=l.get(b);if(!a)return;if(l.remove(b),!a.request)return;a.request.then(function(a){a.abort()}).catch(function(a){})},read:function(b){const a=l.get(b);if(!a)return;if(a.reader&&!a.reading){if(a.done){a.reader=null;return}a.reading=!0,a.reader.read().then(ak.onread.bind(null,b)).catch(ak.onerror.bind(null,b))}}};function mm(b){const a=l.get(b);return!a||!a.response?-1:a.bodySize}function mn(b,c,d,e,f,a){const h=g.parseString(b),i=g.parseString(c),j=g.parseStringArray(d,e),k=a?g.heapSlice(v,f,a):null;return ak.create(h,i,j.map(function(a){const b=a.indexOf(":");return b<=0?[]:[a.slice(0,b).trim(),a.slice(b+1).trim()]}).filter(function(a){return a.length===2}),k)}function mo(a){ak.free(a)}function mp(b){const a=l.get(b);return!a||!a.response?0:a.status}function mq(b){const a=l.get(b);return!a||!a.response?-1:a.chunked?1:0}function mr(d,e,f){const b=l.get(d);if(!b||!b.response)return 0;let a=f;const c=b.chunks;while(a&&c.length){const d=b.chunks[0];d.length>a?(g.heapCopy(v,d.slice(0,a),e),c[0]=d.slice(a),a=0):(g.heapCopy(v,d,e),a-=d.length,c.pop())}return c.length||ak.read(d),f-a}function ms(h,d,e){const b=l.get(h);if(!b||!b.response)return 1;const f=g.get_func(d),a=[];b.response.headers.forEach(function(b,c){a.push(`${c}:${b}`)});const c=g.allocStringArray(a);return f(a.length,c,e),g.freeStringArray(c,a.length),0}function mt(b){const a=l.get(b);return a?a.error?-1:a.response?a.reader?1:a.done?2:-1:0:-1}function mu(a){const b=g.parseString(a),c=JSON.parse(b);return p.on_execute?(p.on_execute(c),0):1}function mv(a){const b=g.get_func(a);M.finish_async(b)}function mw(){return C.is_persistent()}function mx(a){const b=g.get_func(a);M._fs_sync_promise=C.sync(),M._fs_sync_promise.then(function(a){b()})}function my(){return navigator.hardwareConcurrency||1}function mz(a){M.request_quit=g.get_func(a)}function mA(a){window.open(g.parseString(a),"_blank")}al={connect:function(b,c,d,e,f){const a=l.get(b);if(!a)return;a.binaryType="arraybuffer",a.onopen=function(a){c()},a.onclose=function(a){f()},a.onerror=function(a){e()},a.onmessage=function(a){let b,e=0;if(a.data instanceof ArrayBuffer)b=new Uint8Array(a.data);else if(a.data instanceof Blob){g.error("Blob type not supported");return}else if(typeof a.data=="string"){e=1;const c=new TextEncoder("utf-8");b=new Uint8Array(c.encode(a.data))}else{g.error("Unknown message type");return}const f=b.length*b.BYTES_PER_ELEMENT,c=g.malloc(f);r.set(b,c),d(c,f,e),g.free(c)}},close:function(b){const a=l.get(b);if(!a)return;a.onopen=null,a.onmessage=null,a.onerror=null,a.onclose=null,a.close()},get_prop:function(c,b,d){const a=l.get(c);return a&&a[b]!==void 0?a[b]:d}};function mC(a){const b=l.get(a);if(!b)return;al.close(a)}function mD(b,a,c,d,e,f){const h=g.get_func(c).bind(null,a),i=g.get_func(d).bind(null,a),j=g.get_func(e).bind(null,a),k=g.get_func(f).bind(null,a);al.connect(b,h,i,j,k)}function mE(a){al.close(a),l.remove(a)}function mF(a){return al.get_prop(a,"id",65535)}function mG(a){return al.get_prop(a,"negotiated",65535)}function mH(a){return al.get_prop(a,"ordered",!0)}function oF(b){const a=l.get(b);return!a||!a.label?0:g.allocString(a.label)}function mJ(b){const a=l.get(b);return a?a.maxPacketLifeTime!==void 0?a.maxPacketLifeTime:a.maxRetransmitTime!==void 0?a.maxRetransmitTime:65535:65535}function mK(a){return al.get_prop(a,"maxRetransmits",65535)}function mL(b){const a=l.get(b);return!a||!a.protocol?0:g.allocString(a.protocol)}function mM(b){const a=l.get(b);if(!a)return 3;switch(a.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;case"closed":default:return 3}}function mN(d,e,c,f){const a=l.get(d);if(!a)return 1;const b=new Uint8Array(c);for(let a=0;a<c;a++)b[a]=g.getHeapValue(e+a,"i8");if(f)a.send(b.buffer);else{const c=new TextDecoder("utf-8").decode(b);a.send(c)}return 0}av={onstatechange:function(b,c,d,f){const e=l.get(b);if(!e)return;let a;switch(c.iceConnectionState){case"new":a=0;break;case"checking":a=1;break;case"connected":case"completed":a=2;break;case"disconnected":a=3;break;case"failed":a=4;break;case"closed":default:a=5;break}d(a)},onicecandidate:function(h,e,c){const f=l.get(h);if(!f||!c.candidate)return;const a=c.candidate,d=g.allocString(a.candidate),b=g.allocString(a.sdpMid);e(b,a.sdpMLineIndex,d),g.free(d),g.free(b)},ondatachannel:function(a,b,c){const d=l.get(a);if(!d)return;const e=l.add(c.channel);b(e)},onsession:function(d,e,a){const f=l.get(d);if(!f)return;const b=g.allocString(a.type),c=g.allocString(a.sdp);e(b,c),g.free(b),g.free(c)},onerror:function(a,b,c){const d=l.get(a);if(!d)return;g.error(c),b()}};function mP(b){const a=l.get(b);if(!a)return;a.close()}function mQ(e,c,f,k,m){const n=g.get_func(f).bind(null,c),h=g.get_func(k).bind(null,c),i=g.get_func(m).bind(null,c),j=JSON.parse(g.parseString(e));let a=null;try{a=new RTCPeerConnection(j)}catch(a){return g.error(a),0}const d=av,b=l.add(a);return a.oniceconnectionstatechange=d.onstatechange.bind(null,b,a,n),a.onicecandidate=d.onicecandidate.bind(null,b,h),a.ondatachannel=d.ondatachannel.bind(null,b,i),b}function mR(a,b,c){try{const d=l.get(a);if(!d)return 0;const e=g.parseString(b),f=JSON.parse(g.parseString(c)),h=d.createDataChannel(e,f);return l.add(h)}catch(a){return g.error(a),0}}function mS(b){const a=l.get(b);if(!a)return;a.oniceconnectionstatechange=null,a.onicecandidate=null,a.ondatachannel=null,l.remove(b)}function mT(b,c,d,e){const a=l.get(b);if(!a)return;const f=g.parseString(c),h=g.parseString(e);a.addIceCandidate(new RTCIceCandidate({candidate:h,sdpMid:f,sdpMlineIndex:d}))}function mU(a,c,d,e,f){const b=l.get(a);if(!b)return;const h=g.parseString(c),i=g.parseString(d),j=g.get_func(f).bind(null,e);b.setLocalDescription({sdp:i,type:h}).catch(function(b){av.onerror(a,j,b)})}function mV(a,b,d,e){const c=l.get(a);if(!c)return;const f=g.get_func(d).bind(null,b),h=g.get_func(e).bind(null,b);c.createOffer().then(function(b){av.onsession(a,f,b)}).catch(function(b){av.onerror(a,h,b)})}function mW(a,i,e,d,f,h){const b=l.get(a);if(!b)return;const c=g.parseString(i),j=g.parseString(e),k=g.get_func(h).bind(null,d),m=g.get_func(f).bind(null,d);b.setRemoteDescription({sdp:j,type:c}).then(function(){return c!=="offer"?Promise.resolve():b.createAnswer().then(function(b){av.onsession(a,m,b)})}).catch(function(b){av.onerror(a,k,b)})}$={_onopen:function(c,d,e){const a=l.get(c);if(!a)return;const b=g.allocString(a.protocol);d(b),g.free(b)},_onmessage:function(h,i,a){const f=l.get(h);if(!f)return;let b,e=0;if(a.data instanceof ArrayBuffer)b=new Uint8Array(a.data);else if(a.data instanceof Blob){g.error("Blob type not supported");return}else if(typeof a.data=="string"){e=1;const c=new TextEncoder("utf-8");b=new Uint8Array(c.encode(a.data))}else{g.error("Unknown message type");return}const d=b.length*b.BYTES_PER_ELEMENT,c=g.malloc(d);r.set(b,c),i(c,d,e),g.free(c)},_onerror:function(a,b,d){const c=l.get(a);if(!c)return;b()},_onclose:function(c,d,a){const e=l.get(c);if(!e)return;const b=g.allocString(a.reason);d(a.code,b,a.wasClean?1:0),g.free(b)},send:function(b,c){const a=l.get(b);return!a||a.readyState!==a.OPEN?1:(a.send(c),0)},bufferedAmount:function(b){const a=l.get(b);return a?a.bufferedAmount:0},create:function(a,c,d,e,f){const b=l.add(a);return a.onopen=$._onopen.bind(null,b,c),a.onmessage=$._onmessage.bind(null,b,d),a.onerror=$._onerror.bind(null,b,e),a.onclose=$._onclose.bind(null,b,f),b},close:function(b,c,d){const a=l.get(b);if(a&&a.readyState<a.CLOSING){const b=c,e=g.parseString(d);a.close(b,e)}},destroy:function(b){const a=l.get(b);if(!a)return;$.close(b,1001,""),l.remove(b),a.onopen=null,a.onmessage=null,a.onerror=null,a.onclose=null}};function mY(a){return $.bufferedAmount(a)}function mZ(a,b,c){const d=b,e=g.parseString(c);$.close(a,d,e)}function m_(a,i,e,f,h,m,n){const o=g.get_func(f).bind(null,a),j=g.get_func(h).bind(null,a),k=g.get_func(m).bind(null,a),l=g.get_func(n).bind(null,a),c=g.parseString(i),d=g.parseString(e);let b=null;try{d?b=new WebSocket(c,d.split(",")):b=new WebSocket(c)}catch(a){return 0}return b.binaryType="arraybuffer",$.create(b,o,j,k,l)}function m$(a){$.destroy(a)}function na(h,e,d,f){const b=new Uint8Array(d);let a=0;for(a=0;a<d;a++)b[a]=g.getHeapValue(e+a,"i8");let c=b.buffer;return f||(c=new TextDecoder("utf-8").decode(b)),$.send(h,c)}i={gl:null,texture_ids:[null,null],textures:[null,null],session:null,space:null,frame:null,pose:null,orig_requestAnimationFrame:null,requestAnimationFrame:a=>{if(i.session&&i.space){const b=function(c,b){i.frame=b,i.pose=b.getViewerPose(i.space),a(c),i.frame=null,i.pose=null};i.session.requestAnimationFrame(b)}else i.orig_requestAnimationFrame(a)},monkeyPatchRequestAnimationFrame:a=>{i.orig_requestAnimationFrame===null&&(i.orig_requestAnimationFrame=h.requestAnimationFrame),h.requestAnimationFrame=a?i.requestAnimationFrame:i.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{h.mainLoop.pause(),window.setTimeout(function(){h.mainLoop.resume()},0)},shaderProgram:null,programInfo:null,buffer:null,vsSource:"\n			const vec2 scale = vec2(0.5, 0.5);\n			attribute vec4 aVertexPosition;\n\n			varying highp vec2 vTextureCoord;\n\n			void main () {\n				gl_Position = aVertexPosition;\n				vTextureCoord = aVertexPosition.xy * scale + scale;\n			}\n		",fsSource:"\n			varying highp vec2 vTextureCoord;\n\n			uniform sampler2D uSampler;\n\n			void main() {\n				gl_FragColor = texture2D(uSampler, vTextureCoord);\n			}\n		",initShaderProgram:(a,c,d)=>{const e=i.loadShader(a,a.VERTEX_SHADER,c),f=i.loadShader(a,a.FRAGMENT_SHADER,d),b=a.createProgram();return a.attachShader(b,e),a.attachShader(b,f),a.linkProgram(b),!a.getProgramParameter(b,a.LINK_STATUS)?(g.error(`Unable to initialize the shader program: ${a.getProgramInfoLog(b)}`),null):b},loadShader:(a,c,d)=>{const b=a.createShader(c);return a.shaderSource(b,d),a.compileShader(b),!a.getShaderParameter(b,a.COMPILE_STATUS)?(g.error(`An error occurred compiling the shader: ${a.getShaderInfoLog(b)}`),a.deleteShader(b),null):b},initBuffer:a=>{const b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);const c=[-1,-1,1,-1,-1,1,1,1];return a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW),b},blitTexture:(a,b)=>{i.shaderProgram===null&&(i.shaderProgram=i.initShaderProgram(a,i.vsSource,i.fsSource),i.programInfo={program:i.shaderProgram,attribLocations:{vertexPosition:a.getAttribLocation(i.shaderProgram,"aVertexPosition")},uniformLocations:{uSampler:a.getUniformLocation(i.shaderProgram,"uSampler")}},i.buffer=i.initBuffer(a));const c=a.getParameter(a.CURRENT_PROGRAM);a.useProgram(i.shaderProgram),a.bindBuffer(a.ARRAY_BUFFER,i.buffer),a.vertexAttribPointer(i.programInfo.attribLocations.vertexPosition,2,a.FLOAT,!1,0,0),a.enableVertexAttribArray(i.programInfo.attribLocations.vertexPosition),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,b),a.uniform1i(i.programInfo.uniformLocations.uSampler,0),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.bindTexture(a.TEXTURE_2D,null),a.disableVertexAttribArray(i.programInfo.attribLocations.vertexPosition),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(c)},controllers:[],sampleControllers:()=>{if(!i.session||!i.frame)return;let b=2;const a=[];i.session.inputSources.forEach(c=>{c.targetRayMode==="tracked-pointer"?c.handedness==="right"?a[1]=c:(c.handedness==="left"||!a[0])&&(a[0]=c):a[b++]=c}),i.controllers=a},getControllerId:a=>i.controllers.indexOf(a)};function nc(f){if(!i.session||!i.pose)return;const e=f===2?1:0,d=i.session.renderState.baseLayer,g=i.pose.views[e],c=d.getViewport(g),a=i.gl,h=a.getParameter(a.FRAMEBUFFER_BINDING),b=a.getParameter(a.VIEWPORT);a.bindFramebuffer(a.FRAMEBUFFER,d.framebuffer),a.viewport(c.x,c.y,c.width,c.height),i.blitTexture(a,i.textures[e]),a.bindFramebuffer(a.FRAMEBUFFER,h),a.viewport(b[0],b[1],b[2],b[3])}function nd(){if(!i.space||!i.space.boundsGeometry)return 0;const b=i.space.boundsGeometry.length;if(b===0)return 0;const a=g.malloc((b*3+1)*4);g.setHeapValue(a,b,"i32");for(let c=0;c<b;c++){const d=i.space.boundsGeometry[c];g.setHeapValue(a+(c*3+1)*4,d.x,"float"),g.setHeapValue(a+(c*3+2)*4,d.y,"float"),g.setHeapValue(a+(c*3+3)*4,d.z,"float")}return a}function ne(d){if(i.controllers.length===0)return 0;const a=i.controllers[d];if(!a||!a.gamepad)return 0;const b=a.gamepad.axes.length,c=g.malloc((b+1)*4);g.setHeapValue(c,b,"i32");for(let d=0;d<b;d++){let e=a.gamepad.axes[d];(d===1||d===3)&&(e*=-1),g.setHeapValue(c+4+d*4,e,"float")}return c}function nf(d){if(i.controllers.length===0)return 0;const a=i.controllers[d];if(!a||!a.gamepad)return 0;const b=a.gamepad.buttons.length,c=g.malloc((b+1)*4);g.setHeapValue(c,b,"i32");for(let d=0;d<b;d++)g.setHeapValue(c+4+d*4,a.gamepad.buttons[d].value,"float");return c}function ng(){return!i.session||!i.frame?0:i.controllers.length}function nh(h){if(!i.session||!i.frame)return 0;const b=i.controllers[h];if(!b)return 0;const d=i.frame,e=i.space,c=d.getPose(b.targetRaySpace,e);if(!c)return 0;const f=c.transform.matrix,a=g.malloc(16*4);for(let b=0;b<16;b++)g.setHeapValue(a+b*4,f[b],"float");return a}function ni(j){if(!i.session)return 0;const b=j===2?1:0;if(i.texture_ids[b])return i.texture_ids[b];if(!i.pose)return 0;const g=i.session.renderState.baseLayer,h=i.pose.views[b],f=g.getViewport(h),a=i.gl,c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,f.width,f.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null);const e=d.getNewId(d.textures);return d.textures[e]=c,i.textures[b]=c,i.texture_ids[b]=e,e}function nj(b){if(!i.session||!i.pose)return 0;const c=b===2?1:0,d=i.pose.views[c].projectionMatrix,a=g.malloc(16*4);for(let b=0;b<16;b++)g.setHeapValue(a+b*4,d[b],"float");return a}function nk(){if(!i.session||!i.pose)return 0;const c=i.session.renderState.baseLayer,d=i.pose.views[0],b=c.getViewport(d),a=g.malloc(2*4);return g.setHeapValue(a+0,b.width,"i32"),g.setHeapValue(a+4,b.height,"i32"),a}function nl(b){if(!i.session||!i.pose)return 0;const d=i.pose.views;let a;b===0?a=i.pose.transform.matrix:a=d[b-1].transform.matrix;const c=g.malloc(16*4);for(let b=0;b<16;b++)g.setHeapValue(c+b*4,a[b],"float");return c}function nm(){return!i.session||!i.pose?0:i.pose.views.length}function nn(){return!i.session||!i.session.visibilityState?0:g.allocString(i.session.visibilityState)}function no(x,w,t,q,p,o,n,k,l,m){i.monkeyPatchRequestAnimationFrame(!0);const j=g.parseString(x),h=g.parseString(w).split(",").map(a=>a.trim()).filter(a=>a!==""),f=g.parseString(t).split(",").map(a=>a.trim()).filter(a=>a!==""),e=g.parseString(q).split(",").map(a=>a.trim()),r=g.get_func(p),s=g.get_func(o),b=g.get_func(n),u=g.get_func(k),v=g.get_func(l),c=g.get_func(m),a={};h.length>0&&(a.requiredFeatures=h),f.length>0&&(a.optionalFeatures=f),navigator.xr.requestSession(j,a).then(function(a){i.session=a,a.addEventListener("end",function(a){s()}),a.addEventListener("inputsourceschange",function(a){let b=!1;[a.added,a.removed].forEach(a=>{a.forEach(a=>{a.targetRayMode==="tracked-pointer"&&(b=!0)})}),b&&u()}),["selectstart","select","selectend","squeezestart","squeeze","squeezeend"].forEach(b=>{a.addEventListener(b,function(c){const a=g.allocString(b);v(a,i.getControllerId(c.inputSource)),g.free(a)})}),a.addEventListener("visibilitychange",function(b){const a=g.allocString("visibility_state_changed");c(a),g.free(a)});const h=bN(),f=d.getContext(h).GLctx;i.gl=f,f.makeXRCompatible().then(function(){a.updateRenderState({baseLayer:new XRWebGLLayer(a,f)});function h(a,b){i.space=a,a.onreset=function(b){const a=g.allocString("reference_space_reset");c(a),g.free(a)},i.pauseResumeMainLoop(),window.setTimeout(function(){const a=g.allocString(b);r(a),g.free(a)},0)}function d(){const c=e.shift();a.requestReferenceSpace(c).then(a=>{h(a,c)}).catch(()=>{if(e.length===0){const a=g.allocString("Unable to get any of the requested reference space types");b(a),g.free(a)}else d()})}d()}).catch(function(c){const a=g.allocString(`Unable to make WebGL context compatible with WebXR: ${c}`);b(a),g.free(a)})}).catch(function(c){const a=g.allocString(`Unable to start session: ${c}`);b(a),g.free(a)})}function np(a){return!(!i.session||!i.frame)&&!!i.controllers[a]}function nq(c,d){const a=g.parseString(c),b=g.get_func(d);if(navigator.xr)navigator.xr.isSessionSupported(a).then(function(d){const c=g.allocString(a);b(c,d?1:0),g.free(c)});else{const c=g.allocString(a);b(c,0),g.free(c)}}function nr(){return!!navigator.xr}function ns(){i.sampleControllers()}function nt(){i.session&&i.session.end().catch(a=>{});const a=i.gl;for(let b=0;b<i.textures.length;b++){const c=i.textures[b];c!==null&&a.deleteTexture(c),i.textures[b]=null;const e=i.texture_ids[b];e!==null&&(d.textures[e]=null),i.texture_ids[b]=null}i.session=null,i.space=null,i.frame=null,i.pose=null,i.monkeyPatchRequestAnimationFrame(!1),i.pauseResumeMainLoop()}function nu(a,b){return bc(B.EPERM),-1}function bG(){var c,d,f,a,b,i,k,l,g,h;if(bG.called)return;bG.called=!0,c=(new Date).getFullYear(),d=new Date(c,0,1),f=new Date(c,6,1),a=d.getTimezoneOffset(),b=f.getTimezoneOffset(),i=Math.max(a,b),e[bM()>>2]=i*60,e[bL()>>2]=Number(a!=b);function j(b){var a=b.toTimeString().match(/\(([A-Za-z ]+)\)$/);return a?a[1]:"GMT"}k=j(d),l=j(f),g=bX(k),h=bX(l),b<a?(e[aw()>>2]=g,e[aw()+4>>2]=h):(e[aw()>>2]=h,e[aw()+4>>2]=g)}function nw(j,b){var a,d,h,f,c,g,i;return bG(),a=new Date(e[j>>2]*1e3),e[b>>2]=a.getSeconds(),e[b+4>>2]=a.getMinutes(),e[b+8>>2]=a.getHours(),e[b+12>>2]=a.getDate(),e[b+16>>2]=a.getMonth(),e[b+20>>2]=a.getFullYear()-1900,e[b+24>>2]=a.getDay(),d=new Date(a.getFullYear(),0,1),h=(a.getTime()-d.getTime())/(1e3*60*60*24)|0,e[b+28>>2]=h,e[b+36>>2]=-(a.getTimezoneOffset()*60),f=new Date(a.getFullYear(),6,1).getTimezoneOffset(),c=d.getTimezoneOffset(),g=(f!=c&&a.getTimezoneOffset()==Math.min(c,f))|0,e[b+32>>2]=g,i=e[aw()+(g?4:0)>>2],e[b+40>>2]=i,b}function nx(a){cS(a|0)}function ny(a,b,c){return 0}function bp(a){return a%4===0&&(a%100!==0||a%400===0)}function bE(c,d){for(var a=0,b=0;b<=d;a+=c[b++]);return a}aQ=[31,29,31,30,31,30,31,31,30,31,30,31],aJ=[31,28,31,30,31,30,31,31,30,31,30,31];function a_(e,b){for(var a=new Date(e.getTime()),f,c,d;b>0;)if(f=bp(a.getFullYear()),c=a.getMonth(),d=(f?aQ:aJ)[c],b>d-a.getDate())b-=d-a.getDate()+1,a.setDate(1),c<11?a.setMonth(c+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else return a.setDate(a.getDate()+b),a;return a}function ce(s,r,q,b){var k=e[b+40>>2],p={tm_sec:e[b>>2],tm_min:e[b+4>>2],tm_hour:e[b+8>>2],tm_mday:e[b+12>>2],tm_mon:e[b+16>>2],tm_year:e[b+20>>2],tm_wday:e[b+24>>2],tm_yday:e[b+28>>2],tm_isdst:e[b+32>>2],tm_gmtoff:e[b+36>>2],tm_zone:k?G(k):""},f=G(q),j={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"},d,i,l,o,h;for(d in j)f=f.replace(new RegExp(d,"g"),j[d]);i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function m(b,c,d){for(var a=typeof b=="number"?b.toString():b||"";a.length<c;)a=d[0]+a;return a}function a(a,b){return m(a,b,"0")}function c(b,c){function d(a){return a<0?-1:a>0?1:0}var a;return(a=d(b.getFullYear()-c.getFullYear()))===0&&(a=d(b.getMonth()-c.getMonth()))===0&&(a=d(b.getDate()-c.getDate())),a}function g(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function n(b){var a=a_(new Date(b.tm_year+1900,0,1),b.tm_yday),d=new Date(a.getFullYear(),0,4),e=new Date(a.getFullYear()+1,0,4),f=g(d),h=g(e);return c(f,a)<=0?c(h,a)<=0?a.getFullYear()+1:a.getFullYear():a.getFullYear()-1}o={"%a":function(a){return i[a.tm_wday].substring(0,3)},"%A":function(a){return i[a.tm_wday]},"%b":function(a){return l[a.tm_mon].substring(0,3)},"%B":function(a){return l[a.tm_mon]},"%C":function(b){var c=b.tm_year+1900;return a(c/100|0,2)},"%d":function(b){return a(b.tm_mday,2)},"%e":function(a){return m(a.tm_mday,2," ")},"%g":function(a){return n(a).toString().substring(2)},"%G":function(a){return n(a)},"%H":function(b){return a(b.tm_hour,2)},"%I":function(c){var b=c.tm_hour;return b==0?b=12:b>12&&(b-=12),a(b,2)},"%j":function(b){return a(b.tm_mday+bE(bp(b.tm_year+1900)?aQ:aJ,b.tm_mon-1),3)},"%m":function(b){return a(b.tm_mon+1,2)},"%M":function(b){return a(b.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){return a.tm_hour>=0&&a.tm_hour<12?"AM":"PM"},"%S":function(b){return a(b.tm_sec,2)},"%t":function(){return"	"},"%u":function(a){return a.tm_wday||7},"%U":function(d){var b=new Date(d.tm_year+1900,0,1),f=b.getDay()===0?b:a_(b,7-b.getDay()),e=new Date(d.tm_year+1900,d.tm_mon,d.tm_mday),g,h,i;return c(f,e)<0?(g=bE(bp(e.getFullYear())?aQ:aJ,e.getMonth()-1)-31,h=31-f.getDate(),i=h+g+e.getDate(),a(Math.ceil(i/7),2)):c(f,b)===0?"01":"00"},"%V":function(b){var h=new Date(b.tm_year+1900,0,4),i=new Date(b.tm_year+1901,0,4),d=g(h),j=g(i),f=a_(new Date(b.tm_year+1900,0,1),b.tm_yday),e;return c(f,d)<0?"53":c(j,f)<=0?"01":(d.getFullYear()<b.tm_year+1900?e=b.tm_yday+32-d.getDate():e=b.tm_yday+1-d.getDate(),a(Math.ceil(e/7),2))},"%w":function(a){return a.tm_wday},"%W":function(d){var b=new Date(d.tm_year,0,1),f=b.getDay()===1?b:a_(b,b.getDay()===0?1:7-b.getDay()+1),e=new Date(d.tm_year+1900,d.tm_mon,d.tm_mday),g,h,i;return c(f,e)<0?(g=bE(bp(e.getFullYear())?aQ:aJ,e.getMonth()-1)-31,h=31-f.getDate(),i=h+g+e.getDate(),a(Math.ceil(i/7),2)):c(f,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(b){var a=b.tm_gmtoff,c=a>=0;return a=Math.abs(a)/60,a=a/60*100+a%60,(c?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(d in o)f.indexOf(d)>=0&&(f=f.replace(new RegExp(d,"g"),o[d](p)));return h=bj(f,!1),h.length>r?0:(cF(h,s),h.length-1)}function nF(a,b,c,d){return ce(a,b,c,d)}function nG(a){switch(a){case 30:return 16384;case 85:var b=2147483648;return b/16384;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"?navigator.hardwareConcurrency||1:1}return bc(28),-1}function nH(a){var b=Date.now()/1e3|0;return a&&(e[a>>2]=b),b}bi=[];function nJ(d,a){var b,c;for(bi.length=0,a>>=2;b=r[d++];)c=b<105,c&&a&1&&a++,bi.push(c?an[a++>>1]:e[a]),++a;return bi}by=function(a,c,d,e){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=b.nextInode++,this.name=c,this.mode=d,this.node_ops={},this.stream_ops={},this.rdev=e},aK=292|73,aI=146,Object.defineProperties(by.prototype,{read:{get:function(){return(this.mode&aK)===aK},set:function(a){a?this.mode|=aK:this.mode&=~aK}},write:{get:function(){return(this.mode&aI)===aI},set:function(a){a?this.mode|=aI:this.mode&=~aI}},isFolder:{get:function(){return b.isDir(this.mode)}},isDevice:{get:function(){return b.isChrdev(this.mode)}}}),b.FSNode=by,b.staticInit(),f.requestFullscreen=function(a,b){h.requestFullscreen(a,b)},f.requestAnimationFrame=function(a){h.requestAnimationFrame(a)},f.setCanvasSize=function(a,b,c){h.setCanvasSize(a,b,c)},f.pauseMainLoop=function(){h.mainLoop.pause()},f.resumeMainLoop=function(){h.mainLoop.resume()},f.getUserMedia=function(){h.getUserMedia()},f.createContext=function(a,b,c,d){return h.createContext(a,b,c,d)};for(U=0;U<32;++U)ag.push(new Array(U));cf=new Float32Array(288);for(U=0;U<288;++U)N[U]=cf.subarray(0,U+1);cg=new Int32Array(288);for(U=0;U<288;++U)ap[U]=cg.subarray(0,U+1);f.request_quit=function(){M.request_quit()},f.onExit=M.cleanup,M._fs_sync_promise=Promise.resolve(),f.initConfig=p.init_config,f.initFS=C.init,f.copyToFS=C.copy_to_fs,M.atexit(function(a,b){x.clear(),a()}),M.atexit(function(a,b){I.clear(),a()}),M.atexit(function(a,b){t.clear(),a()});function bj(b,d,c){var e=c>0?c:ar(b)+1,a=new Array(e),f=aC(b,a,0,a.length);return d&&(a.length=f),a}ch={m:n_,id:cT,Nc:nX,$c:nW,Qc:nV,_c:nU,hd:nS,Pc:nR,Fa:nQ,Zc:nP,md:nO,Yc:nN,Mc:nM,Ic:nL,qb:nK,Oc:nI,gd:nE,rb:nD,jd:nC,Jc:nB,ad:nA,bd:nz,Lc:nv,Hc:nb,nb:mX,fd:mO,ed:mI,dd:mB,kd:ml,la:mk,Ea:lB,jj:lA,Lb:lz,jb:ly,ij:lx,Zi:lw,Kb:lk,wb:iM,tb:iK,ab:iH,ej:iG,$h:am,xg:iu,si:gq,ri:gp,ff:go,Ji:fI,Me:fE,qi:fu,pi:eZ,Je:eR,Ke:eQ,oi:eI,ni:ew,Md:ei,mi:d_,Ed:dl,Se:cU,Bi:cV,ki:cW,ji:cX,ii:cY,hi:cZ,gi:c_,Ve:c$,fi:da,ei:db,di:dc,ci:dd,le:de,me:df,oe:dg,ne:dh,bi:di,_h:dj,Zh:dk,Wd:dm,Yh:dn,Xh:dp,Wh:dq,mf:dr,Vh:ds,lf:dt,ie:du,Uh:dv,Th:dw,nf:dx,Sh:dy,Rh:dz,Qh:dA,Ph:dB,Oh:dC,Nh:dD,hf:dE,Li:dF,Mh:dG,Pd:dH,Lh:dI,Xd:dJ,Kh:dK,Cd:dL,Re:dM,Ai:dN,Jh:dO,Ih:dP,Hh:dQ,Fh:dR,Eh:dS,Dh:dT,Ch:dU,be:dV,vi:dW,xf:dX,yf:dY,nd:dZ,bf:d$,sf:ea,xi:eb,Bh:ec,ae:ed,ui:ee,tf:ef,uf:eg,wf:eh,qf:ej,Ah:ek,zh:el,ef:em,Ii:en,Le:eo,$d:ep,yh:eq,xh:er,wh:es,vh:et,Te:eu,uh:ev,th:ex,rh:ey,jf:ez,Mi:eA,qh:eB,Qd:eC,ph:eD,Bd:eE,Qe:eF,zi:eG,sh:eH,oh:eJ,nh:eK,de:eL,ee:eM,ge:eN,mh:eO,lh:eP,kh:eS,Rd:eT,jh:eU,ih:eV,hh:eW,xe:eX,gh:eY,Sd:e_,Ud:e$,Ne:fa,fh:fb,pd:fc,xd:fd,dh:fe,eh:ff,Di:fg,Fi:fh,Ci:fi,cf:fj,Ei:fk,df:fl,Gi:fm,ch:fn,Gd:fo,Hd:fp,ah:fq,$g:fr,_g:fs,bh:ft,Zg:fv,ke:fw,Td:fx,Yg:fy,Xg:fz,He:fA,fe:fB,he:fC,Ug:fD,Wg:fF,Vg:fG,ye:fH,Fe:fJ,De:fK,Qg:fL,Sg:fM,Rg:fN,Pg:fO,ud:fP,td:fQ,Og:fR,Ng:fS,Mg:fT,Lg:fU,gf:fV,Ki:fW,Kg:fX,Nd:fY,Jg:fZ,Yd:f_,Hg:f$,Ad:ga,Oe:gb,yi:gc,Gg:gd,Fg:ge,zd:gf,Eg:gg,Dg:gh,wd:gi,vd:gj,Hi:gk,rf:gl,Cg:gr,Bg:gs,Ag:gt,Ue:gu,yd:gv,zg:gw,Jd:gx,Id:gy,Ld:gz,Kd:gA,yg:gB,wg:gC,vg:gD,ug:gE,tg:gF,sg:gG,rg:gH,qg:gI,pg:gJ,og:gK,pf:gL,ng:gM,lg:gN,kg:gO,jg:gP,rd:gQ,qd:gR,ig:gS,of:gT,Ie:gU,hg:gV,gg:gX,fg:gY,eg:g_,we:g$,se:ha,dg:hb,cg:hc,$f:hd,_f:he,ve:hf,re:hg,Zf:hh,Yf:hi,Xf:hj,Wf:hk,ue:hl,qe:hm,Vf:hn,Uf:ho,Tf:hp,Sf:hq,te:hr,pe:hs,ce:ht,Qf:hu,af:hv,Ze:hw,Pf:hx,$e:hy,Xe:hz,Of:hA,Ye:hB,We:hC,Nf:hD,Mf:hE,Lf:hF,Kf:hG,Jf:hH,If:hI,Hf:hJ,Ff:hK,Ef:hL,Df:hM,Fd:hN,ti:hO,zf:hP,Af:hQ,od:hR,Ce:hS,Ae:hT,Be:hU,ze:hV,Ge:hW,Cf:hX,Bf:hY,Vd:hZ,F:h$,Rc:ia,Tg:ib,va:ie,wc:ii,Ac:ik,yc:il,xc:im,Jb:io,Od:ir,Dd:is,sd:it,Gc:iv,Kc:iw,Tc:ix,cd:iy,ld:iA,Wc:iB,kb:lq,je:iE,jc:iI,Ee:iJ,Zd:cv,Uc:iN,Vc:iO,wa:iP,Xc:iQ,pb:iR,Cc:iS,ob:iT,Wa:aN,k:iW,Xa:iX,Zb:iY,ib:iZ,c:i_,Oa:i$,cb:ja,Bb:jb,b:jc,P:jd,e:je,ba:jf,a:jg,n:jh,E:ji,T:jj,x:jk,ja:jl,r:jm,M:jn,O:jo,L:jp,ra:jq,R:jr,da:js,Q:jt,Qa:ju,Gb:jv,Vi:jw,Xi:jx,eb:jy,Ui:jz,Za:jA,Cb:jB,Sa:jC,sa:jD,N:jE,I:jF,S:jG,X:jH,K:jI,D:jJ,ga:jK,_:jL,J:jM,i:jN,q:jO,A:jP,za:jQ,Ja:jR,ea:cR,Ka:jS,s:jT,j:jU,bb:jV,cj:jW,aa:jX,y:jY,Wi:jZ,Hb:j_,C:j$,G:ka,ia:kb,w:kc,Y:kd,U:ke,Ib:kf,Db:kg,ca:kh,zb:ki,Na:kj,Pa:kk,qa:kl,Ta:km,Si:kn,Pi:ko,xa:kp,$i:kq,Ab:kr,na:ks,ka:kt,db:ku,ha:kv,Ga:kw,W:kx,Ra:ky,t:kz,Ia:kA,g:kB,d:kC,Yi:kD,Ha:kE,Ua:kF,Ri:kG,f:kH,v:kI,fb:kJ,Eb:kK,$a:kL,o:kM,Da:kN,oa:kO,_a:kP,Z:kQ,Ca:kR,ya:kS,z:kT,Ba:kU,Oi:kV,yb:kW,xb:kX,p:kY,fa:kZ,B:k_,V:k$,H:la,fj:lb,La:lc,h:ld,u:le,Nb:bq,ai:ll,bg:lm,Wj:ln,Xj:lo,bj:lp,_d:lr,zc:ls,ac:lt,aj:lu,gc:lC,vb:lD,mg:lE,kf:lF,vf:lG,_i:lH,Ig:lI,ub:lJ,Gh:lK,Ya:lL,Qi:lM,tc:lN,li:lO,wi:lP,sc:lQ,mc:lR,Rf:lS,Gf:lT,sb:lU,Pe:lV,vc:lW,uc:lX,kc:lY,lc:lZ,Ti:l_,_e:l$,Fb:ma,ag:mb,qc:mc,rc:md,oc:me,pc:mf,dc:mg,Ni:mh,ec:mi,gj:mj,Vj:mm,fc:mn,lb:mo,sj:mp,_b:mq,Kj:mr,lj:ms,hb:mt,ic:mu,dj:mv,$b:mw,nc:mx,hc:my,bc:mz,cc:mA,Yb:mC,Sj:mD,Pj:mE,Ub:mF,Tj:mG,Vb:mH,Rj:oF,Tb:mJ,Uj:mK,Qj:mL,Xb:mM,Wb:mN,Oj:mP,Ij:mQ,Hj:mR,Sb:mS,Jj:mT,Mj:mU,Nj:mV,Lj:mW,Rb:mY,Fj:mZ,Ej:m_,Qb:m$,Gj:na,rj:nc,Bj:nd,nj:ne,oj:nf,qj:ng,pj:nh,tj:ni,uj:nj,wj:nk,vj:nl,Aj:nm,Cj:nn,yj:no,Ob:np,Dj:nq,zj:nr,Pb:ns,xj:nt,Aa:oq,ma:or,Ec:ov,mb:os,Fc:ot,Dc:ox,Bc:oy,$:oo,pa:on,ua:op,ta:ou,Ma:ow,kj:nu,gb:nw,l:nx,mj:ny,Mb:ce,Sc:nF,hj:nG,Va:nH},nT=oa(),bK=f.___wasm_call_ctors=function(){return(bK=f.___wasm_call_ctors=f.asm.Zj).apply(null,arguments)},bu=f._free=function(){return(bu=f._free=f.asm._j).apply(null,arguments)},ck=f.__Z13godot_js_mainiPPc=function(){return(ck=f.__Z13godot_js_mainiPPc=f.asm.$j).apply(null,arguments)},cl=f._main=function(){return(cl=f._main=f.asm.ak).apply(null,arguments)},R=f._malloc=function(){return(R=f._malloc=f.asm.bk).apply(null,arguments)},cm=f._fflush=function(){return(cm=f._fflush=f.asm.ck).apply(null,arguments)},aV=f._htonl=function(){return(aV=f._htonl=f.asm.dk).apply(null,arguments)},aP=f._htons=function(){return(aP=f._htons=f.asm.ek).apply(null,arguments)},bk=f._ntohs=function(){return(bk=f._ntohs=f.asm.fk).apply(null,arguments)},bC=f.___errno_location=function(){return(bC=f.___errno_location=f.asm.gk).apply(null,arguments)},cs=f.__emwebxr_on_input_event=function(){return(cs=f.__emwebxr_on_input_event=f.asm.hk).apply(null,arguments)},cu=f.__emwebxr_on_simple_event=function(){return(cu=f.__emwebxr_on_simple_event=f.asm.ik).apply(null,arguments)},aw=f.__get_tzname=function(){return(aw=f.__get_tzname=f.asm.jk).apply(null,arguments)},bL=f.__get_daylight=function(){return(bL=f.__get_daylight=f.asm.kk).apply(null,arguments)},bM=f.__get_timezone=function(){return(bM=f.__get_timezone=f.asm.lk).apply(null,arguments)},L=f.stackSave=function(){return(L=f.stackSave=f.asm.mk).apply(null,arguments)},J=f.stackRestore=function(){return(J=f.stackRestore=f.asm.nk).apply(null,arguments)},af=f.stackAlloc=function(){return(af=f.stackAlloc=f.asm.ok).apply(null,arguments)},P=f._setThrew=function(){return(P=f._setThrew=f.asm.pk).apply(null,arguments)},bP=f.dynCall_iij=function(){return(bP=f.dynCall_iij=f.asm.rk).apply(null,arguments)};function on(a,b,c){var d=L();try{y.get(a)(b,c)}catch(a){if(J(d),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function oo(a,b){var c=L();try{y.get(a)(b)}catch(a){if(J(c),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function op(a,b,c,d){var e=L();try{y.get(a)(b,c,d)}catch(a){if(J(e),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function oq(a,b){var c=L();try{return y.get(a)(b)}catch(a){if(J(c),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function or(a,b,c){var d=L();try{return y.get(a)(b,c)}catch(a){if(J(d),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function os(a,b,c,d,e){var f=L();try{return y.get(a)(b,c,d,e)}catch(a){if(J(f),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function ot(a,b,c,d,e,f){var g=L();try{return y.get(a)(b,c,d,e,f)}catch(a){if(J(g),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function ou(a,b,c,d,e){var f=L();try{y.get(a)(b,c,d,e)}catch(a){if(J(f),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function ov(a,b,c,d){var e=L();try{return y.get(a)(b,c,d)}catch(a){if(J(e),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function ow(a,b,c,d,e,f,g,h){var i=L();try{y.get(a)(b,c,d,e,f,g,h)}catch(a){if(J(i),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function ox(a,b,c,d,e,f,g){var h=L();try{return y.get(a)(b,c,d,e,f,g)}catch(a){if(J(h),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}function oy(a,b,c,d){var e=L();try{return bP(a,b,c,d)}catch(a){if(J(e),a!==a+0&&a!=="longjmp")throw a;P(1,0)}}f.cwrap=oz,f.callMain=cJ;function bZ(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}cI=!1,az=function a(){aL||bF(),aL||(az=a)};function cJ(a){var h=f._main,b,c,d,i,g;a=a||[],b=a.length+1,c=af((b+1)*4),e[c>>2]=cG(bn);for(d=1;d<b;d++)e[(c>>2)+d]=cG(a[d-1]);e[(c>>2)+b]=0;try{i=h(b,c),cO(i,!0)}catch(a){if(a instanceof bZ)return;if(a=="unwind"){ax=!0;return}g=a,a&&typeof a=="object"&&a.stack&&(g=[a,a.stack]),A("exception thrown: "+g),bf(1,a)}finally{cI=!0}}function bF(a){if(a=a||bR,au>0)return;if(ok(),au>0)return;function b(){if(aL)return;if(aL=!0,f.calledRun=!0,aj)return;oj(),oi(),b$(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),bs&&cJ(a),og()}f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),b()},1)):b()}f.run=bF;function cO(a,b){if(b&&ax&&a===0)return;ax||(b_=a,oh(),f.onExit&&f.onExit(a),aj=!0),bf(a,new bZ(a))}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();return bs=!1,f.noInitialRun&&(bs=!1),bF(),aH.ready}}();typeof exports=='object'&&typeof module=='object'?module.exports=Godot:typeof define=='function'&&define.amd?define([],function(){return Godot}):typeof exports=='object'&&(exports.Godot=Godot);const Preloader=function(){function g(b,a){function c(b,d){return b.read().then(function(e){return a.done?Promise.resolve():(e.value&&(d.enqueue(e.value),a.loaded+=e.value.length),!e.done)?c(b,d):(a.done=!0,Promise.resolve())})}const d=b.body.getReader();return new Response(new ReadableStream({start:function(a){c(d,a).then(function(){a.close()})}}),{headers:b.headers})}function h(a,b,c,d){return b[a]={total:c||0,loaded:0,done:!1},fetch(a).then(function(c){if(!c.ok)return Promise.reject(new Error(`Failed loading file '${a}'`));const e=g(c,b[a]);return d?Promise.resolve(e):e.arrayBuffer()})}function e(a,b=1){function c(c){return b<=1?Promise.reject(c):new Promise(function(c,d){setTimeout(function(){e(a,b-1).then(c).catch(d)},1e3)})}return a().catch(c)}const f=4,c={},a={loaded:0,total:0};let b=null;const d=function(){let f=0,e=0,g=!0,h=!0;Object.keys(c).forEach(function(b){const a=c[b];a.done||(h=!1),!g||a.total===0?(g=!1,e=0):e+=a.total,f+=a.loaded}),(f!==a.loaded||e!==a.total)&&(a.loaded=f,a.total=e,typeof b=='function'&&b(f,e)),h||requestAnimationFrame(d)};this.animateProgress=d,this.setProgressFunc=function(a){b=a},this.loadPromise=function(a,b,d=!1){return e(h.bind(null,a,c,b,d),f)},this.preloadedFiles=[],this.preload=function(a,c,d){let b=null;if(typeof a=='string'){const b=this;return this.loadPromise(a,d).then(function(d){return b.preloadedFiles.push({path:c||a,buffer:d}),Promise.resolve()})}return a instanceof ArrayBuffer?b=new Uint8Array(a):ArrayBuffer.isView(a)&&(b=new Uint8Array(a.buffer)),b?(this.preloadedFiles.push({path:c,buffer:a}),Promise.resolve()):Promise.reject(new Error('Invalid object for preloading'))}},EngineConfig={},InternalConfig=function(b){const c={unloadAfterInit:!0,canvas:null,executable:'',mainPack:null,locale:null,canvasResizePolicy:2,args:[],experimentalVK:!1,persistentPaths:['/userfs'],persistentDrops:!1,gdnativeLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(a){console.error.apply(console,Array.from(arguments))}};function a(a){this.update(a)}return a.prototype=c,a.prototype.update=function(c){const b=c||{};function a(a,c){return typeof b[a]=='undefined'?c:b[a]}this.unloadAfterInit=a('unloadAfterInit',this.unloadAfterInit),this.onPrintError=a('onPrintError',this.onPrintError),this.onPrint=a('onPrint',this.onPrint),this.onProgress=a('onProgress',this.onProgress),this.canvas=a('canvas',this.canvas),this.executable=a('executable',this.executable),this.mainPack=a('mainPack',this.mainPack),this.locale=a('locale',this.locale),this.canvasResizePolicy=a('canvasResizePolicy',this.canvasResizePolicy),this.persistentPaths=a('persistentPaths',this.persistentPaths),this.persistentDrops=a('persistentDrops',this.persistentDrops),this.experimentalVK=a('experimentalVK',this.experimentalVK),this.gdnativeLibs=a('gdnativeLibs',this.gdnativeLibs),this.fileSizes=a('fileSizes',this.fileSizes),this.args=a('args',this.args),this.onExecute=a('onExecute',this.onExecute),this.onExit=a('onExit',this.onExit)},a.prototype.getModuleConfig=function(a,c){let b=c;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!0,dynamicLibraries:[`${a}.side.wasm`],instantiateWasm:function(a,d){function c(a){d(a.instance,a.module)}return typeof WebAssembly.instantiateStreaming!='undefined'?WebAssembly.instantiateStreaming(Promise.resolve(b),a).then(c):b.arrayBuffer().then(function(b){WebAssembly.instantiate(b,a).then(c)}),b=null,{}},locateFile:function(b){return b.endsWith('.worker.js')?`${a}.worker.js`:b.endsWith('.audio.worklet.js')?`${a}.audio.worklet.js`:b.endsWith('.js')?`${a}.js`:b.endsWith('.side.wasm')?`${a}.side.wasm`:b.endsWith('.wasm')?`${a}.wasm`:b}}},a.prototype.getGodotConfig=function(c){if(!(this.canvas instanceof HTMLCanvasElement)){const a=document.getElementsByTagName('canvas');if(a.length&&a[0]instanceof HTMLCanvasElement&&(this.canvas=a[0]),!this.canvas)throw new Error('No canvas found in page')}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let a=this.locale;a||(a=navigator.languages?navigator.languages[0]:navigator.language,a=a.split('.')[0]);const b=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale:a,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,onExecute:this.onExecute,onExit:function(a){c(),typeof b=='function'&&b(a)}}},new a(b)},Engine=function(){const c=new Preloader;let d=null,f='',b=null;function a(a){this.config=new InternalConfig(a),this.rtenv=null}a.load=function(a,b){return d==null&&(f=a,d=c.loadPromise(`${f}.wasm`,b,!0),requestAnimationFrame(c.animateProgress)),d},a.unload=function(){d=null},a.isWebGLAvailable=function(a=1){try{return!!document.createElement('canvas').getContext(['webgl','webgl2'][a-1])}catch(a){}return!1};function e(e){const g={init:function(g){if(b)return b;if(d==null){if(!g)return b=Promise.reject(new Error('A base path must be provided when calling `init` and the engine is not loaded.')),b;a.load(g,this.config.fileSizes[`${g}.wasm`])}const e=this;function h(b){return new Promise(function(c,d){b.then(function(b){const d=new Response(b.clone().body,{headers:[['content-type','application/wasm']]});Godot(e.config.getModuleConfig(f,d)).then(function(b){const d=e.config.persistentPaths;b.initFS(d).then(function(d){e.rtenv=b,e.config.unloadAfterInit&&a.unload(),c()})})})})}return c.setProgressFunc(this.config.onProgress),b=h(d),b},preloadFile:function(a,b){return c.preload(a,b,this.config.fileSizes[a])},start:function(d){this.config.update(d);const a=this;return a.init().then(function(){if(!a.rtenv)return Promise.reject(new Error('The engine must be initialized before it can be started'));let d={};try{d=a.config.getGodotConfig(function(){a.rtenv=null})}catch(a){return Promise.reject(a)}a.rtenv.initConfig(d);const e=[];return a.config.gdnativeLibs.forEach(function(b){e.push(a.rtenv.loadDynamicLibrary(b,{loadAsync:!0}))}),Promise.all(e).then(function(){return new Promise(function(d,e){c.preloadedFiles.forEach(function(b){a.rtenv.copyToFS(b.path,b.buffer)}),c.preloadedFiles.length=0,a.rtenv.callMain(a.config.args),b=null,d()})})})},startGame:function(d){this.config.update(d);const b=this.config.executable,a=this.config.mainPack||`${b}.pck`;this.config.args=['--main-pack',a].concat(this.config.args);const c=this;return Promise.all([this.init(b),this.preloadFile(a,a)]).then(function(){return c.start.apply(c)})},copyToFS:function(a,b){if(this.rtenv==null)throw new Error('Engine must be inited before copying files');this.rtenv.copyToFS(a,b)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()}};return a.prototype=g,a.prototype.init=a.prototype.init,a.prototype.preloadFile=a.prototype.preloadFile,a.prototype.start=a.prototype.start,a.prototype.startGame=a.prototype.startGame,a.prototype.copyToFS=a.prototype.copyToFS,a.prototype.requestQuit=a.prototype.requestQuit,a.prototype.load=a.load,a.prototype.unload=a.unload,a.prototype.isWebGLAvailable=a.isWebGLAvailable,new a(e)}return e.load=a.load,e.unload=a.unload,e.isWebGLAvailable=a.isWebGLAvailable,e}();typeof window!='undefined'&&(window.Engine=Engine)